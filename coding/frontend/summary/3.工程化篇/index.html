<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.51" />
    <meta name="theme" content="VuePress Theme Hope" />
    <link rel="icon" href="https://wannadoing.gitee.io/pic/own-icon.jpg"><title>å·¥ç¨‹åŒ– | Just to do it</title><meta name="description" content="todoingçš„ä¸ªäººçŸ¥è¯†åº“">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.e6ae6583.css">
    <link rel="modulepreload" href="/assets/app.4b209731.js"><link rel="modulepreload" href="/assets/index.html.9332aaf8.js"><link rel="modulepreload" href="/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/assets/index.html.6c843aab.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="https://wannadoing.gitee.io/pic/own-icon.jpg" alt="Just to do it"><!----><span class="site-name hide-in-pad">Just to do it</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="ä¸»é¡µ"><span class="icon iconfont icon-home"></span>ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/coding" class="nav-link active" aria-label="coding"><span class="icon iconfont icon-react"></span>coding<!----></a></div><div class="nav-item hide-in-mobile"><a href="/studySchool/" class="nav-link" aria-label="è¯¾ç¨‹ç¬”è®°"><span class="icon iconfont icon-note"></span>è¯¾ç¨‹ç¬”è®°<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="æ›´å¤š"><span class="title"><span class="icon iconfont icon-more"></span>æ›´å¤š</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/slides.html" class="nav-link" aria-label="ä½¿ç”¨éœ€çŸ¥"><span class="icon iconfont icon-warn"></span>ä½¿ç”¨éœ€çŸ¥<!----></a></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>èµ„æºåº“</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://todoing.github.io/store" rel="noopener noreferrer" target="_blank" aria-label="ä¸»é“¾" class="nav-link"><!---->ä¸»é“¾<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-subitem"><a href="https://wannadoing.github.io" rel="noopener noreferrer" target="_blank" aria-label="å¤‡ç”¨é“¾" class="nav-link"><!---->å¤‡ç”¨é“¾<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li></ul></li><li class="dropdown-item"><a href="/functionTest" class="nav-link" aria-label="åŠŸèƒ½æµ‹è¯•"><span class="icon iconfont icon-app"></span>åŠŸèƒ½æµ‹è¯•<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="http://todoing.github.io/blog" rel="noopener noreferrer" target="_blank" aria-label="blog" class="nav-link"><span class="icon iconfont icon-editor"></span>blog<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><form class="search-box" role="search"><input type="search" placeholder="æœç´¢" autocomplete="off" spellcheck="false" value><!----></form><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#å‰ç«¯å·¥ç¨‹åŒ–å¯¼å›¾" class="router-link-active router-link-exact-active nav-link sidebar-link sidebar-heading" aria-label="å‰ç«¯å·¥ç¨‹åŒ–å¯¼å›¾"><!---->å‰ç«¯å·¥ç¨‹åŒ–å¯¼å›¾<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#æ„å»ºå·¥å…·" class="router-link-active router-link-exact-active nav-link sidebar-link sidebar-heading" aria-label="æ„å»ºå·¥å…·"><!---->æ„å»ºå·¥å…·<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#webpack" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Webpack"><!---->Webpack<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#plugin" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Plugin"><!---->Plugin<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#loader" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Loader"><!---->Loader<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#webpack5-æ¨¡å—è”é‚¦" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Webpack5 æ¨¡å—è”é‚¦"><!---->Webpack5 æ¨¡å—è”é‚¦<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#vite" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Vite"><!---->Vite<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#babel" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Babel"><!---->Babel<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#gulp" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Gulp"><!---->Gulp<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#è„šæ‰‹æ¶" class="router-link-active router-link-exact-active nav-link sidebar-link sidebar-heading" aria-label="è„šæ‰‹æ¶"><!---->è„šæ‰‹æ¶<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#æ‰‹å†™ä¸€ä¸ª-mini-ç‰ˆçš„è„šæ‰‹æ¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ‰‹å†™ä¸€ä¸ª mini ç‰ˆçš„è„šæ‰‹æ¶"><!---->æ‰‹å†™ä¸€ä¸ª mini ç‰ˆçš„è„šæ‰‹æ¶<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#é…ç½®è„šæ‰‹æ¶å…¥å£æ–‡ä»¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é…ç½®è„šæ‰‹æ¶å…¥å£æ–‡ä»¶"><!---->é…ç½®è„šæ‰‹æ¶å…¥å£æ–‡ä»¶<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#npm-link-åˆ°å…¨å±€" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="npm link åˆ°å…¨å±€"><!---->npm link åˆ°å…¨å±€<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#å®‰è£…è„šæ‰‹æ¶æ‰€éœ€çš„å·¥å…·" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å®‰è£…è„šæ‰‹æ¶æ‰€éœ€çš„å·¥å…·"><!---->å®‰è£…è„šæ‰‹æ¶æ‰€éœ€çš„å·¥å…·<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#commander-è‡ªå®šä¹‰å‘½ä»¤è¡Œå·¥å…·" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="commander è‡ªå®šä¹‰å‘½ä»¤è¡Œå·¥å…·"><!---->commander è‡ªå®šä¹‰å‘½ä»¤è¡Œå·¥å…·<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#inquirer-å‘½ä»¤è¡Œäº¤äº’å·¥å…·" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="inquirer å‘½ä»¤è¡Œäº¤äº’å·¥å…·"><!---->inquirer å‘½ä»¤è¡Œäº¤äº’å·¥å…·<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#åˆ›å»ºcreate-js" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åˆ›å»ºcreate.js"><!---->åˆ›å»ºcreate.js<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#åˆ›å»ºask-js" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åˆ›å»ºask.js"><!---->åˆ›å»ºask.js<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#åˆ›å»ºgenerator-js" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åˆ›å»ºgenerator.js"><!---->åˆ›å»ºgenerator.js<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#åˆ›å»ºhttp-js" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åˆ›å»ºhttp.js"><!---->åˆ›å»ºhttp.js<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#è„šæ‰‹æ¶æ•ˆæœæ¼”ç¤º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è„šæ‰‹æ¶æ•ˆæœæ¼”ç¤º"><!---->è„šæ‰‹æ¶æ•ˆæœæ¼”ç¤º<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#è„šæ‰‹æ¶å‘å¸ƒåˆ°-npm-åº“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è„šæ‰‹æ¶å‘å¸ƒåˆ° npm åº“"><!---->è„šæ‰‹æ¶å‘å¸ƒåˆ° npm åº“<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#æ€§èƒ½åˆ†æä¸ä¼˜åŒ–" class="router-link-active router-link-exact-active nav-link sidebar-link sidebar-heading" aria-label="æ€§èƒ½åˆ†æä¸ä¼˜åŒ–"><!---->æ€§èƒ½åˆ†æä¸ä¼˜åŒ–<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#lighthouse-å·¥å…·" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Lighthouse å·¥å…·"><!---->Lighthouse å·¥å…·<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#web-vitals-å®˜æ–¹æ ‡å‡†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Web-vitals å®˜æ–¹æ ‡å‡†"><!---->Web-vitals å®˜æ–¹æ ‡å‡†<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#performance-å·¥å…·" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Performance å·¥å…·"><!---->Performance å·¥å…·<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#æ€§èƒ½ç›‘æ§" class="router-link-active router-link-exact-active nav-link sidebar-link sidebar-heading" aria-label="æ€§èƒ½ç›‘æ§"><!---->æ€§èƒ½ç›‘æ§<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#æ€§èƒ½æŒ‡æ ‡çš„è®¡ç®—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ€§èƒ½æŒ‡æ ‡çš„è®¡ç®—"><!---->æ€§èƒ½æŒ‡æ ‡çš„è®¡ç®—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#performance-timing" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="performance.timing"><!---->performance.timing<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#ç™½å±æ—¶é—´-fp" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç™½å±æ—¶é—´ FP"><!---->ç™½å±æ—¶é—´ FP<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#é¦–æ¬¡å†…å®¹ç»˜åˆ¶æ—¶é—´-fcp" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é¦–æ¬¡å†…å®¹ç»˜åˆ¶æ—¶é—´ FCP"><!---->é¦–æ¬¡å†…å®¹ç»˜åˆ¶æ—¶é—´ FCP<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#æœ€å¤§å†…å®¹ç»˜åˆ¶æ—¶é—´-lcp" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æœ€å¤§å†…å®¹ç»˜åˆ¶æ—¶é—´ LCP"><!---->æœ€å¤§å†…å®¹ç»˜åˆ¶æ—¶é—´ LCP<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#ç´¯ç§¯å¸ƒå±€åç§»å€¼-cls" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç´¯ç§¯å¸ƒå±€åç§»å€¼ CLS"><!---->ç´¯ç§¯å¸ƒå±€åç§»å€¼ CLS<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#é¦–å­—èŠ‚æ—¶é—´-ttfb" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é¦–å­—èŠ‚æ—¶é—´ TTFB"><!---->é¦–å­—èŠ‚æ—¶é—´ TTFB<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ-fid" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ FID"><!---->é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ FID<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#é¦–é¡µåŠ è½½æ—¶é—´" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é¦–é¡µåŠ è½½æ—¶é—´"><!---->é¦–é¡µåŠ è½½æ—¶é—´<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#é¦–å±åŠ è½½æ—¶é—´" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é¦–å±åŠ è½½æ—¶é—´"><!---->é¦–å±åŠ è½½æ—¶é—´<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#dom-æ¸²æŸ“æ—¶é—´å’Œ-window-onload-æ—¶é—´" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="DOM æ¸²æŸ“æ—¶é—´å’Œ window.onload æ—¶é—´"><!---->DOM æ¸²æŸ“æ—¶é—´å’Œ window.onload æ—¶é—´<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#è®¡ç®—èµ„æºçš„ç¼“å­˜å‘½ä¸­ç‡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è®¡ç®—èµ„æºçš„ç¼“å­˜å‘½ä¸­ç‡"><!---->è®¡ç®—èµ„æºçš„ç¼“å­˜å‘½ä¸­ç‡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#æ€§èƒ½æ•°æ®ä¸ŠæŠ¥" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ€§èƒ½æ•°æ®ä¸ŠæŠ¥"><!---->æ€§èƒ½æ•°æ®ä¸ŠæŠ¥<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#å†…å­˜åˆ†æä¸ä¼˜åŒ–" class="router-link-active router-link-exact-active nav-link sidebar-link sidebar-heading" aria-label="å†…å­˜åˆ†æä¸ä¼˜åŒ–"><!---->å†…å­˜åˆ†æä¸ä¼˜åŒ–<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#memory-å·¥å…·" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Memory å·¥å…·"><!---->Memory å·¥å…·<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#å†…å­˜åˆ†æçš„å…³é”®ç‚¹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å†…å­˜åˆ†æçš„å…³é”®ç‚¹"><!---->å†…å­˜åˆ†æçš„å…³é”®ç‚¹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#å†…å­˜æ³„éœ²çš„æƒ…å†µ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å†…å­˜æ³„éœ²çš„æƒ…å†µ"><!---->å†…å­˜æ³„éœ²çš„æƒ…å†µ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#å†…å­˜åˆ†ææ€»ç»“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å†…å­˜åˆ†ææ€»ç»“"><!---->å†…å­˜åˆ†ææ€»ç»“<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#é¡¹ç›®ä¼˜åŒ–æ€»ç»“" class="router-link-active router-link-exact-active nav-link sidebar-link sidebar-heading" aria-label="é¡¹ç›®ä¼˜åŒ–æ€»ç»“"><!---->é¡¹ç›®ä¼˜åŒ–æ€»ç»“<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#ç»å…¸-é›…è™å†›è§„" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç»å…¸ï¼šé›…è™å†›è§„"><!---->ç»å…¸ï¼šé›…è™å†›è§„<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#ä¼˜åŒ–å»ºè®®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¼˜åŒ–å»ºè®®"><!---->ä¼˜åŒ–å»ºè®®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#æ€§èƒ½åˆ†ææ€»ç»“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ€§èƒ½åˆ†ææ€»ç»“"><!---->æ€§èƒ½åˆ†ææ€»ç»“<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#å‰ç«¯ç›‘æ§" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å‰ç«¯ç›‘æ§"><!---->å‰ç«¯ç›‘æ§<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#ç»„ä»¶åº“" class="router-link-active router-link-exact-active nav-link sidebar-link sidebar-heading" aria-label="ç»„ä»¶åº“"><!---->ç»„ä»¶åº“<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#æ€»ç»“" class="router-link-active router-link-exact-active nav-link sidebar-link sidebar-heading" aria-label="æ€»ç»“"><!---->æ€»ç»“<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->å·¥ç¨‹åŒ–</h1><div class="page-info"><!----><span class="words-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 16596 å­—</span><meta property="wordCount" content="16596"></span><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 55 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT55M"></span><span aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><ul class="tags-wrapper"><li><span class="tag tag5" role>å¼•ç”¨æ–‡ç« </span></li></ul><meta property="keywords" content="å¼•ç”¨æ–‡ç« "></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#å‰ç«¯å·¥ç¨‹åŒ–å¯¼å›¾" class="router-link-active router-link-exact-active toc-link level2">å‰ç«¯å·¥ç¨‹åŒ–å¯¼å›¾</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#æ„å»ºå·¥å…·" class="router-link-active router-link-exact-active toc-link level2">æ„å»ºå·¥å…·</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#webpack" class="router-link-active router-link-exact-active toc-link level3">Webpack</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#plugin" class="router-link-active router-link-exact-active toc-link level3">Plugin</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#loader" class="router-link-active router-link-exact-active toc-link level3">Loader</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#webpack5-æ¨¡å—è”é‚¦" class="router-link-active router-link-exact-active toc-link level3">Webpack5 æ¨¡å—è”é‚¦</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#vite" class="router-link-active router-link-exact-active toc-link level3">Vite</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#babel" class="router-link-active router-link-exact-active toc-link level3">Babel</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#gulp" class="router-link-active router-link-exact-active toc-link level3">Gulp</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#è„šæ‰‹æ¶" class="router-link-active router-link-exact-active toc-link level2">è„šæ‰‹æ¶</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#æ‰‹å†™ä¸€ä¸ª-mini-ç‰ˆçš„è„šæ‰‹æ¶" class="router-link-active router-link-exact-active toc-link level3">æ‰‹å†™ä¸€ä¸ª mini ç‰ˆçš„è„šæ‰‹æ¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#é…ç½®è„šæ‰‹æ¶å…¥å£æ–‡ä»¶" class="router-link-active router-link-exact-active toc-link level3">é…ç½®è„šæ‰‹æ¶å…¥å£æ–‡ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#npm-link-åˆ°å…¨å±€" class="router-link-active router-link-exact-active toc-link level3">npm link åˆ°å…¨å±€</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#å®‰è£…è„šæ‰‹æ¶æ‰€éœ€çš„å·¥å…·" class="router-link-active router-link-exact-active toc-link level3">å®‰è£…è„šæ‰‹æ¶æ‰€éœ€çš„å·¥å…·</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#commander-è‡ªå®šä¹‰å‘½ä»¤è¡Œå·¥å…·" class="router-link-active router-link-exact-active toc-link level3">commander è‡ªå®šä¹‰å‘½ä»¤è¡Œå·¥å…·</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#inquirer-å‘½ä»¤è¡Œäº¤äº’å·¥å…·" class="router-link-active router-link-exact-active toc-link level3">inquirer å‘½ä»¤è¡Œäº¤äº’å·¥å…·</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#åˆ›å»ºcreate-js" class="router-link-active router-link-exact-active toc-link level3">åˆ›å»ºcreate.js</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#åˆ›å»ºask-js" class="router-link-active router-link-exact-active toc-link level3">åˆ›å»ºask.js</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#åˆ›å»ºgenerator-js" class="router-link-active router-link-exact-active toc-link level3">åˆ›å»ºgenerator.js</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#åˆ›å»ºhttp-js" class="router-link-active router-link-exact-active toc-link level3">åˆ›å»ºhttp.js</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#è„šæ‰‹æ¶æ•ˆæœæ¼”ç¤º" class="router-link-active router-link-exact-active toc-link level3">è„šæ‰‹æ¶æ•ˆæœæ¼”ç¤º</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#è„šæ‰‹æ¶å‘å¸ƒåˆ°-npm-åº“" class="router-link-active router-link-exact-active toc-link level3">è„šæ‰‹æ¶å‘å¸ƒåˆ° npm åº“</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#æ€§èƒ½åˆ†æä¸ä¼˜åŒ–" class="router-link-active router-link-exact-active toc-link level2">æ€§èƒ½åˆ†æä¸ä¼˜åŒ–</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#lighthouse-å·¥å…·" class="router-link-active router-link-exact-active toc-link level3">Lighthouse å·¥å…·</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#web-vitals-å®˜æ–¹æ ‡å‡†" class="router-link-active router-link-exact-active toc-link level3">Web-vitals å®˜æ–¹æ ‡å‡†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#performance-å·¥å…·" class="router-link-active router-link-exact-active toc-link level3">Performance å·¥å…·</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#æ€§èƒ½ç›‘æ§" class="router-link-active router-link-exact-active toc-link level2">æ€§èƒ½ç›‘æ§</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#æ€§èƒ½æŒ‡æ ‡çš„è®¡ç®—" class="router-link-active router-link-exact-active toc-link level3">æ€§èƒ½æŒ‡æ ‡çš„è®¡ç®—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#performance-timing" class="router-link-active router-link-exact-active toc-link level3">performance.timing</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#ç™½å±æ—¶é—´-fp" class="router-link-active router-link-exact-active toc-link level3">ç™½å±æ—¶é—´ FP</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#é¦–æ¬¡å†…å®¹ç»˜åˆ¶æ—¶é—´-fcp" class="router-link-active router-link-exact-active toc-link level3">é¦–æ¬¡å†…å®¹ç»˜åˆ¶æ—¶é—´ FCP</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#æœ€å¤§å†…å®¹ç»˜åˆ¶æ—¶é—´-lcp" class="router-link-active router-link-exact-active toc-link level3">æœ€å¤§å†…å®¹ç»˜åˆ¶æ—¶é—´ LCP</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#ç´¯ç§¯å¸ƒå±€åç§»å€¼-cls" class="router-link-active router-link-exact-active toc-link level3">ç´¯ç§¯å¸ƒå±€åç§»å€¼ CLS</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#é¦–å­—èŠ‚æ—¶é—´-ttfb" class="router-link-active router-link-exact-active toc-link level3">é¦–å­—èŠ‚æ—¶é—´ TTFB</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ-fid" class="router-link-active router-link-exact-active toc-link level3">é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ FID</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#é¦–é¡µåŠ è½½æ—¶é—´" class="router-link-active router-link-exact-active toc-link level3">é¦–é¡µåŠ è½½æ—¶é—´</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#é¦–å±åŠ è½½æ—¶é—´" class="router-link-active router-link-exact-active toc-link level3">é¦–å±åŠ è½½æ—¶é—´</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#dom-æ¸²æŸ“æ—¶é—´å’Œ-window-onload-æ—¶é—´" class="router-link-active router-link-exact-active toc-link level3">DOM æ¸²æŸ“æ—¶é—´å’Œ window.onload æ—¶é—´</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#è®¡ç®—èµ„æºçš„ç¼“å­˜å‘½ä¸­ç‡" class="router-link-active router-link-exact-active toc-link level3">è®¡ç®—èµ„æºçš„ç¼“å­˜å‘½ä¸­ç‡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#æ€§èƒ½æ•°æ®ä¸ŠæŠ¥" class="router-link-active router-link-exact-active toc-link level3">æ€§èƒ½æ•°æ®ä¸ŠæŠ¥</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#å†…å­˜åˆ†æä¸ä¼˜åŒ–" class="router-link-active router-link-exact-active toc-link level2">å†…å­˜åˆ†æä¸ä¼˜åŒ–</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#memory-å·¥å…·" class="router-link-active router-link-exact-active toc-link level3">Memory å·¥å…·</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#å†…å­˜åˆ†æçš„å…³é”®ç‚¹" class="router-link-active router-link-exact-active toc-link level3">å†…å­˜åˆ†æçš„å…³é”®ç‚¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#å†…å­˜æ³„éœ²çš„æƒ…å†µ" class="router-link-active router-link-exact-active toc-link level3">å†…å­˜æ³„éœ²çš„æƒ…å†µ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#å†…å­˜åˆ†ææ€»ç»“" class="router-link-active router-link-exact-active toc-link level3">å†…å­˜åˆ†ææ€»ç»“</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#é¡¹ç›®ä¼˜åŒ–æ€»ç»“" class="router-link-active router-link-exact-active toc-link level2">é¡¹ç›®ä¼˜åŒ–æ€»ç»“</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#ç»å…¸-é›…è™å†›è§„" class="router-link-active router-link-exact-active toc-link level3">ç»å…¸ï¼šé›…è™å†›è§„</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#ä¼˜åŒ–å»ºè®®" class="router-link-active router-link-exact-active toc-link level3">ä¼˜åŒ–å»ºè®®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#æ€§èƒ½åˆ†ææ€»ç»“" class="router-link-active router-link-exact-active toc-link level3">æ€§èƒ½åˆ†ææ€»ç»“</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#å‰ç«¯ç›‘æ§" class="router-link-active router-link-exact-active toc-link level3">å‰ç«¯ç›‘æ§</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#ç»„ä»¶åº“" class="router-link-active router-link-exact-active toc-link level2">ç»„ä»¶åº“</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/coding/frontend/summary/3.%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87/#æ€»ç»“" class="router-link-active router-link-exact-active toc-link level2">æ€»ç»“</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><p>å¼•ç”¨äº<a href="https://juejin.cn/post/7146976516692410376" target="_blank" rel="noopener noreferrer">æ˜é‡‘-æµ·é˜”_å¤©ç©º<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="å‰ç«¯å·¥ç¨‹åŒ–å¯¼å›¾" tabindex="-1"><a class="header-anchor" href="#å‰ç«¯å·¥ç¨‹åŒ–å¯¼å›¾" aria-hidden="true">#</a> å‰ç«¯å·¥ç¨‹åŒ–å¯¼å›¾</h2><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ca0fcaed7ef445ae868656e9581dd348~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="å‰ç«¯å·¥ç¨‹åŒ–.png"></p><h2 id="æ„å»ºå·¥å…·" tabindex="-1"><a class="header-anchor" href="#æ„å»ºå·¥å…·" aria-hidden="true">#</a> æ„å»ºå·¥å…·</h2><h3 id="webpack" tabindex="-1"><a class="header-anchor" href="#webpack" aria-hidden="true">#</a> Webpack</h3><p><code>Webpack</code>æ˜¯å‰ç«¯æœ€å¸¸ç”¨çš„æ„å»ºå·¥å…·ï¼Œé‡è¦ç¨‹åº¦æ— éœ€å¤šè¨€</p><p>ä¹‹å‰çœ‹è¿‡å¾ˆå¤šå…³äº Webpack çš„æ–‡ç« ï¼Œæ€»æ˜¯æ„Ÿè§‰äº‘é‡Œé›¾é‡Œï¼Œç°åœ¨æ¢ä¸€ç§æ–¹å¼ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥è§£å¯†å®ƒï¼Œå°è¯•æ‰“å¼€è¿™ä¸ª<code>ç›²ç›’</code></p><h4 id="æ‰‹å†™ä¸€ä¸ª-mini-ç‰ˆçš„-webpack" tabindex="-1"><a class="header-anchor" href="#æ‰‹å†™ä¸€ä¸ª-mini-ç‰ˆçš„-webpack" aria-hidden="true">#</a> æ‰‹å†™ä¸€ä¸ª mini ç‰ˆçš„ Webpack</h4><p>åˆ«æ‹…å¿ƒ</p><p>æˆ‘ä»¬ä¸éœ€è¦å»æŒæ¡å…·ä½“çš„å®ç°ç»†èŠ‚ï¼Œè€Œæ˜¯é€šè¿‡è¿™ä¸ªæ¡ˆä¾‹ï¼Œäº†è§£ webpack çš„æ•´ä½“æ‰“åŒ…æµç¨‹ï¼Œæ˜ç™½è¿™ä¸ªè¿‡ç¨‹ä¸­åšäº†å“ªäº›äº‹æƒ…ï¼Œæœ€ç»ˆè¾“å‡ºäº†ä»€ä¹ˆç»“æœå³å¯</p><h5 id="åˆ›å»ºminipack-js" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºminipack-js" aria-hidden="true">#</a> <strong>åˆ›å»º<code>minipack.js</code></strong></h5><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">path</span> <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// babylonè§£æjsè¯­æ³•ï¼Œç”Ÿäº§AST è¯­æ³•æ ‘</span>
<span class="token comment">// astå°†jsä»£ç è½¬åŒ–ä¸ºä¸€ç§JSONæ•°æ®ç»“æ„</span>
<span class="token keyword">const</span> <span class="token constant">babylon</span> <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;babylon&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// babel-traverseæ˜¯ä¸€ä¸ªå¯¹astè¿›è¡Œéå†çš„å·¥å…·, å¯¹astè¿›è¡Œæ›¿æ¢</span>
<span class="token keyword">const</span> <span class="token constant">traverse</span> <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;babel-traverse&#39;</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token keyword">default</span><span class="token punctuation">;</span>
<span class="token comment">// å°†es6 es7 ç­‰é«˜çº§çš„è¯­æ³•è½¬åŒ–ä¸ºes5çš„è¯­æ³•</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> transformFromAst <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;babel-core&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ¯ä¸€ä¸ªjsæ–‡ä»¶ï¼Œå¯¹åº”ä¸€ä¸ªid</span>
let <span class="token constant">ID</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token comment">// filenameå‚æ•°ä¸ºæ–‡ä»¶è·¯å¾„, è¯»å–å†…å®¹å¹¶æå–å®ƒçš„ä¾èµ–å…³ç³»</span>
<span class="token keyword">function</span> <span class="token function-definition function">createAsset</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token constant">content</span> <span class="token operator">=</span> fs<span class="token operator">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;utf-8&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// è·å–è¯¥æ–‡ä»¶å¯¹åº”çš„ast æŠ½è±¡è¯­æ³•æ ‘</span>
  <span class="token keyword">const</span> <span class="token constant">ast</span> <span class="token operator">=</span> babylon<span class="token operator">.</span><span class="token function">parse</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    sourceType<span class="token punctuation">:</span> <span class="token string single-quoted-string">&#39;module&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// dependenciesä¿å­˜æ‰€ä¾èµ–çš„æ¨¡å—çš„ç›¸å¯¹è·¯å¾„</span>
  <span class="token keyword">const</span> <span class="token constant">dependencies</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">// é€šè¿‡æŸ¥æ‰¾importèŠ‚ç‚¹ï¼Œæ‰¾åˆ°è¯¥æ–‡ä»¶çš„ä¾èµ–å…³ç³»</span>
  <span class="token comment">// å› ä¸ºé¡¹ç›®ä¸­æˆ‘ä»¬éƒ½æ˜¯é€šè¿‡ import å¼•å…¥å…¶ä»–æ–‡ä»¶çš„ï¼Œæ‰¾åˆ°äº†importèŠ‚ç‚¹ï¼Œå°±æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶å¼•ç”¨äº†å“ªäº›æ–‡ä»¶</span>
  <span class="token function">traverse</span><span class="token punctuation">(</span>ast<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    ImportDeclaration<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> node <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// æŸ¥æ‰¾importèŠ‚ç‚¹</span>
      dependencies<span class="token operator">.</span><span class="token function">push</span><span class="token punctuation">(</span>node<span class="token operator">.</span>source<span class="token operator">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// é€šè¿‡é€’å¢è®¡æ•°å™¨ï¼Œä¸ºæ­¤æ¨¡å—åˆ†é…å”¯ä¸€æ ‡è¯†ç¬¦, ç”¨äºç¼“å­˜å·²è§£æè¿‡çš„æ–‡ä»¶</span>
  <span class="token keyword">const</span> <span class="token constant">id</span> <span class="token operator">=</span> <span class="token constant">ID</span><span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token comment">// è¯¥`presets`é€‰é¡¹æ˜¯ä¸€ç»„è§„åˆ™ï¼Œå‘Šè¯‰`babel`å¦‚ä½•ä¼ è¾“æˆ‘ä»¬çš„ä»£ç .</span>
  <span class="token comment">// ç”¨`babel-preset-env`å°†ä»£ç è½¬æ¢ä¸ºæµè§ˆå™¨å¯ä»¥è¿è¡Œçš„ä¸œè¥¿.</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> code <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">transformFromAst</span><span class="token punctuation">(</span>ast<span class="token punctuation">,</span> <span class="token constant">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    presets<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;env&#39;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// è¿”å›æ­¤æ¨¡å—çš„ç›¸å…³ä¿¡æ¯</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    id<span class="token punctuation">,</span> <span class="token comment">// æ–‡ä»¶idï¼ˆå”¯ä¸€ï¼‰</span>
    filename<span class="token punctuation">,</span> <span class="token comment">// æ–‡ä»¶è·¯å¾„</span>
    dependencies<span class="token punctuation">,</span> <span class="token comment">// æ–‡ä»¶çš„ä¾èµ–å…³ç³»</span>
    code <span class="token comment">// æ–‡ä»¶çš„ä»£ç </span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// æˆ‘ä»¬å°†æå–å®ƒçš„æ¯ä¸€ä¸ªä¾èµ–æ–‡ä»¶çš„ä¾èµ–å…³ç³»ï¼Œå¾ªç¯ä¸‹å»ï¼šæ‰¾åˆ°å¯¹åº”è¿™ä¸ªé¡¹ç›®çš„`ä¾èµ–å›¾`</span>
<span class="token keyword">function</span> <span class="token function-definition function">createGraph</span><span class="token punctuation">(</span>entry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å¾—åˆ°å…¥å£æ–‡ä»¶çš„ä¾èµ–å…³ç³»</span>
  <span class="token keyword">const</span> <span class="token constant">mainAsset</span> <span class="token operator">=</span> <span class="token function">createAsset</span><span class="token punctuation">(</span>entry<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token constant">queue</span> <span class="token operator">=</span> <span class="token punctuation">[</span>mainAsset<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> asset of queue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    asset<span class="token operator">.</span>mapping <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å–è¿™ä¸ªæ¨¡å—æ‰€åœ¨çš„ç›®å½•</span>
    <span class="token keyword">const</span> <span class="token constant">dirname</span> <span class="token operator">=</span> path<span class="token operator">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>asset<span class="token operator">.</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
    asset<span class="token operator">.</span>dependencies<span class="token operator">.</span><span class="token keyword">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>relativePath<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// é€šè¿‡å°†ç›¸å¯¹è·¯å¾„ä¸çˆ¶èµ„æºç›®å½•çš„è·¯å¾„è¿æ¥,å°†ç›¸å¯¹è·¯å¾„è½¬å˜ä¸ºç»å¯¹è·¯å¾„</span>
      <span class="token comment">// æ¯ä¸ªæ–‡ä»¶çš„ç»å¯¹è·¯å¾„æ˜¯å›ºå®šã€å”¯ä¸€çš„</span>
      <span class="token keyword">const</span> <span class="token constant">absolutePath</span> <span class="token operator">=</span> path<span class="token operator">.</span><span class="token function">join</span><span class="token punctuation">(</span>dirname<span class="token punctuation">,</span> relativePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// é€’å½’è§£æå…¶ä¸­æ‰€å¼•å…¥çš„å…¶ä»–èµ„æº</span>
      <span class="token keyword">const</span> <span class="token constant">child</span> <span class="token operator">=</span> <span class="token function">createAsset</span><span class="token punctuation">(</span>absolutePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
      asset<span class="token operator">.</span>mapping<span class="token punctuation">[</span>relativePath<span class="token punctuation">]</span> <span class="token operator">=</span> child<span class="token operator">.</span>id<span class="token punctuation">;</span>
      <span class="token comment">// å°†`child`æ¨å…¥é˜Ÿåˆ—, é€šè¿‡é€’å½’å®ç°äº†è¿™æ ·å®ƒçš„ä¾èµ–å…³ç³»è§£æ</span>
      queue<span class="token operator">.</span><span class="token function">push</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// queueè¿™å°±æ˜¯æœ€ç»ˆçš„ä¾èµ–å…³ç³»å›¾è°±</span>
  <span class="token keyword">return</span> queue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// è‡ªå®šä¹‰å®ç°äº†require æ–¹æ³•ï¼Œæ‰¾åˆ°å¯¼å‡ºå˜é‡çš„å¼•ç”¨é€»è¾‘</span>
<span class="token keyword">function</span> <span class="token function-definition function">bundle</span><span class="token punctuation">(</span>graph<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  let modules <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;&#39;</span><span class="token punctuation">;</span>
  graph<span class="token operator">.</span><span class="token keyword">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>mod<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    modules <span class="token operator">+=</span> <span class="token string backtick-quoted-string">`${mod.id}: [
      function (require, module, exports) { ${mod.code} },
      ${JSON.stringify(mod.mapping)},
    ],`</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token constant">result</span> <span class="token operator">=</span> <span class="token string backtick-quoted-string">`
    (function(modules) {
      function require(id) {
        const [fn, mapping] = modules[id];
        function localRequire(name) {
          return require(mapping[name]);
        }
        const module = { exports : {} };
        fn(localRequire, module, module.exports);
        return module.exports;
      }
      require(0);
    })({${modules}})
  `</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// â¤ï¸ é¡¹ç›®çš„å…¥å£æ–‡ä»¶</span>
<span class="token keyword">const</span> <span class="token constant">graph</span> <span class="token operator">=</span> <span class="token function">createGraph</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;./example/entry.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">result</span> <span class="token operator">=</span> <span class="token function">bundle</span><span class="token punctuation">(</span>graph<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// â¬…ï¸ åˆ›å»ºdistç›®å½•ï¼Œå°†æ‰“åŒ…çš„å†…å®¹å†™å…¥main.jsä¸­</span>
fs<span class="token operator">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;dist&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span>
    fs<span class="token operator">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;dist/main.js&#39;</span><span class="token punctuation">,</span> result<span class="token punctuation">,</span> <span class="token punctuation">(</span>err1<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>err1<span class="token punctuation">)</span> console<span class="token operator">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;æ‰“åŒ…æˆåŠŸ&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ³¨</strong>ï¼š<code>miniç‰ˆçš„Webpack</code>æœªæ¶‰åŠ loader å’Œ plugin ç­‰å¤æ‚åŠŸèƒ½ï¼Œåªæ˜¯ä¸€ä¸ªéå¸¸ç®€åŒ–çš„ä¾‹å­</p><h5 id="mini-ç‰ˆçš„-webpack-æ‰“åŒ…æµç¨‹" tabindex="-1"><a class="header-anchor" href="#mini-ç‰ˆçš„-webpack-æ‰“åŒ…æµç¨‹" aria-hidden="true">#</a> mini ç‰ˆçš„ webpack æ‰“åŒ…æµç¨‹</h5><p>1ï¼‰ä»å…¥å£æ–‡ä»¶å¼€å§‹è§£æ 2ï¼‰æŸ¥æ‰¾å…¥å£æ–‡ä»¶å¼•å…¥äº†å“ªäº› js æ–‡ä»¶ï¼Œæ‰¾åˆ°ä¾èµ–å…³ç³» 3ï¼‰é€’å½’éå†å¼•å…¥çš„å…¶ä»– jsï¼Œç”Ÿæˆæœ€ç»ˆçš„ä¾èµ–å…³ç³»å›¾è°± 4ï¼‰åŒæ—¶å°† ES6 è¯­æ³•è½¬åŒ–æˆ ES5 5ï¼‰æœ€ç»ˆç”Ÿæˆä¸€ä¸ªå¯ä»¥åœ¨æµè§ˆå™¨åŠ è½½æ‰§è¡Œçš„ js æ–‡ä»¶</p><h5 id="åˆ›å»ºæµ‹è¯•ç›®å½•-example" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºæµ‹è¯•ç›®å½•-example" aria-hidden="true">#</a> åˆ›å»ºæµ‹è¯•ç›®å½• example</h5><p>åœ¨ç›®å½•ä¸‹åˆ›å»ºä»¥ä¸‹ 4 ä¸ªæ–‡ä»¶</p><p><strong>1ï¼‰åˆ›å»ºå…¥å£æ–‡ä»¶<code>entry.js</code></strong></p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code>import message from &#39;./message.js&#39;;
// å°†messageçš„å†…å®¹æ˜¾ç¤ºåˆ°é¡µé¢ä¸­
<span class="token key attr-name">let p</span> <span class="token punctuation">=</span> <span class="token value attr-value">document.createElement(&#39;p&#39;);</span>
<span class="token key attr-name">p.innerHTML</span> <span class="token punctuation">=</span> <span class="token value attr-value">message;</span>
document.body.appendChild(p);

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2ï¼‰åˆ›å»º<code>message.js</code></strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> name <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./name.js&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3ï¼‰åˆ›å»º<code>name.js</code></strong></p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token key attr-name">export const name</span> <span class="token punctuation">=</span> <span class="token value attr-value">&#39;Webpack&#39;;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>4ï¼‰åˆ›å»º<code>index.html</code></strong></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Webpack App<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- å¼•å…¥æ‰“åŒ…åçš„main.js --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./dist/main.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>5ï¼‰ æ‰§è¡Œæ‰“åŒ…</strong></p><p>è¿è¡Œ<code>node minipack.js</code>ï¼Œdist ç›®å½•ä¸‹ç”Ÿæˆ main.js</p><p><strong>6ï¼‰ æµè§ˆå™¨æ‰“å¼€ index.html</strong></p><p>é¡µé¢ä¸Šæ˜¾ç¤º<code>hello Webpack!</code></p><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fxy-sea%2Fblog%2Ftree%2Fdev%2Fmini-webpack" target="_blank" rel="noopener noreferrer">mini-webpack çš„ github æºç åœ°å€<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h4 id="åˆ†ææ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#åˆ†ææ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶" aria-hidden="true">#</a> åˆ†ææ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶</h4><p><strong>åˆ†æ<code>dist/main.js</code></strong></p><h5 id="æ–‡ä»¶å†…å®¹" tabindex="-1"><a class="header-anchor" href="#æ–‡ä»¶å†…å®¹" aria-hidden="true">#</a> æ–‡ä»¶å†…å®¹</h5><p>1ï¼‰æ–‡ä»¶é‡Œæ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°</p><p>2ï¼‰è¯¥å‡½æ•°æ¥æ”¶çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æœ‰ 3 ä¸ªå±æ€§ <code>0</code> ä»£è¡¨<code>entry.js</code>; <code>1</code> ä»£è¡¨<code>message.js</code>; <code>2</code> ä»£è¡¨<code>name.js</code></p><p><strong>dist/main.js ä»£ç </strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// æ–‡ä»¶é‡Œæ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">modules</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>fn<span class="token punctuation">,</span> mapping<span class="token punctuation">]</span> <span class="token operator">=</span> modules<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">localRequire</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// â¬…ï¸ ç¬¬å››æ­¥ è·³è½¬åˆ°è¿™é‡Œ æ­¤æ—¶mapping[name] = 1ï¼Œç»§ç»­æ‰§è¡Œrequire(1)</span>
      <span class="token comment">// â¬…ï¸ ç¬¬å…­æ­¥ åˆè·³è½¬åˆ°è¿™é‡Œ æ­¤æ—¶mapping[name] = 2ï¼Œç»§ç»­æ‰§è¡Œrequire(2)</span>
      <span class="token keyword">return</span> <span class="token function">require</span><span class="token punctuation">(</span>mapping<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// åˆ›å»ºmoduleå¯¹è±¡</span>
    <span class="token keyword">const</span> module <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">exports</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// â¬…ï¸ ç¬¬äºŒæ­¥ æ‰§è¡Œfn</span>
    <span class="token function">fn</span><span class="token punctuation">(</span>localRequire<span class="token punctuation">,</span> module<span class="token punctuation">,</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// â¬…ï¸ ç¬¬ä¸€æ­¥ æ‰§è¡Œrequire(0)</span>
  <span class="token function">require</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ç«‹å³æ‰§è¡Œå‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æœ‰3ä¸ªå±æ€§</span>
  <span class="token comment">// 0 ä»£è¡¨entry.js;</span>
  <span class="token comment">// 1 ä»£è¡¨message.js</span>
  <span class="token comment">// 2 ä»£è¡¨name.js</span>
  <span class="token number">0</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">require<span class="token punctuation">,</span> module<span class="token punctuation">,</span> exports</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
      <span class="token comment">// â¬…ï¸ ç¬¬ä¸‰æ­¥ è·³è½¬åˆ°è¿™é‡Œ ç»§ç»­æ‰§è¡Œrequire(&#39;./message.js&#39;)</span>
      <span class="token keyword">var</span> _message <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./message.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// â¬…ï¸ ç¬¬ä¹æ­¥ è·³åˆ°è¿™é‡Œ æ­¤æ—¶_messageä¸º {default: &#39;hello Webpack!&#39;}</span>
      <span class="token keyword">var</span> _message2 <span class="token operator">=</span> <span class="token function">_interopRequireDefault</span><span class="token punctuation">(</span>_message<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">function</span> <span class="token function">_interopRequireDefault</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> obj <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>__esModule <span class="token operator">?</span> obj <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> obj <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">var</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;p&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// â¬…ï¸ æœ€åä¸€æ­¥ å°†_message2.default: &#39;hello Webpack!&#39;å†™åˆ°pæ ‡ç­¾ä¸­</span>
      p<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> _message2<span class="token punctuation">.</span>default<span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token string-property property">&quot;./message.js&quot;</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">require<span class="token punctuation">,</span> module<span class="token punctuation">,</span> exports</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>

      Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>exports<span class="token punctuation">,</span> <span class="token string">&quot;__esModule&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// â¬…ï¸ ç¬¬äº”æ­¥ è·³è½¬åˆ°è¿™é‡Œ ç»§ç»­æ‰§è¡Œrequire(&#39;./name.js&#39;)</span>
      <span class="token keyword">var</span> _name <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./name.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// â¬…ï¸ ç¬¬å…«æ­¥ è·³åˆ°è¿™é‡Œ æ­¤æ—¶_nameä¸º{name: &#39;Webpack&#39;}, åœ¨exportså¯¹è±¡ä¸Šè®¾ç½®defaultå±æ€§ï¼Œå€¼ä¸º&#39;hello Webpack!&#39;</span>
      exports<span class="token punctuation">.</span>default <span class="token operator">=</span> <span class="token string">&quot;hello &quot;</span> <span class="token operator">+</span> _name<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot;!&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token string-property property">&quot;./name.js&quot;</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token number">2</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">require<span class="token punctuation">,</span> module<span class="token punctuation">,</span> exports</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>

      Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>exports<span class="token punctuation">,</span> <span class="token string">&quot;__esModule&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// â¬…ï¸ ç¬¬ä¸ƒæ­¥ è·³åˆ°è¿™é‡Œ åœ¨ä¼ å…¥çš„exportså¯¹è±¡ä¸Šæ·»åŠ nameå±æ€§ï¼Œå€¼ä¸º&#39;Webpack&#39;</span>
      <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token punctuation">(</span>exports<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="â¬…ï¸-åˆ†ææ–‡ä»¶çš„æ‰§è¡Œè¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#â¬…ï¸-åˆ†ææ–‡ä»¶çš„æ‰§è¡Œè¿‡ç¨‹" aria-hidden="true">#</a> â¬…ï¸ åˆ†ææ–‡ä»¶çš„æ‰§è¡Œè¿‡ç¨‹</h5><p>1ï¼‰æ•´ä½“å¤§è‡´åˆ†ä¸º 10 æ­¥ï¼Œç¬¬ä¸€æ­¥ä»<code>require(0)</code>å¼€å§‹æ‰§è¡Œï¼Œè°ƒç”¨å†…ç½®çš„è‡ªå®šä¹‰ require å‡½æ•°ï¼Œè·³è½¬åˆ°ç¬¬äºŒæ­¥ï¼Œæ‰§è¡Œ<code>fn</code>å‡½æ•°</p><p>2ï¼‰æ‰§è¡Œç¬¬ä¸‰æ­¥<code>require(&#39;./message.js&#39;)</code>ï¼Œç»§ç»­è·³è½¬åˆ°ç¬¬å››æ­¥ <code>require(mapping[&#39;./message.js&#39;])</code>, æœ€ç»ˆè½¬åŒ–ä¸º<code>require(1)</code></p><p>3ï¼‰ç»§ç»­æ‰§è¡Œ<code>require(1)</code>ï¼Œè·å–<code>modules[1]</code>ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œ<code>message.js</code>çš„å†…å®¹</p><p>4ï¼‰ç¬¬äº”æ­¥<code>require(&#39;./name.js&#39;)</code>ï¼Œæœ€ç»ˆè½¬åŒ–ä¸º<code>require(2)</code>ï¼Œæ‰§è¡Œ<code>name.js</code>çš„å†…å®¹</p><p>5ï¼‰é€šè¿‡é€’å½’è°ƒç”¨ï¼Œå°†ä»£ç ä¸­å¯¼å‡ºçš„å±æ€§ï¼Œæ”¾åˆ°<code>exports</code>å¯¹è±¡ä¸­ï¼Œä¸€å±‚å±‚å¯¼å‡ºåˆ°æœ€å¤–å±‚</p><p>6ï¼‰æœ€ç»ˆé€šè¿‡<code>_message2.default</code>è·å–å¯¼å‡ºçš„å€¼ï¼Œé¡µé¢æ˜¾ç¤º<code>hello Webpack!</code></p><h4 id="webpack-çš„æ‰“åŒ…æµç¨‹" tabindex="-1"><a class="header-anchor" href="#webpack-çš„æ‰“åŒ…æµç¨‹" aria-hidden="true">#</a> Webpack çš„æ‰“åŒ…æµç¨‹</h4><p><strong>æ€»ç»“ä¸€ä¸‹ webpack å®Œæ•´çš„æ‰“åŒ…æµç¨‹</strong></p><p>1ï¼‰webpack ä»é¡¹ç›®çš„<code>entry</code>å…¥å£æ–‡ä»¶å¼€å§‹é€’å½’åˆ†æï¼Œè°ƒç”¨æ‰€æœ‰é…ç½®çš„ <code>loader</code>å¯¹æ¨¡å—è¿›è¡Œç¼–è¯‘</p><p>å› ä¸º webpack é»˜è®¤åªèƒ½è¯†åˆ« js ä»£ç ï¼Œæ‰€ä»¥å¦‚ css æ–‡ä»¶ã€.vue ç»“å°¾çš„æ–‡ä»¶ï¼Œå¿…é¡»è¦é€šè¿‡å¯¹åº”çš„ loader è§£ææˆ js ä»£ç åï¼Œwebpack æ‰èƒ½è¯†åˆ«</p><p>2ï¼‰åˆ©ç”¨<code>babel(babylon)</code>å°† js ä»£ç è½¬åŒ–ä¸º<code>astæŠ½è±¡è¯­æ³•æ ‘</code>ï¼Œç„¶åé€šè¿‡<code>babel-traverse</code>å¯¹ ast è¿›è¡Œéå†</p><p>3ï¼‰éå†çš„ç›®çš„æ‰¾åˆ°æ–‡ä»¶çš„<code>importå¼•ç”¨èŠ‚ç‚¹</code></p><p>å› ä¸ºç°åœ¨æˆ‘ä»¬å¼•å…¥æ–‡ä»¶éƒ½æ˜¯é€šè¿‡ import çš„æ–¹å¼å¼•å…¥ï¼Œæ‰€ä»¥æ‰¾åˆ°äº† import èŠ‚ç‚¹ï¼Œå°±æ‰¾åˆ°äº†æ–‡ä»¶çš„ä¾èµ–å…³ç³»</p><p>4ï¼‰åŒæ—¶æ¯ä¸ªæ¨¡å—ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ idï¼Œå¹¶å°†è§£æè¿‡çš„<code>æ¨¡å—ç¼“å­˜</code>èµ·æ¥ï¼Œå¦‚æœå…¶ä»–åœ°æ–¹ä¹Ÿå¼•å…¥è¯¥æ¨¡å—ï¼Œå°±æ— éœ€é‡æ–°è§£æï¼Œæœ€åæ ¹æ®ä¾èµ–å…³ç³»ç”Ÿæˆä¾èµ–å›¾è°±</p><p>5ï¼‰é€’å½’éå†æ‰€æœ‰ä¾èµ–å›¾è°±çš„æ¨¡å—ï¼Œç»„è£…æˆä¸€ä¸ªä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„ <code>Chunk(å—)</code></p><p>6ï¼‰æœ€åå°†ç”Ÿæˆçš„æ–‡ä»¶è¾“å‡ºåˆ° <code>output</code> çš„ç›®å½•ä¸­</p><h4 id="çƒ­æ›´æ–°åŸç†" tabindex="-1"><a class="header-anchor" href="#çƒ­æ›´æ–°åŸç†" aria-hidden="true">#</a> çƒ­æ›´æ–°åŸç†</h4><p><strong>ä»€ä¹ˆæ˜¯ webpack çƒ­æ›´æ–°ï¼Ÿ</strong></p><p>å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä»£ç å‘ç”Ÿå˜åŠ¨åï¼Œwebpack ä¼šé‡æ–°ç¼–è¯‘ï¼Œç¼–è¯‘åæµè§ˆå™¨æ›¿æ¢ä¿®æ”¹çš„æ¨¡å—ï¼Œå±€éƒ¨æ›´æ–°ï¼Œæ— éœ€åˆ·æ–°æ•´ä¸ªé¡µé¢</p><p><strong>å¥½å¤„</strong>ï¼šèŠ‚çœå¼€å‘æ—¶é—´ã€æå‡å¼€å‘ä½“éªŒ</p><p><strong>çƒ­æ›´æ–°åŸç†</strong></p><p>ä¸»è¦æ˜¯é€šè¿‡<code>websocket</code>å®ç°ï¼Œå»ºç«‹æœ¬åœ°æœåŠ¡å’Œæµè§ˆå™¨çš„åŒå‘é€šä¿¡ã€‚å½“ä»£ç å˜åŒ–ï¼Œé‡æ–°ç¼–è¯‘åï¼Œé€šçŸ¥æµè§ˆå™¨è¯·æ±‚æ›´æ–°çš„æ¨¡å—ï¼Œæ›¿æ¢åŸæœ‰çš„æ¨¡å—</p><p>1ï¼‰ é€šè¿‡<code>webpack-dev-server</code>å¼€å¯<code>serveræœåŠ¡</code>ï¼Œæœ¬åœ° server å¯åŠ¨ä¹‹åï¼Œå†å»å¯åŠ¨ websocket æœåŠ¡ï¼Œå»ºç«‹æœ¬åœ°æœåŠ¡å’Œæµè§ˆå™¨çš„åŒå‘é€šä¿¡</p><p>2ï¼‰ webpack æ¯æ¬¡ç¼–è¯‘åï¼Œä¼šç”Ÿæˆä¸€ä¸ª<code>Hashå€¼</code>ï¼ŒHash ä»£è¡¨æ¯ä¸€æ¬¡ç¼–è¯‘çš„æ ‡è¯†ã€‚æœ¬æ¬¡è¾“å‡ºçš„ Hash å€¼ä¼šç¼–è¯‘æ–°ç”Ÿæˆçš„æ–‡ä»¶æ ‡è¯†ï¼Œè¢«ä½œä¸ºä¸‹æ¬¡çƒ­æ›´æ–°çš„æ ‡è¯†</p><p>3ï¼‰webpack<code>ç›‘å¬æ–‡ä»¶å˜åŒ–</code>ï¼ˆä¸»è¦æ˜¯é€šè¿‡æ–‡ä»¶çš„ç”Ÿæˆæ—¶é—´åˆ¤æ–­æ˜¯å¦æœ‰å˜åŒ–ï¼‰ï¼Œå½“æ–‡ä»¶å˜åŒ–åï¼Œé‡æ–°ç¼–è¯‘</p><p>4ï¼‰ç¼–è¯‘ç»“æŸåï¼Œé€šçŸ¥æµè§ˆå™¨è¯·æ±‚å˜åŒ–çš„èµ„æºï¼ŒåŒæ—¶å°†æ–°ç”Ÿæˆçš„ hash å€¼ä¼ ç»™æµè§ˆå™¨ï¼Œç”¨äºä¸‹æ¬¡çƒ­æ›´æ–°ä½¿ç”¨</p><p>5ï¼‰æµè§ˆå™¨æ‹¿åˆ°æ›´æ–°åçš„æ¨¡å—åï¼Œç”¨æ–°æ¨¡å—æ›¿æ¢æ‰æ—§çš„æ¨¡å—ï¼Œä»è€Œå®ç°äº†å±€éƒ¨åˆ·æ–°</p><p><a href="https://juejin.cn/post/6844904008432222215" target="_blank" rel="noopener noreferrer">è½»æ¾ç†è§£ webpack çƒ­æ›´æ–°åŸç†<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://link.juejin.cn/?target=http%3A%2F%2Fwebpack.wuhaolin.cn" target="_blank" rel="noopener noreferrer">æ·±å…¥æµ…å‡º Webpack<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://juejin.cn/post/6844904079219490830" target="_blank" rel="noopener noreferrer">å¸¦ä½ æ·±åº¦è§£é” Webpack ç³»åˆ—(åŸºç¡€ç¯‡)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="plugin" tabindex="-1"><a class="header-anchor" href="#plugin" aria-hidden="true">#</a> Plugin</h3><p><strong>ä½œç”¨ï¼šæ‰©å±• webpack åŠŸèƒ½</strong></p><p><strong>å·¥ä½œåŸç†</strong></p><p>webpack é€šè¿‡å†…éƒ¨çš„äº‹ä»¶æµæœºåˆ¶ä¿è¯äº†æ’ä»¶çš„æœ‰åºæ€§ï¼Œåº•å±‚æ˜¯åˆ©ç”¨<code>å‘å¸ƒè®¢é˜…æ¨¡å¼</code>ï¼Œwebpack åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¼šå¹¿æ’­äº‹ä»¶ï¼Œæ’ä»¶åªéœ€è¦ç›‘å¬å®ƒæ‰€å…³å¿ƒçš„äº‹ä»¶ï¼Œåœ¨ç‰¹å®šçš„æ—¶æœºå¯¹èµ„æºåšå¤„ç†</p><h4 id="æ‰‹å†™ä¸€ä¸ª-plugin-æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#æ‰‹å†™ä¸€ä¸ª-plugin-æ’ä»¶" aria-hidden="true">#</a> æ‰‹å†™ä¸€ä¸ª Plugin æ’ä»¶</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// è‡ªå®šä¹‰ä¸€ä¸ªåä¸ºMyPluginæ’ä»¶ï¼Œè¯¥æ’ä»¶åœ¨æ‰“åŒ…å®Œæˆåï¼Œåœ¨æ§åˆ¶å°è¾“å‡º&quot;æ‰“åŒ…å·²å®Œæˆ&quot;</span>
<span class="token keyword">class</span> <span class="token class-name">MyPlugin</span> <span class="token punctuation">{</span>
  <span class="token comment">// åŸå‹ä¸Šéœ€è¦å®šä¹‰apply çš„æ–¹æ³•</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// é€šè¿‡compilerè·å–webpackå†…éƒ¨çš„é’©å­</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>done<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">&quot;My Plugin&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰“åŒ…å·²å®Œæˆ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// åˆ†ä¸ºåŒæ­¥å’Œå¼‚æ­¥çš„é’©å­ï¼Œå¼‚æ­¥é’©å­å¿…é¡»æ‰§è¡Œå¯¹åº”çš„å›è°ƒ</span>
      <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> MyPlugin<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åœ¨-vue-é¡¹ç›®ä¸­ä½¿ç”¨è‡ªå®šä¹‰æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#åœ¨-vue-é¡¹ç›®ä¸­ä½¿ç”¨è‡ªå®šä¹‰æ’ä»¶" aria-hidden="true">#</a> åœ¨ vue é¡¹ç›®ä¸­ä½¿ç”¨è‡ªå®šä¹‰æ’ä»¶</h4><p>1ï¼‰åœ¨<code>vue.config.js</code>å¼•å…¥è¯¥æ’ä»¶</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>const MyPlugin = require(&#39;./MyPlugin.js&#39;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2ï¼‰åœ¨<code>configureWebpack</code>çš„ plugins åˆ—è¡¨ä¸­æ³¨å†Œè¯¥æ’ä»¶</p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token key attr-name">module.exports</span> <span class="token punctuation">=</span> <span class="token value attr-value">{</span>
  configureWebpack: {
    plugins: [new MyPlugin()]
  }
};

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3ï¼‰æ‰§è¡Œé¡¹ç›®çš„æ‰“åŒ…å‘½ä»¤ å½“é¡¹ç›®æ‰“åŒ…æˆåŠŸåï¼Œä¼šåœ¨æ§åˆ¶å°è¾“å‡ºï¼š<code>æ‰“åŒ…å·²å®Œæˆ</code></p><h4 id="plugin-çš„ç»„æˆéƒ¨åˆ†" tabindex="-1"><a class="header-anchor" href="#plugin-çš„ç»„æˆéƒ¨åˆ†" aria-hidden="true">#</a> Plugin çš„ç»„æˆéƒ¨åˆ†</h4><p>1ï¼‰Plugin çš„æœ¬è´¨æ˜¯ä¸€ä¸ª <code>node æ¨¡å—</code>ï¼Œè¿™ä¸ªæ¨¡å—å¯¼å‡ºä¸€ä¸ª JavaScript ç±»</p><p>2ï¼‰å®ƒçš„åŸå‹ä¸Šéœ€è¦å®šä¹‰ä¸€ä¸ª<code>apply</code> çš„æ–¹æ³•</p><p>3ï¼‰é€šè¿‡<code>compiler</code>è·å– webpack å†…éƒ¨çš„é’©å­ï¼Œè·å– webpack æ‰“åŒ…è¿‡ç¨‹ä¸­çš„å„ä¸ªé˜¶æ®µ</p><p>é’©å­åˆ†ä¸ºåŒæ­¥å’Œå¼‚æ­¥çš„é’©å­ï¼Œå¼‚æ­¥é’©å­å¿…é¡»æ‰§è¡Œå¯¹åº”çš„å›è°ƒ</p><p>4ï¼‰é€šè¿‡<code>compilation</code>æ“ä½œ webpack å†…éƒ¨å®ä¾‹ç‰¹å®šæ•°æ®</p><p>5ï¼‰åŠŸèƒ½å®Œæˆåï¼Œæ‰§è¡Œ webpack æä¾›çš„ cb å›è°ƒ</p><p><strong>compiler ä¸Šæš´éœ²çš„ä¸€äº›å¸¸ç”¨çš„é’©å­ç®€ä»‹</strong></p><table><thead><tr><th>é’©å­</th><th>ç±»å‹</th><th>è°ƒç”¨æ—¶æœº</th></tr></thead><tbody><tr><td>run</td><td>AsyncSeriesHook</td><td>åœ¨ç¼–è¯‘å™¨å¼€å§‹è¯»å–è®°å½•å‰æ‰§è¡Œ</td></tr><tr><td>compile</td><td>SyncHook</td><td>åœ¨ä¸€ä¸ªæ–°çš„ compilation åˆ›å»ºä¹‹å‰æ‰§è¡Œ</td></tr><tr><td>compilation</td><td>SyncHook</td><td>åœ¨ä¸€æ¬¡ compilation åˆ›å»ºåæ‰§è¡Œæ’ä»¶</td></tr><tr><td>make</td><td>AsyncParallelHook</td><td>å®Œæˆä¸€æ¬¡ç¼–è¯‘ä¹‹å‰æ‰§è¡Œ</td></tr><tr><td>emit</td><td>AsyncSeriesHook</td><td>åœ¨ç”Ÿæˆæ–‡ä»¶åˆ° output ç›®å½•ä¹‹å‰æ‰§è¡Œï¼Œå›è°ƒå‚æ•°ï¼š compilation</td></tr><tr><td>afterEmit</td><td>AsyncSeriesHook</td><td>åœ¨ç”Ÿæˆæ–‡ä»¶åˆ° output ç›®å½•ä¹‹åæ‰§è¡Œ</td></tr><tr><td>assetEmitted</td><td>AsyncSeriesHook</td><td>ç”Ÿæˆæ–‡ä»¶çš„æ—¶å€™æ‰§è¡Œï¼Œæä¾›è®¿é—®äº§å‡ºæ–‡ä»¶ä¿¡æ¯çš„å…¥å£ï¼Œå›è°ƒå‚æ•°ï¼šfileï¼Œinfo</td></tr><tr><td>done</td><td>AsyncSeriesHook</td><td>ä¸€æ¬¡ç¼–è¯‘å®Œæˆåæ‰§è¡Œï¼Œå›è°ƒå‚æ•°ï¼šstats</td></tr></tbody></table><h4 id="å¸¸ç”¨çš„-plugin-æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#å¸¸ç”¨çš„-plugin-æ’ä»¶" aria-hidden="true">#</a> å¸¸ç”¨çš„ Plugin æ’ä»¶</h4><table><thead><tr><th>æ’ä»¶åç§°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>html-webpack-plugin</td><td>ç”Ÿæˆ html æ–‡ä»¶,å¼•å…¥å…¬å…±çš„ js å’Œ css èµ„æº</td></tr><tr><td>webpack-bundle-analyzer</td><td>å¯¹æ‰“åŒ…åçš„æ–‡ä»¶è¿›è¡Œåˆ†æï¼Œç”Ÿæˆèµ„æºåˆ†æå›¾</td></tr><tr><td>terser-webpack-plugin</td><td>ä»£ç å‹ç¼©ï¼Œç§»é™¤ console.log æ‰“å°ç­‰</td></tr><tr><td>HappyPack Plugin</td><td>å¼€å¯å¤šçº¿ç¨‹æ‰“åŒ…ï¼Œæå‡æ‰“åŒ…é€Ÿåº¦</td></tr><tr><td>Dllplugin</td><td>åŠ¨æ€é“¾æ¥åº“ï¼Œå°†é¡¹ç›®ä¸­ä¾èµ–çš„ä¸‰æ–¹æ¨¡å—æŠ½ç¦»å‡ºæ¥ï¼Œå•ç‹¬æ‰“åŒ…</td></tr><tr><td>DllReferencePlugin</td><td>é…åˆ Dllpluginï¼Œé€šè¿‡ manifest.json æ˜ å°„åˆ°ç›¸å…³çš„ä¾èµ–ä¸Šå»</td></tr><tr><td>clean-webpack-plugin</td><td>æ¸…ç†ä¸Šä¸€æ¬¡é¡¹ç›®ç”Ÿæˆçš„æ–‡ä»¶</td></tr><tr><td>vue-skeleton-webpack-plugin</td><td>vue é¡¹ç›®å®ç°éª¨æ¶å±</td></tr></tbody></table><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fchampyin.com%2F2020%2F01%2F12%2F%E6%8F%AD%E7%A7%98webpack-plugin%2F" target="_blank" rel="noopener noreferrer">æ­ç§˜ webpack-plugin<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="loader" tabindex="-1"><a class="header-anchor" href="#loader" aria-hidden="true">#</a> Loader</h3><p><strong>Loader ä½œç”¨</strong></p><p>webpack åªèƒ½ç›´æ¥å¤„ç† js æ ¼å¼çš„èµ„æºï¼Œä»»ä½•é js æ–‡ä»¶éƒ½å¿…é¡»è¢«å¯¹åº”çš„<code>loader</code>å¤„ç†è½¬æ¢ä¸º js ä»£ç </p><h4 id="æ‰‹å†™ä¸€ä¸ª-loader" tabindex="-1"><a class="header-anchor" href="#æ‰‹å†™ä¸€ä¸ª-loader" aria-hidden="true">#</a> æ‰‹å†™ä¸€ä¸ª loader</h4><p><strong>ä¸€ä¸ªç®€å•çš„<code>style-loader</code></strong></p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code>// ä½œç”¨ï¼šå°†csså†…å®¹ï¼Œé€šè¿‡styleæ ‡ç­¾æ’å…¥åˆ°é¡µé¢ä¸­
// sourceä¸ºè¦å¤„ç†çš„cssæºæ–‡ä»¶
function loader(source) {
  <span class="token key attr-name">let style</span> <span class="token punctuation">=</span> <span class="token value attr-value">`</span>
    <span class="token key attr-name">let style</span> <span class="token punctuation">=</span> <span class="token value attr-value">document.createElement(&#39;style&#39;);</span>
    style.setAttribute(&quot;type&quot;, &quot;text/css&quot;);
    <span class="token key attr-name">style.innerHTML</span> <span class="token punctuation">=</span> <span class="token value attr-value">${source};</span>
    document.head.appendChild(style)`;
  return style;
}
<span class="token key attr-name">module.exports</span> <span class="token punctuation">=</span> <span class="token value attr-value">loader;</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åœ¨-vue-é¡¹ç›®ä¸­ä½¿ç”¨è‡ªå®šä¹‰-loader" tabindex="-1"><a class="header-anchor" href="#åœ¨-vue-é¡¹ç›®ä¸­ä½¿ç”¨è‡ªå®šä¹‰-loader" aria-hidden="true">#</a> åœ¨ vue é¡¹ç›®ä¸­ä½¿ç”¨è‡ªå®šä¹‰ loader</h4><p>1ï¼‰åœ¨<code>vue.config.js</code>å¼•å…¥è¯¥ loader</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>const MyStyleLoader = require(&#39;./style-loader&#39;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2ï¼‰åœ¨<code>configureWebpack</code>ä¸­æ·»åŠ é…ç½®</p><div class="language-css ext-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">module.exports =</span> <span class="token punctuation">{</span>
  <span class="token selector">configureWebpack:</span> <span class="token punctuation">{</span>
    <span class="token selector">module:</span> <span class="token punctuation">{</span>
      <span class="token selector">rules: [</span>
        <span class="token punctuation">{</span>
          // å¯¹main.cssæ–‡ä»¶ä½¿ç”¨MyStyleLoaderå¤„ç†
          <span class="token property">test</span><span class="token punctuation">:</span> /main.css/<span class="token punctuation">,</span>
          <span class="token property">loader</span><span class="token punctuation">:</span> MyStyleLoader
        <span class="token punctuation">}</span>
      ]
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3ï¼‰é¡¹ç›®é‡æ–°ç¼–è¯‘ <code>main.css</code>æ ·å¼å·²åŠ è½½åˆ°é¡µé¢ä¸­</p><h4 id="loader-çš„ç»„æˆéƒ¨åˆ†" tabindex="-1"><a class="header-anchor" href="#loader-çš„ç»„æˆéƒ¨åˆ†" aria-hidden="true">#</a> loader çš„ç»„æˆéƒ¨åˆ†</h4><p>loader çš„æœ¬è´¨æ˜¯ä¸€ä¸ª <code>node</code>æ¨¡å—ï¼Œè¯¥æ¨¡å—å¯¼å‡ºä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°æ¥æ”¶<code>source(æºæ–‡ä»¶)</code>ï¼Œè¿”å›å¤„ç†åçš„<code>source</code></p><h4 id="loader-æ‰§è¡Œé¡ºåº" tabindex="-1"><a class="header-anchor" href="#loader-æ‰§è¡Œé¡ºåº" aria-hidden="true">#</a> loader æ‰§è¡Œé¡ºåº</h4><p>ç›¸åŒä¼˜å…ˆçº§çš„ loader é“¾ï¼Œæ‰§è¡Œé¡ºåºä¸ºï¼š<code>ä»å³åˆ°å·¦ï¼Œä»ä¸‹åˆ°ä¸Š</code></p><p>å¦‚<code>use: [&#39;loader1&#39;, &#39;loader2&#39;, &#39;loader3&#39;]</code>ï¼Œæ‰§è¡Œé¡ºåºä¸º <code>loader3 â†’ loader2 â†’ loader1</code></p><h4 id="å¸¸ç”¨çš„-loader" tabindex="-1"><a class="header-anchor" href="#å¸¸ç”¨çš„-loader" aria-hidden="true">#</a> å¸¸ç”¨çš„ loader</h4><table><thead><tr><th>åç§°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>style-loader</td><td>ç”¨äºå°† css ç¼–è¯‘å®Œæˆçš„æ ·å¼ï¼ŒæŒ‚è½½åˆ°é¡µé¢ style æ ‡ç­¾ä¸Š</td></tr><tr><td>css-loader</td><td>ç”¨äºè¯†åˆ« .css æ–‡ä»¶, é¡»é…åˆ style-loader å…±åŒä½¿ç”¨</td></tr><tr><td>sass-loader/less-loader</td><td>css é¢„å¤„ç†å™¨</td></tr><tr><td>postcss-loader</td><td>ç”¨äºè¡¥å…… css æ ·å¼å„ç§æµè§ˆå™¨å†…æ ¸å‰ç¼€</td></tr><tr><td>url-loader</td><td>å¤„ç†å›¾ç‰‡ç±»å‹èµ„æºï¼Œå¯ä»¥è½¬ base64</td></tr><tr><td>vue-loader</td><td>ç”¨äºç¼–è¯‘ .vue æ–‡ä»¶</td></tr><tr><td>worker-loader</td><td>é€šè¿‡å†…è” loader çš„æ–¹å¼ä½¿ç”¨ web worker åŠŸèƒ½</td></tr><tr><td>style-resources-loader</td><td>å…¨å±€å¼•ç”¨å¯¹åº”çš„ cssï¼Œé¿å…é¡µé¢å†åˆ†åˆ«å¼•å…¥</td></tr></tbody></table><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fchampyin.com%2F2020%2F01%2F28%2F%E6%8F%AD%E7%A7%98webpack-loader%2F" target="_blank" rel="noopener noreferrer">æ­ç§˜ webpack-loader<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="webpack5-æ¨¡å—è”é‚¦" tabindex="-1"><a class="header-anchor" href="#webpack5-æ¨¡å—è”é‚¦" aria-hidden="true">#</a> Webpack5 æ¨¡å—è”é‚¦</h3><p>webpack5 <code>æ¨¡å—è”é‚¦(Module Federation)</code> ä½¿ JavaScript åº”ç”¨ï¼Œå¾—ä»¥ä»å¦ä¸€ä¸ª JavaScript åº”ç”¨ä¸­åŠ¨æ€çš„åŠ è½½ä»£ç ï¼Œå®ç°å…±äº«ä¾èµ–ï¼Œç”¨äºå‰ç«¯çš„å¾®æœåŠ¡åŒ–</p><p>æ¯”å¦‚<code>é¡¹ç›®A</code>å’Œ<code>é¡¹ç›®B</code>ï¼Œå…¬ç”¨<code>é¡¹ç›®C</code>ç»„ä»¶ï¼Œä»¥å¾€è¿™ç§æƒ…å†µï¼Œå¯ä»¥å°† C ç»„ä»¶å‘å¸ƒåˆ° npm ä¸Šï¼Œç„¶å A å’Œ B å†å…·ä½“å¼•å…¥ã€‚å½“ C ç»„ä»¶å‘ç”Ÿå˜åŒ–åï¼Œéœ€è¦é‡æ–°å‘å¸ƒåˆ° npm ä¸Šï¼ŒA å’Œ B ä¹Ÿéœ€è¦é‡æ–°ä¸‹è½½å®‰è£…</p><p>ä½¿ç”¨æ¨¡å—è”é‚¦åï¼Œå¯ä»¥åœ¨è¿œç¨‹æ¨¡å—çš„ Webpack é…ç½®ä¸­ï¼Œå°† C ç»„ä»¶æ¨¡å—æš´éœ²å‡ºå»ï¼Œé¡¹ç›® A å’Œé¡¹ç›® B å°±å¯ä»¥è¿œç¨‹è¿›è¡Œä¾èµ–å¼•ç”¨ã€‚å½“ C ç»„ä»¶å‘ç”Ÿå˜åŒ–åï¼ŒA å’Œ B æ— éœ€é‡æ–°å¼•ç”¨</p><p>æ¨¡å—è”é‚¦åˆ©ç”¨ webpack5 å†…ç½®çš„<code>ModuleFederationPlugin</code>æ’ä»¶ï¼Œå®ç°äº†é¡¹ç›®ä¸­é—´ç›¸äº’å¼•ç”¨çš„æŒ‰éœ€çƒ­æ’æ‹”</p><h4 id="webpack-modulefederationplugin" tabindex="-1"><a class="header-anchor" href="#webpack-modulefederationplugin" aria-hidden="true">#</a> <strong>Webpack ModuleFederationPlugin</strong></h4><p><strong>é‡è¦å‚æ•°è¯´æ˜</strong></p><p>1ï¼‰<code>name</code> å½“å‰åº”ç”¨åç§°ï¼Œéœ€è¦å…¨å±€å”¯ä¸€</p><p>2ï¼‰<code>remotes</code> å¯ä»¥å°†å…¶ä»–é¡¹ç›®çš„ <code>name</code> æ˜ å°„åˆ°å½“å‰é¡¹ç›®ä¸­</p><p>3ï¼‰<code>exposes</code> è¡¨ç¤ºå¯¼å‡ºçš„æ¨¡å—ï¼Œåªæœ‰åœ¨æ­¤ç”³æ˜çš„æ¨¡å—æ‰å¯ä»¥ä½œä¸ºè¿œç¨‹ä¾èµ–è¢«ä½¿ç”¨</p><p>4ï¼‰<code>shared</code> æ˜¯éå¸¸é‡è¦çš„å‚æ•°ï¼Œåˆ¶å®šäº†è¿™ä¸ªå‚æ•°ï¼Œå¯ä»¥è®©è¿œç¨‹åŠ è½½çš„æ¨¡å—å¯¹åº”ä¾èµ–ï¼Œæ”¹ä¸ºä½¿ç”¨æœ¬åœ°é¡¹ç›®çš„ä¾èµ–ï¼Œå¦‚ React æˆ– ReactDOM</p><p><strong>é…ç½®ç¤ºä¾‹</strong></p><div class="language-css ext-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">new ModuleFederationPlugin(</span><span class="token punctuation">{</span>
     <span class="token selector">name: &quot;app_1&quot;,
     library:</span> <span class="token punctuation">{</span> <span class="token property">type</span><span class="token punctuation">:</span> <span class="token string">&quot;var&quot;</span><span class="token punctuation">,</span> <span class="token property">name</span><span class="token punctuation">:</span> <span class="token string">&quot;app_1&quot;</span> <span class="token punctuation">}</span><span class="token selector">,
     filename: &quot;remoteEntry.js&quot;,
     remotes:</span> <span class="token punctuation">{</span>
        <span class="token property">app_02</span><span class="token punctuation">:</span> <span class="token string">&#39;app_02&#39;</span><span class="token punctuation">,</span>
        <span class="token property">app_03</span><span class="token punctuation">:</span> <span class="token string">&#39;app_03&#39;</span><span class="token punctuation">,</span>
     <span class="token punctuation">}</span><span class="token selector">,
     exposes:</span> <span class="token punctuation">{</span>
        <span class="token property">antd</span><span class="token punctuation">:</span> <span class="token string">&#39;./src/antd&#39;</span><span class="token punctuation">,</span>
        <span class="token property">button</span><span class="token punctuation">:</span> <span class="token string">&#39;./src/button&#39;</span><span class="token punctuation">,</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token property">shared</span><span class="token punctuation">:</span> [<span class="token string">&#39;react&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;react-dom&#39;</span>]<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F115403616" target="_blank" rel="noopener noreferrer">ç²¾è¯»ã€ŠWebpack5 æ–°ç‰¹æ€§ - æ¨¡å—è”é‚¦ã€‹<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://juejin.cn/post/6844904187147321352" target="_blank" rel="noopener noreferrer">Webpack 5 æ¨¡å—è”é‚¦å¼•å‘å¾®å‰ç«¯çš„é©å‘½ï¼Ÿ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://link.juejin.cn/?target=https%3A%2F%2Fblog.csdn.net%2Fsendudu%2Farticle%2Fdetails%2F110232830" target="_blank" rel="noopener noreferrer">Webpack 5 å‡çº§å†…å®¹ï¼ˆäºŒï¼šæ¨¡å—è”é‚¦ï¼‰<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="vite" tabindex="-1"><a class="header-anchor" href="#vite" aria-hidden="true">#</a> Vite</h3><p>Vite è¢«èª‰ä¸º<code>ä¸‹ä¸€ä»£çš„æ„å»ºå·¥å…·</code></p><p>ä¸Šæ‰‹äº†å‡ ä¸ªé¡¹ç›®åï¼Œæœç„¶åä¸è™šä¼ ï¼Œçƒ­æ›´æ–°é€Ÿåº¦çœŸçš„æ˜¯<code>å¿«çš„é£èµ·ï¼</code></p><h4 id="vite-åŸç†" tabindex="-1"><a class="header-anchor" href="#vite-åŸç†" aria-hidden="true">#</a> Vite åŸç†</h4><p>1ï¼‰Vite åˆ©ç”¨æµè§ˆå™¨æ”¯æŒåŸç”Ÿçš„<code>es module</code>æ¨¡å—ï¼Œå¼€å‘æ—¶è·³è¿‡æ‰“åŒ…çš„è¿‡ç¨‹ï¼Œæå‡ç¼–è¯‘æ•ˆç‡</p><p>2ï¼‰å½“é€šè¿‡ import åŠ è½½èµ„æºæ—¶ï¼Œæµè§ˆå™¨ä¼šå‘å‡º HTTP è¯·æ±‚å¯¹åº”çš„æ–‡ä»¶ï¼Œ<code>Viteæ‹¦æˆªåˆ°è¯¥è¯·æ±‚</code>ï¼Œè¿”å›å¯¹åº”çš„æ¨¡å—æ–‡ä»¶</p><p><strong>es module ç®€å•ç¤ºä¾‹</strong></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>import { a } from &#39;./a.js&#39;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>1ï¼‰å½“å£°æ˜ä¸€ä¸ª script æ ‡ç­¾ç±»å‹ä¸º <code>module</code> æ—¶ï¼Œæµè§ˆå™¨å°†å¯¹å…¶å†…éƒ¨çš„ import å¼•ç”¨å‘èµ· HTTP è¯·æ±‚ï¼Œè·å–æ¨¡å—å†…å®¹</p><p>2ï¼‰æµè§ˆå™¨å°†å‘èµ·ä¸€ä¸ªå¯¹ <code>HOST/a.js</code> çš„ HTTP è¯·æ±‚ï¼Œè·å–åˆ°å†…å®¹ä¹‹åå†æ‰§è¡Œ</p><p><strong>Vite çš„é™åˆ¶</strong></p><p>Vite ä¸»è¦å¯¹åº”çš„åœºæ™¯æ˜¯å¼€å‘æ¨¡å¼ï¼ˆç”Ÿäº§æ¨¡å¼æ˜¯ç”¨ <code>rollup æ‰“åŒ…</code>ï¼‰</p><h4 id="vite-çƒ­æ›´æ–°é€Ÿåº¦" tabindex="-1"><a class="header-anchor" href="#vite-çƒ­æ›´æ–°é€Ÿåº¦" aria-hidden="true">#</a> Vite çƒ­æ›´æ–°é€Ÿåº¦</h4><p><strong>Vite çƒ­æ›´æ–°çš„é€Ÿåº¦ä¸ä¼šéšç€æ¨¡å—å¢å¤šè€Œå˜æ…¢</strong></p><p>1ï¼‰Webpack çš„çƒ­æ›´æ–°åŸç†ï¼šä¸€æ—¦æŸä¸ªä¾èµ–ï¼ˆæ¯”å¦‚ä¸Šé¢çš„ a.jsï¼‰æ”¹å˜ï¼Œå°±å°†è¿™ä¸ªä¾èµ–æ‰€å¤„çš„ æ•´ä¸ª<code>module</code> æ›´æ–°ï¼Œå¹¶å°†æ–°çš„ module å‘é€ç»™æµè§ˆå™¨é‡æ–°æ‰§è¡Œ</p><p>è¯•æƒ³å¦‚æœä¾èµ–è¶Šæ¥è¶Šå¤šï¼Œå°±ç®—åªä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶ï¼Œçƒ­æ›´æ–°çš„é€Ÿåº¦ä¼šè¶Šæ¥è¶Šæ…¢</p><p>2ï¼‰Vite çš„çƒ­æ›´æ–°åŸç†ï¼šå¦‚æœ a.js å‘ç”Ÿäº†æ”¹å˜ï¼Œåªä¼šé‡æ–°ç¼–è¯‘è¿™ä¸ªæ–‡ä»¶ aï¼Œè€Œå…¶ä½™æ–‡ä»¶éƒ½æ— éœ€é‡æ–°ç¼–è¯‘</p><p>æ‰€ä»¥ç†è®ºä¸Š Vite çƒ­æ›´æ–°çš„é€Ÿåº¦ä¸ä¼šéšç€æ–‡ä»¶å¢åŠ è€Œå˜æ…¢</p><h4 id="æ‰‹å†™-vite" tabindex="-1"><a class="header-anchor" href="#æ‰‹å†™-vite" aria-hidden="true">#</a> æ‰‹å†™ vite</h4><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1at4y1a7zi%3Ffrom%3Dsearch%26seid%3D13340994191382185418%26spm_id_from%3D333.337.0.0" target="_blank" rel="noopener noreferrer">æ¨èç å³°çš„ä»é›¶æ‰‹å†™ vite è§†é¢‘<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><strong>vite çš„å®ç°æµç¨‹</strong></p><p>1ï¼‰é€šè¿‡<code>koa</code>å¼€å¯ä¸€ä¸ªæœåŠ¡ï¼Œè·å–è¯·æ±‚çš„é™æ€æ–‡ä»¶å†…å®¹</p><p>2ï¼‰é€šè¿‡<code>es-module-lexer</code> è§£æ <code>ast</code> æ‹¿åˆ° import çš„å†…å®¹</p><p>3ï¼‰åˆ¤æ–­ import å¯¼å…¥æ¨¡å—æ˜¯å¦ä¸º<code>ä¸‰æ–¹æ¨¡å—</code>ï¼Œæ˜¯çš„è¯ï¼Œè¿”å›<code>node_module</code>ä¸‹çš„æ¨¡å—ï¼Œ å¦‚ <code>import vue</code> è¿”å› <code>import &#39;./@modules/vue&#39;</code></p><p>4ï¼‰å¦‚æœæ˜¯<code>.vueæ–‡ä»¶</code>ï¼Œvite æ‹¦æˆªå¯¹åº”çš„è¯·æ±‚ï¼Œè¯»å–.vue æ–‡ä»¶å†…å®¹è¿›è¡Œç¼–è¯‘ï¼Œé€šè¿‡<code>compileTemplate</code> ç¼–è¯‘æ¨¡æ¿ï¼Œå°†<code>templateè½¬åŒ–ä¸ºrenderå‡½æ•°</code></p><p>5ï¼‰é€šè¿‡ babel parse å¯¹ js è¿›è¡Œç¼–è¯‘ï¼Œæœ€ç»ˆè¿”å›ç¼–è¯‘åçš„ js æ–‡ä»¶</p><p><a href="https://juejin.cn/post/7021306258057592862" target="_blank" rel="noopener noreferrer">å°¤é›¨æºªå‡ å¹´å‰å¼€å‘çš„â€œç©å…· viteâ€<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://juejin.cn/post/6844904146915573773" target="_blank" rel="noopener noreferrer">Vite åŸç†æµ…æ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="babel" tabindex="-1"><a class="header-anchor" href="#babel" aria-hidden="true">#</a> Babel</h3><h4 id="ast-æŠ½è±¡è¯­æ³•æ ‘" tabindex="-1"><a class="header-anchor" href="#ast-æŠ½è±¡è¯­æ³•æ ‘" aria-hidden="true">#</a> AST æŠ½è±¡è¯­æ³•æ ‘</h4><p>è¿™é‡Œå…ˆèŠä¸€ä¸‹<code>ASTæŠ½è±¡è¯­æ³•æ ‘</code>ï¼Œå› ä¸º<code>AST</code>æ˜¯<code>babel</code>çš„æ ¸å¿ƒ</p><p><strong>ä»€ä¹ˆæ˜¯ AST ï¼Ÿ</strong></p><p><code>AST</code>æ˜¯æºä»£ç çš„æŠ½è±¡è¯­æ³•ç»“æ„çš„æ ‘çŠ¶è¡¨ç°å½¢å¼</p><p><strong>åœ¨ js ä¸–ç•Œä¸­ï¼Œå¯ä»¥è®¤ä¸º<code>æŠ½è±¡è¯­æ³•æ ‘(AST)æ˜¯æœ€åº•å±‚</code></strong></p><p><strong>ä¸€ä¸ªç®€å•çš„ AST ç¤ºä¾‹</strong></p><p><code>let a = 1</code>ï¼Œè½¬åŒ–æˆ AST çš„ç»“æœ</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Program&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;end&quot;</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
  <span class="token property">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;VariableDeclaration&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end&quot;</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
      <span class="token property">&quot;declarations&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;VariableDeclarator&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
          <span class="token property">&quot;end&quot;</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
          <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
            <span class="token property">&quot;end&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;a&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;init&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Literal&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
            <span class="token property">&quot;end&quot;</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
            <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">&quot;raw&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;kind&quot;</span><span class="token operator">:</span> <span class="token string">&quot;let&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sourceType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>AST æŠ½è±¡è¯­æ³•æ ‘çš„ç»“æ„ï¼Œå¯ä»¥é€šè¿‡<a href="https://link.juejin.cn/?target=https%3A%2F%2Fastexplorer.net%2F%23%2F" target="_blank" rel="noopener noreferrer">AST ç½‘ç«™<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>åœ¨çº¿è¾“å…¥ä»£ç æŸ¥çœ‹</p><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fsegmentfault.com%2Fa%2F1190000016231512" target="_blank" rel="noopener noreferrer">AST æŠ½è±¡è¯­æ³•æ ‘â€”â€”æœ€åŸºç¡€çš„ javascript é‡ç‚¹çŸ¥è¯†ï¼Œ99%çš„äººæ ¹æœ¬ä¸äº†è§£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h4 id="babel-åŸºæœ¬åŸç†ä¸ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#babel-åŸºæœ¬åŸç†ä¸ä½œç”¨" aria-hidden="true">#</a> Babel åŸºæœ¬åŸç†ä¸ä½œç”¨</h4><p><code>Babel</code> æ˜¯ä¸€ä¸ª <code>JS ç¼–è¯‘å™¨</code>ï¼ŒæŠŠæˆ‘ä»¬çš„ä»£ç è½¬æˆæµè§ˆå™¨å¯ä»¥è¿è¡Œçš„ä»£ç </p><p><strong>ä½œç”¨</strong></p><p>babel ä¸»è¦ç”¨äºå°†æ–°ç‰ˆæœ¬çš„ä»£ç è½¬æ¢ä¸ºå‘åå…¼å®¹çš„ js è¯­æ³•(<code>Polyfill</code> æ–¹å¼)ï¼Œä»¥ä¾¿èƒ½å¤Ÿè¿è¡Œåœ¨å„ç‰ˆæœ¬çš„æµè§ˆå™¨æˆ–å…¶ä»–ç¯å¢ƒä¸­</p><p><strong>åŸºæœ¬åŸç†</strong></p><p>æ ¸å¿ƒå°±æ˜¯ <code>AST (æŠ½è±¡è¯­æ³•æ ‘)</code></p><p>é¦–å…ˆå°†æºç è½¬æˆæŠ½è±¡è¯­æ³•æ ‘ï¼Œç„¶åå¯¹è¯­æ³•æ ‘è¿›è¡Œå¤„ç†ç”Ÿæˆæ–°çš„è¯­æ³•æ ‘ï¼Œæœ€åå°†æ–°è¯­æ³•æ ‘ç”Ÿæˆæ–°çš„ JS ä»£ç </p><p><strong>Babel çš„æµç¨‹</strong></p><p><strong>3 ä¸ªé˜¶æ®µï¼š parsing (è§£æ)ã€transforming (è½¬æ¢)ã€generating (ç”Ÿæˆ)</strong></p><p>1ï¼‰é€šè¿‡<code>babylon</code>å°† js è½¬åŒ–æˆ ast (æŠ½è±¡è¯­æ³•æ ‘)</p><p>2ï¼‰é€šè¿‡<code>babel-traverse</code>æ˜¯ä¸€ä¸ªå¯¹ ast è¿›è¡Œéå†ï¼Œä½¿ç”¨ babel æ’ä»¶è½¬åŒ–æˆæ–°çš„ ast</p><p>3ï¼‰é€šè¿‡<code>babel-generator</code>å°† ast ç”Ÿæˆæ–°çš„ js ä»£ç </p><h4 id="é…ç½®å’Œä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#é…ç½®å’Œä½¿ç”¨" aria-hidden="true">#</a> é…ç½®å’Œä½¿ç”¨</h4><p><strong>1ï¼‰å•ä¸ªè½¯ä»¶åŒ…åœ¨ <code>.babelrc</code> ä¸­é…ç½®</strong></p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>.babelrc <span class="token punctuation">{</span>
  <span class="token comment">// é¢„è®¾: Babel å®˜æ–¹åšäº†ä¸€äº›é¢„è®¾çš„æ’ä»¶é›†ï¼Œç§°ä¹‹ä¸º Presetï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨å¯¹åº”çš„ Preset å°±å¯ä»¥äº†</span>
  <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   <span class="token comment">// babelå’Œwebpackç±»ä¼¼ï¼Œä¸»è¦æ˜¯é€šè¿‡pluginæ’ä»¶è¿›è¡Œä»£ç è½¬åŒ–çš„ï¼Œå¦‚æœä¸é…ç½®æ’ä»¶ï¼Œbabelä¼šå°†ä»£ç åŸæ ·è¿”å›</span>
  <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2ï¼‰vue ä¸­ï¼Œåœ¨ babel.config.js ä¸­é…ç½®</strong></p><p>é…ç½® babel-plugin-component æ’ä»¶ï¼ŒæŒ‰éœ€å¼•å…¥ elementUI</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">module</span><span class="token punctuation">.</span><span class="token keyword">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
   presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@vue/app&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// é…ç½®babel-plugin-componentæ’ä»¶</span>
   plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">[</span>
	  <span class="token string">&quot;component&quot;</span><span class="token punctuation">,</span>
	  <span class="token punctuation">{</span>
	    libraryName<span class="token operator">:</span> <span class="token string">&quot;element-ui&quot;</span><span class="token punctuation">,</span>
	    styleLibraryName<span class="token operator">:</span> <span class="token string">&quot;theme-chalk&quot;</span>
	<span class="token punctuation">}</span>
     <span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3ï¼‰é…ç½®<code>browserslist</code></strong></p><p><code>browserslist</code> ç”¨æ¥æ§åˆ¶è¦å…¼å®¹æµè§ˆå™¨ç‰ˆæœ¬ï¼Œé…ç½®çš„èŒƒå›´è¶Šå…·ä½“ï¼Œå°±å¯ä»¥æ›´ç²¾ç¡®æ§åˆ¶<code>Polyfill</code>è½¬åŒ–åçš„ä½“ç§¯å¤§å°</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;browserslist&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
   <span class="token comment">// å…¨çƒè¶…è¿‡1%äººä½¿ç”¨çš„æµè§ˆå™¨</span>
   <span class="token string">&quot;&gt; 1%&quot;</span><span class="token punctuation">,</span>
   <span class="token comment">//  æ‰€æœ‰æµè§ˆå™¨å…¼å®¹åˆ°æœ€åä¸¤ä¸ªç‰ˆæœ¬æ ¹æ®CanIUse.comè¿½è¸ªçš„ç‰ˆæœ¬</span>
   <span class="token string">&quot;last 2 versions&quot;</span><span class="token punctuation">,</span>
   <span class="token comment">// chrome ç‰ˆæœ¬å¤§äº70</span>
   <span class="token string">&quot;chrome &gt;= 70&quot;</span>
   <span class="token comment">// æ’é™¤éƒ¨åˆ†ç‰ˆæœ¬</span>
   <span class="token string">&quot;not ie &lt;= 8&quot;</span>
<span class="token punctuation">]</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¦‚ä½•å¼€å‘ä¸€ä¸ª-babel-æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•å¼€å‘ä¸€ä¸ª-babel-æ’ä»¶" aria-hidden="true">#</a> å¦‚ä½•å¼€å‘ä¸€ä¸ª babel æ’ä»¶</h4><p><strong>Babel æ’ä»¶çš„ä½œç”¨</strong></p><p>Babel æ’ä»¶æ‹…è´Ÿç€ç¼–è¯‘è¿‡ç¨‹ä¸­çš„æ ¸å¿ƒä»»åŠ¡ï¼š<code>è½¬æ¢ AST</code></p><p><strong>babel æ’ä»¶çš„åŸºæœ¬æ ¼å¼</strong></p><p>1ï¼‰ä¸€ä¸ªå‡½æ•°ï¼Œå‚æ•°æ˜¯ babelï¼Œç„¶åå°±æ˜¯è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œ<code>keyæ˜¯visitor</code>ï¼Œç„¶åé‡Œé¢çš„å¯¹è±¡æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°</p><p>2ï¼‰å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œ<code>path</code>è¡¨ç¤ºè·¯å¾„ï¼Œ<code>state</code>è¡¨ç¤ºçŠ¶æ€</p><p>3ï¼‰<code>CallExpression</code>å°±æ˜¯æˆ‘ä»¬è¦è®¿é—®çš„èŠ‚ç‚¹ï¼Œpath å‚æ•°è¡¨ç¤ºå½“å‰èŠ‚ç‚¹çš„ä½ç½®ï¼ŒåŒ…å«çš„ä¸»è¦æ˜¯å½“å‰<code>èŠ‚ç‚¹ï¼ˆnodeï¼‰</code>å†…å®¹ä»¥åŠ<code>çˆ¶èŠ‚ç‚¹ï¼ˆparentï¼‰</code>å†…å®¹</p><p><strong>æ’ä»¶çš„ç®€å•æ ¼å¼ç¤ºä¾‹</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">babel</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">let</span> t <span class="token operator">=</span> babel<span class="token punctuation">.</span>type
   <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">visitor</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">CallExression</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
           <span class="token keyword">do</span> soming
     <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä¸€ä¸ªæœ€ç®€å•çš„æ’ä»¶: <code>å°†const a è½¬åŒ–ä¸ºconst b</code></strong></p><p>åˆ›å»º babelPluginAtoB.js</p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token key attr-name">module.exports</span> <span class="token punctuation">=</span> <span class="token value attr-value">function(babel) {</span>
  <span class="token key attr-name">let t</span> <span class="token punctuation">=</span> <span class="token value attr-value">babel.types;</span>
  return {
    visitor: {
      VariableDeclarator(path, state) {
        // VariableDeclarator æ˜¯è¦æ‰¾çš„å˜é‡å£°æ˜
        <span class="token key attr-name">if (path.node.id.name</span> <span class="token punctuation">=</span><span class="token value attr-value">= &quot;a&quot;) {</span>
         // æ–¹å¼ä¸€ï¼šç›´æ¥ä¿®æ”¹name
         <span class="token key attr-name">path.node.id.name</span> <span class="token punctuation">=</span> <span class="token value attr-value">&#39;b&#39;;</span>
         // æ–¹å¼äºŒï¼šæŠŠidæ˜¯açš„astæ¢æˆbçš„ast
         <span class="token key attr-name">// path.node.id</span> <span class="token punctuation">=</span> <span class="token value attr-value">t.Identifier(&quot;b&quot;);</span>
        }
      }
    }
  };
};

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>åœ¨.babelrc ä¸­å¼•å…¥ babelPluginAtoB æ’ä»¶</strong></p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token key attr-name">const babelPluginAtoB</span> <span class="token punctuation">=</span> <span class="token value attr-value">require(&#39;./babelPluginAtoB.js&#39;);</span>
{
    &quot;plugins&quot;: [
        <span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">babelPluginAtoB</span><span class="token punctuation">]</span></span>
    ]
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç¼–å†™æµ‹è¯•ä»£ç </strong></p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token key attr-name">let a</span> <span class="token punctuation">=</span> <span class="token value attr-value">1;</span>
console.log(b);
// babelæ’ä»¶ç”Ÿæ•ˆï¼Œæ²¡æœ‰æŠ¥é”™ï¼Œæ‰“å° 1

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.ruanyifeng.com%2Fblog%2F2016%2F01%2Fbabel.html" target="_blank" rel="noopener noreferrer">Babel å…¥é—¨æ•™ç¨‹<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.babeljs.cn%2Fdocs%2F" target="_blank" rel="noopener noreferrer">Babel ä¸­æ–‡æ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://juejin.cn/post/6844904008679686152" target="_blank" rel="noopener noreferrer">ä¸å®¹é”™è¿‡çš„ Babel çŸ¥è¯†<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.jianshu.com%2Fp%2F44c0075fd043" target="_blank" rel="noopener noreferrer">å¿«é€Ÿå†™ä¸€ä¸ª babel æ’ä»¶<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="gulp" tabindex="-1"><a class="header-anchor" href="#gulp" aria-hidden="true">#</a> Gulp</h3><p><code>gulp</code> æ˜¯åŸºäº <code>node æµ</code> å®ç°çš„å‰ç«¯è‡ªåŠ¨åŒ–å¼€å‘çš„å·¥å…·</p><p><strong>é€‚ç”¨åœºæ™¯</strong></p><p>åœ¨å‰ç«¯å¼€å‘å·¥ä½œä¸­æœ‰å¾ˆå¤š<code>â€œé‡å¤å·¥ä½œâ€</code>ï¼Œæ¯”å¦‚<code>æ‰¹é‡å°†Scssæ–‡ä»¶ç¼–è¯‘ä¸ºCSSæ–‡ä»¶</code></p><p><strong>è¿™é‡Œä¸»è¦èŠä¸€ä¸‹ï¼Œåœ¨å¼€å‘çš„ç»„ä»¶åº“ä¸­å¦‚ä½•ä½¿ç”¨ gulp</strong></p><h4 id="gulp-åœ¨ç»„ä»¶åº“ä¸­çš„è¿ç”¨" tabindex="-1"><a class="header-anchor" href="#gulp-åœ¨ç»„ä»¶åº“ä¸­çš„è¿ç”¨" aria-hidden="true">#</a> Gulp åœ¨ç»„ä»¶åº“ä¸­çš„è¿ç”¨</h4><p>ä»¥<code>elementUI</code>ä¸ºä¾‹ï¼Œä¸‹è½½<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FElemeFE%2Felement" target="_blank" rel="noopener noreferrer">elementUI æºç <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>æ‰“å¼€<code>packages/theme-chalk/gulpfile.js</code></p><p><strong>è¯¥æ–‡ä»¶çš„ä½œç”¨æ˜¯å°† scss æ–‡ä»¶ç¼–è¯‘ä¸º css æ–‡ä»¶</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// å¼•å…¥gulp</span>
<span class="token comment">// seriesåˆ›å»ºä»»åŠ¡åˆ—è¡¨ï¼Œ</span>
<span class="token comment">// srcåˆ›å»ºä¸€ä¸ªæµï¼Œè¯»å–æ–‡ä»¶</span>
<span class="token comment">// dest åˆ›å»ºä¸€ä¸ªå¯¹è±¡å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿçš„æµ</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> series<span class="token punctuation">,</span> src<span class="token punctuation">,</span> dest <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gulp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// gulp-dart-sassç¼–è¯‘scssæ–‡ä»¶</span>
<span class="token keyword">const</span> sass <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gulp-dart-sass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// gulp-autoprefixer ç»™cssæ ·å¼æ·»åŠ å‰ç¼€</span>
<span class="token keyword">const</span> autoprefixer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gulp-autoprefixer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// gulp-cssmin å‹ç¼©css</span>
<span class="token keyword">const</span> cssmin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gulp-cssmin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å¤„ç†srcç›®å½•ä¸‹çš„æ‰€æœ‰scssæ–‡ä»¶ï¼Œè½¬åŒ–ä¸ºcssæ–‡ä»¶</span>
<span class="token keyword">function</span> <span class="token function">compile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token function">src</span><span class="token punctuation">(</span><span class="token string">&quot;./src/*.scss&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>sass<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> sass<span class="token punctuation">.</span>logError<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
        <span class="token comment">// ç»™cssæ ·å¼æ·»åŠ å‰ç¼€</span>
        <span class="token function">autoprefixer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">overrideBrowserslist</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;ie &gt; 9&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;last 2 versions&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token literal-property property">cascade</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span>
      <span class="token comment">// å‹ç¼©css</span>
      <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">cssmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token comment">// å°†ç¼–è¯‘å¥½çš„css è¾“å‡ºåˆ°libç›®å½•ä¸‹</span>
      <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">&quot;./lib&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// å°†src/fontsæ–‡ä»¶çš„å­—ä½“æ–‡ä»¶ copyåˆ° /lib/fontsç›®å½•ä¸‹</span>
<span class="token keyword">function</span> <span class="token function">copyfont</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">src</span><span class="token punctuation">(</span><span class="token string">&quot;./src/fonts/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">cssmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">&quot;./lib/fonts&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// seriesåˆ›å»ºä»»åŠ¡åˆ—è¡¨</span>
exports<span class="token punctuation">.</span>build <span class="token operator">=</span> <span class="token function">series</span><span class="token punctuation">(</span>compile<span class="token punctuation">,</span> copyfont<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="gulp-ç»™-elementui-å¢åŠ ä¸€é”®æ¢è‚¤åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#gulp-ç»™-elementui-å¢åŠ ä¸€é”®æ¢è‚¤åŠŸèƒ½" aria-hidden="true">#</a> Gulp ç»™ elementUI å¢åŠ ä¸€é”®æ¢è‚¤åŠŸèƒ½</h4><p><strong>æ€»ä½“æµç¨‹</strong></p><p>1ï¼‰ä½¿ç”¨<code>css var()</code>å®šä¹‰é¢œè‰²å˜é‡</p><p>2ï¼‰åˆ›å»ºä¸»é¢˜<code>theme.css</code>æ–‡ä»¶ï¼Œå­˜å‚¨æ‰€æœ‰çš„é¢œè‰²å˜é‡</p><p>3ï¼‰ä½¿ç”¨<code>gulp</code>å°†<code>theme.css</code>åˆå¹¶åˆ°<code>base.css</code>ä¸­ï¼Œè§£å†³æŒ‰éœ€å¼•å…¥çš„æƒ…å†µ</p><p>4ï¼‰ä½¿ç”¨<code>gulp</code>å°†<code>index.css</code>ä¸<code>base.css</code>åˆå¹¶ï¼Œè§£å†³å…¨å±€å¼•å…¥çš„æƒ…å†µ</p><p><strong>æ­¥éª¤ä¸€ï¼šåˆ›å»ºåŸºç¡€é¢œè‰²å˜é‡<code>theme.css</code>æ–‡ä»¶</strong></p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/52a9c3cab0544603b4a7e5bf9ceb2c20~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="theme.jpg"></p><p><strong>æ­¥éª¤äºŒï¼šä¿®æ”¹<code>packages/theme-chalk/src/common/var.scss</code>æ–‡ä»¶</strong></p><p><strong>å°†è¯¥æ–‡ä»¶çš„ä¸­å®šä¹‰çš„ scss å˜é‡ï¼Œæ›¿æ¢æˆ var()å˜é‡</strong></p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1f5f561727524921b52a52b181a6fbb0~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="var.jpg"></p><p><strong>æ­¥éª¤ä¸‰ï¼šä¿®æ”¹åçš„<code>packages/theme-chalk/gulpfile.js</code></strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> series<span class="token punctuation">,</span> src<span class="token punctuation">,</span> dest <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gulp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sass <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gulp-dart-sass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> autoprefixer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gulp-autoprefixer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> cssmin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gulp-cssmin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> concat <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gulp-concat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">compile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">src</span><span class="token punctuation">(</span><span class="token string">&quot;./src/*.scss&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>sass<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> sass<span class="token punctuation">.</span>logError<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
      <span class="token function">autoprefixer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">overrideBrowserslist</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;ie &gt; 9&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;last 2 versions&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">cascade</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">cssmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">&quot;./lib&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// å°† theme.css å’Œ lib/base.cssåˆå¹¶æˆ æœ€ç»ˆçš„ base.css</span>
<span class="token keyword">function</span> <span class="token function">compile1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">src</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;./src/theme.css&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./lib/base.css&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">&quot;base.css&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">&quot;./lib&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// å°† base.cssã€ index.css åˆå¹¶æˆ æœ€ç»ˆçš„ index.css</span>
<span class="token keyword">function</span> <span class="token function">compile2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">src</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;./lib/base.css&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./lib/index.css&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">&quot;index.css&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">&quot;./lib&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">copyfont</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">src</span><span class="token punctuation">(</span><span class="token string">&quot;./src/fonts/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">cssmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">&quot;./lib/fonts&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

exports<span class="token punctuation">.</span>build <span class="token operator">=</span> <span class="token function">series</span><span class="token punctuation">(</span>compile<span class="token punctuation">,</span> compile1<span class="token punctuation">,</span> compile2<span class="token punctuation">,</span> copyfont<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://juejin.cn/post/7136936387181281311" target="_blank" rel="noopener noreferrer">elementUI å¤šå¥—ä¸»é¢˜ä¸‹ æŒ‰éœ€å¼•å…¥å’Œå…¨å±€å¼•å…¥ çš„æ¢è‚¤æ–¹æ¡ˆ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="è„šæ‰‹æ¶" tabindex="-1"><a class="header-anchor" href="#è„šæ‰‹æ¶" aria-hidden="true">#</a> è„šæ‰‹æ¶</h2><p>è„šæ‰‹æ¶æ˜¯å¼€å‘ä¸­ç»å¸¸ä¼šä½¿ç”¨çš„å·¥å…·ï¼Œæ¯”å¦‚<code>vue-cli</code>ã€<code>create-react-app</code>ç­‰ï¼Œè¿™äº›è„šæ‰‹æ¶å¯ä»¥é€šè¿‡ç®€å•çš„å‘½ä»¤ï¼Œå¿«é€Ÿå»æ­å»ºé¡¹ç›®ï¼Œè®©æˆ‘ä»¬æ›´ä¸“æ³¨äºé¡¹ç›®çš„å¼€å‘</p><p>éšç€é¡¹ç›®çš„å¢å¤šã€äººå‘˜çš„æ‰©å±•ï¼Œå¤§å®¶å¼€å‘çš„åŸºç¡€ç»„ä»¶å’Œå…¬å…±æ–¹æ³•ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œå¸Œæœ›æŠŠè¿™äº›ç§¯ç´¯æ·»åŠ åˆ°è„šæ‰‹æ¶ä¸­ï¼Œå½“æˆé¡¹ç›®æ¨¡æ¿ç•™å­˜ä¸‹æ¥</p><p>è¿™æ ·å†åˆ›å»ºé¡¹ç›®æ—¶ï¼Œå°±ä¸ç”¨æ¯æ¬¡å»å…¶ä»–é¡¹ç›®ä¸­æ¥å› copy</p><h3 id="æ‰‹å†™ä¸€ä¸ª-mini-ç‰ˆçš„è„šæ‰‹æ¶" tabindex="-1"><a class="header-anchor" href="#æ‰‹å†™ä¸€ä¸ª-mini-ç‰ˆçš„è„šæ‰‹æ¶" aria-hidden="true">#</a> æ‰‹å†™ä¸€ä¸ª mini ç‰ˆçš„è„šæ‰‹æ¶</h3><p>ä¸‹é¢æˆ‘ä»¬ä¸€èµ·ï¼Œæ‰‹å†™ä¸€ä¸ª mini ç‰ˆçš„è„šæ‰‹æ¶</p><p>é€šè¿‡è¿™ä¸ªæ¡ˆä¾‹æ¥äº†è§£è„šæ‰‹æ¶çš„å·¥ä½œæµç¨‹ï¼Œä»¥åŠä½¿ç”¨äº†å“ªäº›å¸¸ç”¨å·¥å…·</p><p>æ–°å»ºæ–‡ä»¶å¤¹<code>my-build-cli</code>ï¼Œæ‰§è¡Œ<code>npm init -y</code></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a6e8c8fb28d445afb79e914ab8edfe67~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="init-y.png"></p><h3 id="é…ç½®è„šæ‰‹æ¶å…¥å£æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#é…ç½®è„šæ‰‹æ¶å…¥å£æ–‡ä»¶" aria-hidden="true">#</a> é…ç½®è„šæ‰‹æ¶å…¥å£æ–‡ä»¶</h3><p><strong>1ï¼‰åˆ›å»º<code>bin</code>ç›®å½•ï¼Œè¯¥ç›®å½•ä¸‹åˆ›å»º<code>www.js</code></strong></p><p><strong><code>bin/www.js</code> å†…å®¹</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token hashbang comment">#! /usr/bin/env node</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;link æˆåŠŸ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><em>æ³¨ï¼š<code>/usr/bin/env node</code> è¿™è¡Œçš„æ„æ€æ˜¯ä½¿ç”¨ node æ¥æ‰§è¡Œæ­¤æ–‡ä»¶</em></p><p><strong>2ï¼‰<code>package.json</code>ä¸­é…ç½®å…¥å£æ–‡ä»¶çš„è·¯å¾„</strong></p><div class="language-swift ext-swift line-numbers-mode"><pre class="language-swift"><code><span class="token punctuation">{</span>
  <span class="token string-literal"><span class="token string">&quot;name&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;my-build-cli&quot;</span></span><span class="token punctuation">,</span>
  <span class="token string-literal"><span class="token string">&quot;version&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;1.0.0&quot;</span></span><span class="token punctuation">,</span>
  <span class="token string-literal"><span class="token string">&quot;description&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;&quot;</span></span><span class="token punctuation">,</span>
  <span class="token string-literal"><span class="token string">&quot;bin&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;./bin/www.js&quot;</span></span><span class="token punctuation">,</span> <span class="token comment">// æ‰‹åŠ¨æ·»åŠ å…¥å£æ–‡ä»¶ä¸º ./bin/www.js</span>
  <span class="token string-literal"><span class="token string">&quot;scripts&quot;</span></span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string-literal"><span class="token string">&quot;test&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-literal"><span class="token string">&quot;keywords&quot;</span></span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-literal"><span class="token string">&quot;author&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;&quot;</span></span><span class="token punctuation">,</span>
  <span class="token string-literal"><span class="token string">&quot;license&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;ISC&quot;</span></span>
<span class="token punctuation">}</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3ï¼‰é¡¹ç›®ç›®å½•ç»“æ„</strong></p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>my<span class="token operator">-</span>build<span class="token operator">-</span>cli
â”œâ”€ bin
â”‚  â””â”€ www<span class="token punctuation">.</span>js
â””â”€ <span class="token keyword">package</span><span class="token punctuation">.</span>json

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="npm-link-åˆ°å…¨å±€" tabindex="-1"><a class="header-anchor" href="#npm-link-åˆ°å…¨å±€" aria-hidden="true">#</a> npm link åˆ°å…¨å±€</h3><p>åœ¨æ§åˆ¶å°è¾“å…¥<code>npm link</code></p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a3e341c830934ef9b3dcbf3753ea8561~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="link.jpg"></p><p>æµ‹è¯•æ˜¯å¦è¿æ¥æˆåŠŸ</p><p>åœ¨æ§åˆ¶å°è¾“å…¥<code>my-build-cli</code></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3cb3c167e8c14d17a71f9bd31bd4c23d~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="linksuccess.jpg"></p><p>åœ¨æ§åˆ¶å°è¾“å‡º<code>link æˆåŠŸ</code>, é¡¹ç›®é…ç½®æˆåŠŸ</p><h3 id="å®‰è£…è„šæ‰‹æ¶æ‰€éœ€çš„å·¥å…·" tabindex="-1"><a class="header-anchor" href="#å®‰è£…è„šæ‰‹æ¶æ‰€éœ€çš„å·¥å…·" aria-hidden="true">#</a> å®‰è£…è„šæ‰‹æ¶æ‰€éœ€çš„å·¥å…·</h3><p>ä¸€æ¬¡æ€§å®‰è£…æ‰€éœ€çš„å·¥å…·</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm install commander inquirer download-git-repo util ora fs-extra axios
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><table><thead><tr><th>å·¥å…·åç§°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>commander</td><td>è‡ªå®šä¹‰å‘½ä»¤è¡Œå·¥å…·</td></tr><tr><td>inquirer</td><td>å‘½ä»¤è¡Œäº¤äº’å·¥å…·</td></tr><tr><td>download-git-repo</td><td>ä» git ä¸Šä¸‹è½½é¡¹ç›®æ¨¡æ¿å·¥å…·</td></tr><tr><td>util</td><td>download-git-repo ä¸æ”¯æŒå¼‚æ­¥è°ƒç”¨ï¼Œéœ€è¦ä½¿ç”¨ util æ’ä»¶çš„<code>util.promisify</code>è¿›è¡Œè½¬æ¢</td></tr><tr><td>ora</td><td>å‘½ä»¤è¡Œ loading åŠ¨æ•ˆ</td></tr><tr><td>fs-extra</td><td>æä¾›æ–‡ä»¶æ“ä½œæ–¹æ³•</td></tr><tr><td>axios</td><td>å‘é€æ¥å£ï¼Œè¯·æ±‚ git ä¸Šçš„æ¨¡æ¿åˆ—è¡¨</td></tr></tbody></table><h3 id="commander-è‡ªå®šä¹‰å‘½ä»¤è¡Œå·¥å…·" tabindex="-1"><a class="header-anchor" href="#commander-è‡ªå®šä¹‰å‘½ä»¤è¡Œå·¥å…·" aria-hidden="true">#</a> commander è‡ªå®šä¹‰å‘½ä»¤è¡Œå·¥å…·</h3><p><code>commander.js</code> æ˜¯è‡ªå®šä¹‰å‘½ä»¤è¡Œå·¥å…·</p><p>è¿™é‡Œç”¨æ¥<strong>åˆ›å»º<code>create</code> å‘½ä»¤</strong>ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è¾“å…¥ <code>my-cli creat appName</code> æ¥åˆ›å»ºé¡¹ç›®</p><p><strong>ä¿®æ”¹<code>www.js</code></strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token hashbang comment">#! /usr/bin/env node</span>

<span class="token keyword">const</span> program <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;commander&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

program
  <span class="token comment">// åˆ›å»ºcreate å‘½ä»¤ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ my-cli creat appName æ¥åˆ›å»ºé¡¹ç›®</span>
  <span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;create &lt;app-name&gt;&quot;</span><span class="token punctuation">)</span>
  <span class="token comment">// å‘½åçš„æè¿°</span>
  <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">&quot;create a new project&quot;</span><span class="token punctuation">)</span>
  <span class="token comment">// createå‘½ä»¤çš„é€‰é¡¹</span>
  <span class="token punctuation">.</span><span class="token function">option</span><span class="token punctuation">(</span><span class="token string">&quot;-f, --force&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;overwrite target if it exist&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ‰§è¡Œ&#39;./create.js&#39;ï¼Œä¼ å…¥é¡¹ç›®åç§°å’Œ ç”¨æˆ·é€‰é¡¹</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./create&quot;</span><span class="token punctuation">)</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

program<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="inquirer-å‘½ä»¤è¡Œäº¤äº’å·¥å…·" tabindex="-1"><a class="header-anchor" href="#inquirer-å‘½ä»¤è¡Œäº¤äº’å·¥å…·" aria-hidden="true">#</a> inquirer å‘½ä»¤è¡Œäº¤äº’å·¥å…·</h3><p><code>inquirer.js</code> å‘½ä»¤è¡Œäº¤äº’å·¥å…·ï¼Œç”¨æ¥è¯¢é—®ç”¨æˆ·çš„æ“ä½œï¼Œè®©ç”¨æˆ·è¾“å…¥æŒ‡å®šçš„ä¿¡æ¯ï¼Œæˆ–ç»™å‡ºå¯¹åº”çš„é€‰é¡¹è®©ç”¨æˆ·é€‰æ‹©</p><p><strong>æ­¤å¤„ inquirer çš„è¿ç”¨åœºæ™¯æœ‰ 2 ä¸ª</strong></p><p>1ï¼‰åœºæ™¯ 1ï¼šå½“ç”¨æˆ·è¦åˆ›å»ºçš„é¡¹ç›®ç›®å½•å·²å­˜åœ¨æ—¶ï¼Œæç¤ºç”¨æˆ·æ˜¯å¦è¦è¦†ç›– or å–æ¶ˆ</p><p>2ï¼‰åœºæ™¯ 2ï¼šè®©ç”¨æˆ·è¾“å…¥é¡¹ç›®çš„<code>author</code>ä½œè€…å’Œé¡¹ç›®<code>description</code>æè¿°</p><h3 id="åˆ›å»ºcreate-js" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºcreate-js" aria-hidden="true">#</a> åˆ›å»º<code>create.js</code></h3><p><strong><code>bin/create.js</code></strong></p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">fs</span> <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;fs-extra&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">inquirer</span> <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;inquirer&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">Generator</span> <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;./generator&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token operator">.</span>exports <span class="token operator">=</span> async <span class="token keyword">function</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// process.cwdè·å–å½“å‰çš„å·¥ä½œç›®å½•</span>
  <span class="token keyword">const</span> <span class="token constant">cwd</span> <span class="token operator">=</span> process<span class="token operator">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// path.joinæ‹¼æ¥ è¦åˆ›å»ºé¡¹ç›®çš„ç›®å½•</span>
  <span class="token keyword">const</span> <span class="token constant">targetAir</span> <span class="token operator">=</span> path<span class="token operator">.</span><span class="token function">join</span><span class="token punctuation">(</span>cwd<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// å¦‚æœè¯¥ç›®å½•å·²å­˜åœ¨</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>fs<span class="token operator">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>targetAir<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¼ºåˆ¶åˆ é™¤</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token operator">.</span>force<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      await fs<span class="token operator">.</span><span class="token function">remove</span><span class="token punctuation">(</span>targetAir<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// é€šè¿‡inquirerï¼šè¯¢é—®ç”¨æˆ·æ˜¯å¦ç¡®å®šè¦è¦†ç›– or å–æ¶ˆ</span>
      let <span class="token punctuation">{</span> action <span class="token punctuation">}</span> <span class="token operator">=</span> await inquirer<span class="token operator">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          name<span class="token punctuation">:</span> <span class="token string single-quoted-string">&#39;action&#39;</span><span class="token punctuation">,</span>
          <span class="token argument-name">type</span><span class="token punctuation">:</span> <span class="token string single-quoted-string">&#39;list&#39;</span><span class="token punctuation">,</span>
          <span class="token argument-name">message</span><span class="token punctuation">:</span> <span class="token string single-quoted-string">&#39;Target already exists&#39;</span><span class="token punctuation">,</span>
          <span class="token argument-name">choices</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
              name<span class="token punctuation">:</span> <span class="token string single-quoted-string">&#39;overwrite&#39;</span><span class="token punctuation">,</span>
              <span class="token argument-name">value</span><span class="token punctuation">:</span> <span class="token string single-quoted-string">&#39;overwrite&#39;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              name<span class="token punctuation">:</span> <span class="token string single-quoted-string">&#39;cancel&#39;</span><span class="token punctuation">,</span>
              <span class="token argument-name">value</span><span class="token punctuation">:</span> <span class="token constant boolean">false</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// åˆ é™¤æ–‡ä»¶å¤¹</span>
        await fs<span class="token operator">.</span><span class="token function">remove</span><span class="token punctuation">(</span>targetAir<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> <span class="token constant">args</span> <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;./ask&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// é€šè¿‡inquirerï¼Œè®©ç”¨æˆ·è¾“å…¥çš„é¡¹ç›®å†…å®¹ï¼šä½œè€…å’Œæè¿°</span>
  <span class="token keyword">const</span> <span class="token constant">ask</span> <span class="token operator">=</span> await inquirer<span class="token operator">.</span><span class="token function">prompt</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// åˆ›å»ºé¡¹ç›®</span>
  <span class="token keyword">const</span> <span class="token constant">generator</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Generator</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> targetAir<span class="token punctuation">,</span> ask<span class="token punctuation">)</span><span class="token punctuation">;</span>
  generator<span class="token operator">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åˆ›å»ºask-js" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºask-js" aria-hidden="true">#</a> åˆ›å»º<code>ask.js</code></h3><p>é…ç½® <code>ask</code> é€‰é¡¹ï¼Œè®©ç”¨æˆ·è¾“å…¥ä½œè€…å’Œé¡¹ç›®æè¿°</p><p><strong><code>bin/create.js</code></strong></p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// é…ç½®ask é€‰é¡¹</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">type</span><span class="token punctuation">:</span> <span class="token char">&#39;input&#39;</span><span class="token punctuation">,</span>
    name<span class="token punctuation">:</span> <span class="token char">&#39;author&#39;</span><span class="token punctuation">,</span>
    message<span class="token punctuation">:</span> <span class="token char">&#39;author?&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">type</span><span class="token punctuation">:</span> <span class="token char">&#39;input&#39;</span><span class="token punctuation">,</span>
    name<span class="token punctuation">:</span> &#39;description&#39;<span class="token punctuation">,</span>
    message<span class="token punctuation">:</span> &#39;description?&#39;
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åˆ›å»ºgenerator-js" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºgenerator-js" aria-hidden="true">#</a> åˆ›å»º<code>generator.js</code></h3><p><strong><code>generator.js</code>çš„å·¥ä½œæµç¨‹</strong></p><p>1ï¼‰é€šè¿‡æ¥å£è·å–<code>git</code>ä¸Šçš„æ¨¡æ¿ç›®å½•</p><p>2ï¼‰é€šè¿‡<code>inquirer</code>è®©ç”¨æˆ·é€‰æ‹©éœ€è¦ä¸‹è½½çš„é¡¹ç›®</p><p>3ï¼‰ä½¿ç”¨<code>download-git-repo</code>ä¸‹è½½ç”¨æˆ·é€‰æ‹©çš„é¡¹ç›®æ¨¡æ¿</p><p>4ï¼‰å°†ç”¨æˆ·åˆ›å»ºæ—¶ï¼Œå°†<code>é¡¹ç›®åç§°ã€ä½œè€…åå­—ã€æè¿°</code>å†™å…¥åˆ°é¡¹ç›®æ¨¡æ¿çš„<code>package.json</code>æ–‡ä»¶ä¸­</p><p><strong><code>bin/generator.js</code></strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs-extra&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å¼•å…¥oraå·¥å…·ï¼šå‘½ä»¤è¡Œloading åŠ¨æ•ˆ</span>
<span class="token keyword">const</span> ora <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;ora&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> inquirer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;inquirer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å¼•å…¥download-git-repoå·¥å…·</span>
<span class="token keyword">const</span> downloadGitRepo <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;download-git-repo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// download-git-repo é»˜è®¤ä¸æ”¯æŒå¼‚æ­¥è°ƒç”¨ï¼Œéœ€è¦ä½¿ç”¨utilæ’ä»¶çš„util.promisify è¿›è¡Œè½¬æ¢</span>
<span class="token keyword">const</span> util <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;util&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è·å–gité¡¹ç›®åˆ—è¡¨</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> getRepolist <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">wrapLoading</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> message<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> spinner <span class="token operator">=</span> <span class="token function">ora</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ä¸‹è½½å¼€å§‹</span>
  spinner<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ä¸‹è½½æˆåŠŸ</span>
    spinner<span class="token punctuation">.</span><span class="token function">succeed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä¸‹è½½å¤±è´¥</span>
    spinner<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">&quot;Request failed â€¦â€¦&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// åˆ›å»ºé¡¹ç›®ç±»</span>
<span class="token keyword">class</span> <span class="token class-name">Generator</span> <span class="token punctuation">{</span>
  <span class="token comment">// name é¡¹ç›®åç§°</span>
  <span class="token comment">// target åˆ›å»ºé¡¹ç›®çš„è·¯å¾„</span>
  <span class="token comment">// ç”¨æˆ·è¾“å…¥çš„ ä½œè€…å’Œé¡¹ç›®æè¿° ä¿¡æ¯</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> target<span class="token punctuation">,</span> ask</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ask <span class="token operator">=</span> ask<span class="token punctuation">;</span>
    <span class="token comment">// download-git-repo é»˜è®¤ä¸æ”¯æŒå¼‚æ­¥è°ƒç”¨ï¼Œéœ€è¦ä½¿ç”¨utilæ’ä»¶çš„util.promisify è¿›è¡Œè½¬æ¢</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>downloadGitRepo <span class="token operator">=</span> util<span class="token punctuation">.</span><span class="token function">promisify</span><span class="token punctuation">(</span>downloadGitRepo<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">async</span> <span class="token function">getRepo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·å–gitä»“åº“çš„é¡¹ç›®åˆ—è¡¨</span>
    <span class="token keyword">const</span> repolist <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">wrapLoading</span><span class="token punctuation">(</span>getRepolist<span class="token punctuation">,</span> <span class="token string">&quot;waiting fetch template&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>repolist<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> repos <span class="token operator">=</span> repolist<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// é€šè¿‡inquirer è®©ç”¨æˆ·é€‰æ‹©è¦ä¸‹è½½çš„é¡¹ç›®æ¨¡æ¿</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> repo <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> inquirer<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;repo&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">choices</span><span class="token operator">:</span> repos<span class="token punctuation">,</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;Please choose a template&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> repo<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ä¸‹è½½ç”¨æˆ·é€‰æ‹©çš„é¡¹ç›®æ¨¡æ¿</span>
  <span class="token keyword">async</span> <span class="token function">download</span><span class="token punctuation">(</span><span class="token parameter">repo<span class="token punctuation">,</span> tag</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> requestUrl <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">yuan-cli/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>repo<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">wrapLoading</span><span class="token punctuation">(</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>downloadGitRepo<span class="token punctuation">,</span>
      <span class="token string">&quot;waiting download template&quot;</span><span class="token punctuation">,</span>
      requestUrl<span class="token punctuation">,</span>
      path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// æ–‡ä»¶å…¥å£ï¼Œåœ¨create.jsä¸­ æ‰§è¡Œgenerator.create();</span>
  <span class="token keyword">async</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> repo <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getRepo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ç”¨æˆ·é€‰æ‹©äº†&quot;</span><span class="token punctuation">,</span> repo<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ä¸‹è½½ç”¨æˆ·é€‰æ‹©çš„é¡¹ç›®æ¨¡æ¿</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">download</span><span class="token punctuation">(</span>repo<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ä¸‹è½½å®Œæˆåï¼Œè·å–é¡¹ç›®é‡Œçš„package.json</span>
    <span class="token comment">// å°†ç”¨æˆ·åˆ›å»ºé¡¹ç›®çš„å¡«å†™çš„ä¿¡æ¯ï¼ˆé¡¹ç›®åç§°ã€ä½œè€…åå­—ã€æè¿°ï¼‰ï¼Œå†™å…¥åˆ°package.jsonä¸­</span>
    <span class="token keyword">let</span> targetPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> jsonPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>targetPath<span class="token punctuation">,</span> <span class="token string">&quot;package.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>jsonPath<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// è¯»å–å·²ä¸‹è½½æ¨¡æ¿ä¸­package.jsonçš„å†…å®¹</span>
      <span class="token keyword">const</span> data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>jsonPath<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> json <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      json<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
      <span class="token comment">// è®©ç”¨æˆ·è¾“å…¥çš„å†…å®¹ æ›¿æ¢åˆ° package.jsonä¸­å¯¹åº”çš„å­—æ®µ</span>
      Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ask<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        json<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ask<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">//ä¿®æ”¹é¡¹ç›®æ–‡ä»¶å¤¹ä¸­ package.json æ–‡ä»¶</span>
      fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>jsonPath<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;\t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Generator<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åˆ›å»ºhttp-js" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºhttp-js" aria-hidden="true">#</a> åˆ›å»º<code>http.js</code></h3><p>ç”¨æ¥å‘é€æ¥å£ï¼Œè·å– git ä¸Šçš„æ¨¡æ¿åˆ—è¡¨</p><p><strong><code>bin/http.js</code></strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// å¼•å…¥axios</span>
<span class="token keyword">const</span> axios <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;axios&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è·å–gitä¸Šçš„é¡¹ç›®åˆ—è¡¨</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getRepolist</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;https://api.github.com/orgs/yuan-cli/repos&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  getRepolist<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æœ€ç»ˆçš„ç›®å½•ç»“æ„</strong></p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6a8ff4881ac046b699a36e3a82dec587~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="list.jpg"></p><h3 id="è„šæ‰‹æ¶æ•ˆæœæ¼”ç¤º" tabindex="-1"><a class="header-anchor" href="#è„šæ‰‹æ¶æ•ˆæœæ¼”ç¤º" aria-hidden="true">#</a> è„šæ‰‹æ¶æ•ˆæœæ¼”ç¤º</h3><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0deadf8fdff741fba443bb51f439b944~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="text8.gif"></p><h3 id="è„šæ‰‹æ¶å‘å¸ƒåˆ°-npm-åº“" tabindex="-1"><a class="header-anchor" href="#è„šæ‰‹æ¶å‘å¸ƒåˆ°-npm-åº“" aria-hidden="true">#</a> è„šæ‰‹æ¶å‘å¸ƒåˆ° npm åº“</h3><p><strong>å®Œå–„ package.json</strong></p><p>1ï¼‰é…ç½®<code>main</code>å±æ€§ï¼ŒæŒ‡å®šåŒ…çš„å…¥å£ <code>&quot;main&quot;: &quot;./bin/www.js&quot;</code></p><p>2ï¼‰å¢åŠ <code>files</code>å±æ€§ï¼Œfiles ç”¨æ¥æè¿°å½“æŠŠ npm åŒ…ï¼Œä½œä¸ºä¾èµ–åŒ…å®‰è£…çš„æ–‡ä»¶åˆ—è¡¨ã€‚å½“ npm åŒ…å‘å¸ƒæ—¶ï¼Œfiles æŒ‡å®šçš„æ–‡ä»¶ä¼šè¢«æ¨é€åˆ° npm æœåŠ¡å™¨ä¸­</p><p>3ï¼‰å¢åŠ <code>description</code>ã€<code>keywords</code>ç­‰æè¿°å­—æ®µ</p><div class="language-swift ext-swift line-numbers-mode"><pre class="language-swift"><code><span class="token punctuation">{</span>
  <span class="token string-literal"><span class="token string">&quot;name&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;my-2022-cli&quot;</span></span><span class="token punctuation">,</span>
  <span class="token string-literal"><span class="token string">&quot;version&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;1.1.0&quot;</span></span><span class="token punctuation">,</span>
  <span class="token string-literal"><span class="token string">&quot;description&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;ä¸€ä¸ªminiç‰ˆçš„è„šæ‰‹æ¶&quot;</span></span><span class="token punctuation">,</span>
  <span class="token string-literal"><span class="token string">&quot;main&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;./bin/www.js&quot;</span></span><span class="token punctuation">,</span>
  <span class="token string-literal"><span class="token string">&quot;bin&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;./bin/www.js&quot;</span></span><span class="token punctuation">,</span>
  <span class="token string-literal"><span class="token string">&quot;scripts&quot;</span></span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string-literal"><span class="token string">&quot;test&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-literal"><span class="token string">&quot;files&quot;</span></span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token string-literal"><span class="token string">&quot;bin&quot;</span></span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-literal"><span class="token string">&quot;keywords&quot;</span></span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token string-literal"><span class="token string">&quot;my-yuan-cli&quot;</span></span><span class="token punctuation">,</span>
    <span class="token string-literal"><span class="token string">&quot;è‡ªå®šä¹‰è„šæ‰‹æ¶&quot;</span></span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-literal"><span class="token string">&quot;author&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;æµ·é˜”å¤©ç©º&quot;</span></span><span class="token punctuation">,</span>
  <span class="token string-literal"><span class="token string">&quot;license&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;ISC&quot;</span></span><span class="token punctuation">,</span>
  <span class="token string-literal"><span class="token string">&quot;dependencies&quot;</span></span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string-literal"><span class="token string">&quot;axios&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;^0.24.0&quot;</span></span><span class="token punctuation">,</span>
    <span class="token string-literal"><span class="token string">&quot;commander&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;^8.3.0&quot;</span></span><span class="token punctuation">,</span>
    <span class="token string-literal"><span class="token string">&quot;download-git-repo&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;^3.0.2&quot;</span></span><span class="token punctuation">,</span>
    <span class="token string-literal"><span class="token string">&quot;fs-extra&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;^10.0.0&quot;</span></span><span class="token punctuation">,</span>
    <span class="token string-literal"><span class="token string">&quot;inquirer&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;^8.2.0&quot;</span></span><span class="token punctuation">,</span>
    <span class="token string-literal"><span class="token string">&quot;ora&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;^5.4.1&quot;</span></span><span class="token punctuation">,</span>
    <span class="token string-literal"><span class="token string">&quot;util&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;^0.12.4&quot;</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¢åŠ  README.md è¯´æ˜æ–‡æ¡£</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">## my-2022-cli</span>

ä¸€ä¸ª mini ç‰ˆçš„è‡ªå®šä¹‰è„šæ‰‹æ¶

<span class="token comment">### å®‰è£…</span>

<span class="token function">npm</span> <span class="token function">install</span> my-2022-cli <span class="token parameter variable">-g</span>

<span class="token comment">### ä½¿ç”¨è¯´æ˜</span>

<span class="token number">1</span>ï¼‰é€šè¿‡ my-2022-cli create appName åˆ›å»ºé¡¹ç›®

<span class="token number">2</span>ï¼‰author? è¾“å…¥é¡¹ç›®ä½œè€…

<span class="token number">3</span>ï¼‰description? è¾“å…¥é¡¹ç›®æè¿°

<span class="token number">4</span>ï¼‰é€‰æ‹©é¡¹ç›®æ¨¡å— appDemo or pcDemo

<span class="token number">5</span>ï¼‰å®‰è£…é€‰æ‹©çš„æ¨¡æ¿

<span class="token comment">### æ¼”ç¤ºç¤ºä¾‹</span>

<span class="token operator">!</span><span class="token punctuation">[</span>Image text<span class="token punctuation">]</span><span class="token punctuation">(</span>https://wx1.sinaimg.cn/mw2000/927e36bfgy1h69k6ee9z1g20rs0jfwit.gif<span class="token punctuation">)</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å‘å¸ƒæˆåŠŸåï¼Œåœ¨ npm ç½‘ç«™æœç´¢<code>my-2022-cli</code></strong></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/66b9c13e0604448b852dd896959659db~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="my-2022-cli.jpg"></p><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fxy-sea%2Fblog%2Ftree%2Fdev%2Fmy-build-cli" target="_blank" rel="noopener noreferrer">è‡ªå®šä¹‰è„šæ‰‹æ¶ github æºç åœ°å€<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fmy-2022-cli" target="_blank" rel="noopener noreferrer">my-2022-cli<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="æ€§èƒ½åˆ†æä¸ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#æ€§èƒ½åˆ†æä¸ä¼˜åŒ–" aria-hidden="true">#</a> æ€§èƒ½åˆ†æä¸ä¼˜åŒ–</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ä¸€ç™¾ç”¨æˆ·ä¸ä¸€ç™¾ä¸‡ç”¨æˆ·çš„ç½‘ç«™æœ‰ç€æœ¬è´¨åŒºåˆ«
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>éšç€ç”¨æˆ·çš„å¢é•¿ï¼Œä»»ä½•ç»†èŠ‚çš„ä¼˜åŒ–éƒ½å˜å¾—æ›´ä¸ºé‡è¦ï¼Œç½‘ç«™çš„æ€§èƒ½å·®å¼‚ç›´æ¥å½±å“ç€ç”¨æˆ·çš„ä½“éªŒ</p><p>è¯•æƒ³ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ç½‘ä¸Šè´­ç‰©ï¼Œå•†åŸé¡µé¢å¥½å‡ ç§’æ‰æ‰“å¼€ï¼Œæˆ–å›¾ç‰‡åŠ è½½ä¸å‡ºæ¥ï¼Œè´­ç‰©çš„æ¬²æœ›ç¬é—´æ¶ˆå‡ï¼ŒæŠ¬æ‰‹å°±å»å…¶ä»–ç«å“å¹³å°äº†</p><p>æˆ‘æ›¾ç»è´Ÿè´£è¿‡å‡ ä¸ªå¤§å‹é¡¹ç›®çš„æ•´ä½“æ€§èƒ½ä¼˜åŒ–ï¼Œå°½é‡ä»å®æˆ˜çš„è§’åº¦èŠä¸€èŠè‡ªå·±æ‰€ç†è§£çš„æ€§èƒ½é—®é¢˜</p><p><strong>æ€§èƒ½åˆ†æå·¥å…·</strong></p><p>å¥½æ¯”å»åŒ»é™¢çœ‹ç—…ä¸€æ ·ï¼Œå¾—äº†ä»€ä¹ˆç—…ï¼Œé€šè¿‡æ£€æµ‹åŒ–éªŒåæ‰çŸ¥é“ã€‚ç½‘ç«™ä¹Ÿæ˜¯ä¸€æ ·ï¼Œéœ€è¦å€ŸåŠ©æ€§èƒ½åˆ†æå·¥å…·æ¥æ£€æµ‹</p><h3 id="lighthouse-å·¥å…·" tabindex="-1"><a class="header-anchor" href="#lighthouse-å·¥å…·" aria-hidden="true">#</a> Lighthouse å·¥å…·</h3><p><code>Lighthouse</code>æ˜¯ Chrome è‡ªå¸¦çš„æ€§èƒ½åˆ†æå·¥å…·ï¼Œå®ƒèƒ½å¤Ÿç”Ÿæˆä¸€ä¸ªæœ‰å…³é¡µé¢æ€§èƒ½çš„æŠ¥å‘Š</p><p>é€šè¿‡æŠ¥å‘Šæˆ‘ä»¬å¯ä»¥çŸ¥é“éœ€è¦é‡‡å–å“ªäº›æªæ–½ï¼Œæ¥æ”¹è¿›åº”ç”¨çš„æ€§èƒ½å’Œä½“éªŒ</p><p>å¹¶ä¸” Lighthouse å¯ä»¥å¯¹é¡µé¢å¤šæ–¹é¢çš„æ•ˆæœæŒ‡æ ‡è¿›è¡Œè¯„æµ‹ï¼Œå¹¶ç»™å‡ºæœ€ä½³å®è·µçš„å»ºè®®ï¼Œä»¥å¸®åŠ©å¼€å‘è€…æ”¹è¿›ç½‘ç«™çš„è´¨é‡</p><h4 id="lighthouse-æ‹¿åˆ°é¡µé¢çš„-ç—…æƒ…-æŠ¥å‘Š" tabindex="-1"><a class="header-anchor" href="#lighthouse-æ‹¿åˆ°é¡µé¢çš„-ç—…æƒ…-æŠ¥å‘Š" aria-hidden="true">#</a> Lighthouse æ‹¿åˆ°é¡µé¢çš„â€œç—…æƒ…â€æŠ¥å‘Š</h4><p>é€šè¿‡ Lighthouse æ‹¿åˆ°ç½‘ç«™çš„æ•´ä½“åˆ†ææŠ¥å‘Šï¼Œé€šè¿‡æŠ¥å‘Šæ¥è¯Šæ–­â€œç—…æƒ…â€</p><p>è¿™é‡Œä»¥<a href="https://juejin.cn/" target="_blank" rel="noopener noreferrer">juejin.cn<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ç½‘ç«™ä¸ºä¾‹ï¼Œ æ‰“å¼€ Chrome æµè§ˆå™¨æ§åˆ¶å°ï¼Œé€‰æ‹©<code>Lighthouse</code>é€‰é¡¹ï¼Œç‚¹å‡»<code>Generate report</code></p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a45f99f0e13343949f3e611f5e7b625d~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="Lighthouse.jpg"></p><p><strong>Lighthouse èƒ½å¤Ÿç”Ÿæˆä¸€ä»½è¯¥ç½‘ç«™çš„æŠ¥å‘Šï¼Œæ¯”å¦‚ä¸‹å›¾ï¼š</strong></p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d2257a3245dc401e8f5b7e2430007c41~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="performance.jpg"></p><p><strong>è¿™é‡Œé‡ç‚¹å…³æ³¨<code>Performanceæ€§èƒ½è¯„åˆ†</code></strong></p><p>æ€§èƒ½è¯„åˆ†çš„åˆ†å€¼åŒºé—´æ˜¯ 0 åˆ° 100ï¼Œå¦‚æœå‡ºç° 0 åˆ†ï¼Œé€šå¸¸æ˜¯åœ¨è¿è¡Œ Lighthouse æ—¶å‘ç”Ÿäº†é”™è¯¯ï¼Œæ»¡åˆ† 100 åˆ†ä»£è¡¨äº†ç½‘ç«™å·²ç»è¾¾åˆ°äº† 98 åˆ†ä½å€¼çš„æ•°æ®ï¼Œè€Œ 50 åˆ†åˆ™å¯¹åº” 75 åˆ†ä½å€¼çš„æ•°æ®</p><p>å°ä¼™ä¼´çœ‹çœ‹è‡ªå·±å¼€å‘çš„é¡¹ç›®å¾—åˆ†æ˜¯å¤šå°‘ï¼Œå¤„äºä»€ä¹ˆæ ·çš„æ°´å¹³</p><h4 id="lighthouse-ç»™å‡º-opportunities-ä¼˜åŒ–å»ºè®®" tabindex="-1"><a class="header-anchor" href="#lighthouse-ç»™å‡º-opportunities-ä¼˜åŒ–å»ºè®®" aria-hidden="true">#</a> Lighthouse ç»™å‡º Opportunities ä¼˜åŒ–å»ºè®®</h4><p>Lighthouse ä¼šé’ˆå¯¹å½“å‰ç½‘ç«™ï¼Œç»™å‡ºä¸€äº›<code>Opportunities</code>ä¼˜åŒ–å»ºè®®</p><p><strong>Opportunities æŒ‡çš„æ˜¯ä¼˜åŒ–æœºä¼šï¼Œå®ƒæä¾›äº†è¯¦ç»†çš„å»ºè®®å’Œæ–‡æ¡£ï¼Œæ¥è§£é‡Šä½åˆ†çš„åŸå› ï¼Œå¸®åŠ©æˆ‘ä»¬å…·ä½“è¿›è¡Œå®ç°å’Œæ”¹è¿›</strong></p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7de10b4870824a61b81780cf46ed1a02~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="opportunity.jpg"></p><p>ä¸¾ä¸€ä¸ªæˆ‘æ›¾å¼€å‘è¿‡çš„ä¸€ä¸ªé¡¹ç›®ï¼Œä»¥ä¸‹æ˜¯</p><p><strong>Opportunities ç»™å‡ºä¼˜åŒ–å»ºè®®åˆ—è¡¨</strong></p><table><thead><tr><th>é—®é¢˜</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>Remove unused JavaScript</td><td>å»æ‰æ— ç”¨ js ä»£ç </td></tr><tr><td>Preload key requests</td><td>é¦–é¡µèµ„æº preload é¢„åŠ è½½</td></tr><tr><td>Remove unused CSS</td><td>å»æ‰æ— ç”¨ css ä»£ç </td></tr><tr><td>Serve images in next-gen formats</td><td>ä½¿ç”¨æ–°çš„å›¾ç‰‡æ ¼å¼ï¼Œæ¯”å¦‚ webp ç›¸å¯¹ png jpg æ ¼å¼ä½“ç§¯æ›´å°</td></tr><tr><td>Efficiently encode images</td><td>æ¯”å¦‚å‹ç¼©å›¾ç‰‡å¤§å°</td></tr><tr><td>Preconnect to required origins</td><td>ä½¿ç”¨ preconnect or dns-prefetch DNS é¢„è§£æ</td></tr></tbody></table><h4 id="lighthouse-ç»™å‡º-diagnostics-è¯Šæ–­é—®é¢˜åˆ—è¡¨" tabindex="-1"><a class="header-anchor" href="#lighthouse-ç»™å‡º-diagnostics-è¯Šæ–­é—®é¢˜åˆ—è¡¨" aria-hidden="true">#</a> Lighthouse ç»™å‡º Diagnostics è¯Šæ–­é—®é¢˜åˆ—è¡¨</h4><p><strong><code>Diagnostics</code> æŒ‡çš„æ˜¯ç°åœ¨å­˜åœ¨çš„é—®é¢˜ï¼Œä¸ºè¿›ä¸€æ­¥æ”¹å–„æ€§èƒ½çš„éªŒè¯å’Œè°ƒæ•´ç»™å‡ºäº†æŒ‡å¯¼</strong></p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b808a0335cdd4eb7a43b20b00b16e68a~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="DiagNo.jpg"></p><p><strong>Diagnostics è¯Šæ–­é—®é¢˜åˆ—è¡¨</strong></p><table><thead><tr><th>é—®é¢˜</th><th>å½±å“</th></tr></thead><tbody><tr><td>A long cache lifetime can speed up repeat visits to your page</td><td>è¿™äº›èµ„æºéœ€è¦æä¾›é•¿çš„ç¼“å­˜æœŸï¼Œç°å‘ç°å›¾ç‰‡éƒ½æ˜¯ç”¨çš„åå•†ç¼“å­˜ï¼Œæ˜¾ç„¶ä¸åˆç†</td></tr><tr><td>Image elements do not have explicit width and height</td><td>ç»™å›¾ç‰‡è®¾ç½®å…·ä½“çš„å®½é«˜ï¼Œå‡å°‘ cls çš„å€¼</td></tr><tr><td>Avoid enormous network payloads</td><td>èµ„æºå¤ªå¤§å¢åŠ ç½‘ç»œè´Ÿè½½</td></tr><tr><td>Minimize main-thread work</td><td>æœ€å°åŒ–ä¸»çº¿ç¨‹ è¿™é‡Œä¼šæ‰§è¡Œè§£æ Htmlã€æ ·å¼è®¡ç®—ã€å¸ƒå±€ã€ç»˜åˆ¶ã€åˆæˆç­‰åŠ¨ä½œ</td></tr><tr><td>Reduce JavaScript execution time</td><td>å‡å°‘éå¿…è¦ js èµ„æºçš„åŠ è½½ï¼Œå‡å°‘å¿…è¦ js èµ„æºçš„å¤§å°</td></tr><tr><td>Avoid large layout shifts</td><td>é¿å…å¤§çš„å¸ƒå±€å˜åŒ–ï¼Œä»ä¸­å¯ä»¥çœ‹åˆ°å½±å“å¸ƒå±€å˜åŒ–æœ€å¤§çš„å…ƒç´ </td></tr></tbody></table><p><strong><code>è¿™äº›Opportunitieså»ºè®®å’ŒDiagnosticsè¯Šæ–­é—®é¢˜æ˜¯éå¸¸å…·ä½“ä¸”æœ‰æ•ˆçš„ï¼ˆäº²æµ‹ï¼‰ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®è¿™äº›å»ºè®®ï¼Œä¸€æ¡æ¡å»ä¿®æ”¹æˆ–ä¼˜åŒ–</code></strong></p><h4 id="lighthouse-åˆ—å‡º-performance-å„æŒ‡æ ‡å¾—åˆ†" tabindex="-1"><a class="header-anchor" href="#lighthouse-åˆ—å‡º-performance-å„æŒ‡æ ‡å¾—åˆ†" aria-hidden="true">#</a> Lighthouse åˆ—å‡º Performance å„æŒ‡æ ‡å¾—åˆ†</h4><p>Performance åˆ—å‡ºäº†<code>FCPã€SPã€LCPã€TTIã€TBIã€CLS</code> å…­ä¸ªæŒ‡æ ‡çš„ç”¨æ—¶å’Œå¾—åˆ†æƒ…å†µ</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ä¸‹æ–‡ä¼šèŠä¸€èŠè¿™äº›æŒ‡æ ‡çš„ç”¨æ³•ä¸ä½œç”¨
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/af0472178da940eba7dd95bb6ef7c597~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="performance1.jpg"></p><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.cnblogs.com%2Fwenxuehai%2Fp%2F14236426.html" target="_blank" rel="noopener noreferrer">æ€§èƒ½æµ‹è¯„å·¥å…· lighthouse çš„ä½¿ç”¨<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="web-vitals-å®˜æ–¹æ ‡å‡†" tabindex="-1"><a class="header-anchor" href="#web-vitals-å®˜æ–¹æ ‡å‡†" aria-hidden="true">#</a> Web-vitals å®˜æ–¹æ ‡å‡†</h3><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fweb-vitals" target="_blank" rel="noopener noreferrer">web-vitals<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>æ˜¯ Google ç»™å‡ºçš„å®šä¹‰æ˜¯ ä¸€ä¸ª<strong>è‰¯å¥½ç½‘ç«™çš„åŸºæœ¬æŒ‡æ ‡</strong></p><p>è¿‡å»è¦è¡¡é‡ä¸€ä¸ªç½‘ç«™çš„å¥½åï¼Œéœ€è¦ä½¿ç”¨çš„æŒ‡æ ‡å¤ªå¤šäº†ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥å°†é‡ç‚¹èšç„¦äº Web Vitals æŒ‡æ ‡çš„è¡¨ç°å³å¯</p><p><strong>å®˜æ–¹æŒ‡æ ‡æ ‡å‡†</strong></p><table><thead><tr><th>æŒ‡æ ‡</th><th>ä½œç”¨</th><th>æ ‡å‡†</th></tr></thead><tbody><tr><td>FCP(First Contentful Paint)</td><td>é¦–æ¬¡å†…å®¹ç»˜åˆ¶æ—¶é—´</td><td>æ ‡å‡† â‰¤1s</td></tr><tr><td>LCP(Largest Contentful Paint)</td><td>æœ€å¤§å†…å®¹ç»˜åˆ¶æ—¶é—´</td><td>æ ‡å‡† â‰¤2 ç§’</td></tr><tr><td>FID(first input delay)</td><td>é¦–æ¬¡è¾“å…¥å»¶è¿Ÿï¼Œæ ‡å‡†æ˜¯ç”¨æˆ·è§¦å‘åï¼Œåˆ°æµè§ˆå™¨å“åº”æ—¶é—´</td><td>æ ‡å‡† â‰¤100ms</td></tr><tr><td>CLS(Cumulative Layout Shift)</td><td>ç´¯ç§¯å¸ƒå±€åç§»</td><td>æ ‡å‡† â‰¤0.1</td></tr><tr><td>TTFB(Time to First Byte)</td><td>é¡µé¢å‘å‡ºè¯·æ±‚ï¼Œåˆ°æ¥æ”¶ç¬¬ä¸€ä¸ªå­—èŠ‚æ‰€èŠ±è´¹çš„æ¯«ç§’æ•°(é¦–å­—èŠ‚æ—¶é—´)</td><td>æ ‡å‡†&lt;= 100 æ¯«ç§’</td></tr></tbody></table><p><strong>æˆ‘ä»¬å°† Lighthouse ä¸­ Performance åˆ—å‡ºçš„æŒ‡æ ‡è¡¨ç°ï¼Œä¸å®˜æ–¹æŒ‡æ ‡æ ‡å‡†åšå¯¹æ¯”ï¼Œå¯ä»¥å‘ç°é¡µé¢å“ªäº›æŒ‡æ ‡è¶…å‡ºäº†èŒƒå›´</strong></p><h3 id="performance-å·¥å…·" tabindex="-1"><a class="header-anchor" href="#performance-å·¥å…·" aria-hidden="true">#</a> Performance å·¥å…·</h3><p>é€šè¿‡ Lighthouse æˆ‘ä»¬çŸ¥é“äº†é¡µé¢æ•´ä½“çš„æ€§èƒ½å¾—åˆ†ï¼Œä½†æ˜¯é¡µé¢æ‰“å¼€æ…¢æˆ–è€…å¡é¡¿çš„ç“¶é¢ˆåœ¨å“ªé‡Œï¼Ÿ</p><p>å…·ä½“æ˜¯<code>åŠ è½½èµ„æºæ…¢</code>ã€<code>domæ¸²æŸ“æ…¢</code>ã€è¿˜æ˜¯<code>jsæ‰§è¡Œæ…¢</code>å‘¢ï¼Ÿ</p><p>chrome æµè§ˆå™¨æä¾›çš„<code>performance</code>æ˜¯å¸¸ç”¨æ¥æŸ¥çœ‹ç½‘é¡µæ€§èƒ½çš„å·¥å…·ï¼Œé€šè¿‡è¯¥å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“é¡µé¢åœ¨æµè§ˆå™¨è¿è¡Œæ—¶çš„æ€§èƒ½è¡¨ç°</p><h4 id="performance-å¯»æ‰¾æ€§èƒ½ç“¶é¢ˆ" tabindex="-1"><a class="header-anchor" href="#performance-å¯»æ‰¾æ€§èƒ½ç“¶é¢ˆ" aria-hidden="true">#</a> Performance å¯»æ‰¾æ€§èƒ½ç“¶é¢ˆ</h4><p>æ‰“å¼€ Chrome æµè§ˆå™¨æ§åˆ¶å°ï¼Œé€‰æ‹©<code>Performance</code>é€‰é¡¹ï¼Œç‚¹å‡»å·¦ä¾§<code>reloadå›¾æ ‡</code></p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4ad95e570f854f62a5affae73899dfaf~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="perfromance1.gif"></p><p><strong>Performance é¢æ¿å¯ä»¥è®°å½•å’Œåˆ†æé¡µé¢åœ¨è¿è¡Œæ—¶çš„æ‰€æœ‰æ´»åŠ¨ï¼Œå¤§è‡´åˆ†ä¸ºä»¥ä¸‹ 4 ä¸ªåŒºåŸŸ</strong></p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/733069bb8c6d4d4c90b3df24230b0e92~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="performance2.png"></p><h4 id="performance-å„åŒºåŸŸåŠŸèƒ½ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#performance-å„åŒºåŸŸåŠŸèƒ½ä»‹ç»" aria-hidden="true">#</a> Performance å„åŒºåŸŸåŠŸèƒ½ä»‹ç»</h4><p><strong>1ï¼‰FPS</strong></p><p><strong>FPS(Frames Per Second)ï¼Œè¡¨ç¤ºæ¯ç§’ä¼ è¾“å¸§æ•°ï¼Œæ˜¯ç”¨æ¥åˆ†æ<code>é¡µé¢æ˜¯å¦å¡é¡¿</code>çš„ä¸€ä¸ªä¸»è¦æ€§èƒ½æŒ‡æ ‡</strong></p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ<code>ç»¿è‰²çš„é•¿æ¡è¶Šé«˜ï¼Œè¯´æ˜FPSè¶Šé«˜ï¼Œç”¨æˆ·ä½“éªŒè¶Šå¥½</code></p><p>å¦‚æœå‘ç°äº†<code>ä¸€ä¸ªçº¢è‰²çš„é•¿æ¡ï¼Œé‚£ä¹ˆå°±è¯´æ˜è¿™äº›å¸§å­˜åœ¨ä¸¥é‡é—®é¢˜</code>ï¼Œå¯èƒ½ä¼šé€ æˆé¡µé¢å¡é¡¿</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/daa866b933004dafa5c06c2cc915a35d~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="FPS.png"></p><p><strong>2ï¼‰NET</strong></p><p><strong>NET è®°å½•èµ„æºçš„ç­‰å¾…ã€ä¸‹è½½ã€æ‰§è¡Œæ—¶é—´ï¼Œæ¯æ¡å½©è‰²æ¨ªæ è¡¨ç¤ºä¸€ç§èµ„æº</strong></p><p>æ¨ªæ è¶Šé•¿ï¼Œæ£€ç´¢èµ„æºæ‰€éœ€çš„æ—¶é—´è¶Šé•¿ã€‚æ¯ä¸ªæ¨ªæ çš„æµ…è‰²éƒ¨åˆ†è¡¨ç¤ºç­‰å¾…æ—¶é—´ï¼ˆä»è¯·æ±‚èµ„æºåˆ°ç¬¬ä¸€ä¸ªå­—èŠ‚ä¸‹è½½å®Œæˆçš„æ—¶é—´ï¼‰</p><p>Network çš„é¢œè‰²è¯´æ˜ï¼šç™½è‰²è¡¨ç¤ºç­‰å¾…çš„é¢œè‰²ã€æµ…é»„è‰²è¡¨ç¤ºè¯·æ±‚çš„æ—¶é—´ã€æ·±é»„è‰²è¡¨ç¤ºä¸‹è½½çš„æ—¶é—´</p><p><strong>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰€æœ‰èµ„æºçš„åŠ è½½è¿‡ç¨‹ï¼Œæœ‰ä¸¤ä¸ªåœ°æ–¹é‡ç‚¹å…³æ³¨ï¼š</strong></p><p>1ï¼‰èµ„æºç­‰å¾…çš„æ—¶é—´æ˜¯å¦è¿‡é•¿ï¼ˆæ ‡å‡† â‰¤100msï¼‰</p><p>2ï¼‰èµ„æºæ–‡ä»¶ä½“ç§¯æ˜¯å¦è¿‡å¤§ï¼Œé€ æˆåŠ è½½å¾ˆæ…¢ï¼ˆå°±è¦è€ƒè™‘å¦‚ä½•æ‹†åˆ†è¯¥èµ„æºï¼‰</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d4f36cb8f3634b109b4737a48cb61429~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="net.png"></p><p><strong>3ï¼‰ç«ç„°å›¾</strong></p><p><strong>ç«ç„°å›¾ï¼ˆFlame Chartï¼‰ç”¨æ¥å¯è§†åŒ– CPU å †æ ˆä¿¡æ¯è®°å½•</strong></p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b2b5e759df83476f8f8238cbe66be66b~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="fire.png"> 1ï¼‰Network: è¡¨ç¤ºåŠ è½½äº†å“ªäº›èµ„æº 2ï¼‰Framesï¼šè¡¨ç¤ºæ¯å¹…å¸§çš„è¿è¡Œæƒ…å†µ 3ï¼‰Timings: è®°å½•é¡µé¢ä¸­å…³é”®æŒ‡æ ‡çš„æ—¶é—´ 4ï¼‰<code>Main:è¡¨ç¤ºä¸»çº¿ç¨‹ï¼ˆé‡ç‚¹ï¼Œä¸‹æ–‡ä¼šè¯¦ç»†ä»‹ç»ï¼‰</code> 5ï¼‰GPU:è¡¨ç¤º GPU å ç”¨æƒ…å†µ</p><p><strong>4ï¼‰ç»Ÿè®¡æ±‡æ€»</strong></p><p>Summary: è¡¨ç¤ºå„æŒ‡æ ‡æ—¶é—´å ç”¨ç»Ÿè®¡æŠ¥è¡¨</p><div class="language-makefile ext-makefile line-numbers-mode"><pre class="language-makefile"><code><span class="token target symbol">1ï¼‰Loading</span><span class="token punctuation">:</span> åŠ è½½æ—¶é—´
<span class="token target symbol">2ï¼‰Scripting</span><span class="token punctuation">:</span> jsè®¡ç®—æ—¶é—´
<span class="token target symbol">3ï¼‰Rendering</span><span class="token punctuation">:</span> æ¸²æŸ“æ—¶é—´
<span class="token target symbol">4ï¼‰Painting</span><span class="token punctuation">:</span> ç»˜åˆ¶æ—¶é—´
<span class="token target symbol">5ï¼‰Other</span><span class="token punctuation">:</span> å…¶ä»–æ—¶é—´
<span class="token target symbol">6ï¼‰Idle</span><span class="token punctuation">:</span> æµè§ˆå™¨é—²ç½®æ—¶é—´

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b034f036bde34c9f9667acaaa2db0b26~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="sum.jpg"></p><h4 id="performance-main-æ€§èƒ½ç“¶é¢ˆçš„çªç ´å£" tabindex="-1"><a class="header-anchor" href="#performance-main-æ€§èƒ½ç“¶é¢ˆçš„çªç ´å£" aria-hidden="true">#</a> Performance Main æ€§èƒ½ç“¶é¢ˆçš„çªç ´å£</h4><p><strong>Main è¡¨ç¤ºä¸»çº¿ç¨‹ï¼Œä¸»è¦è´Ÿè´£</strong></p><p>1ï¼‰Javascript çš„è®¡ç®—ä¸æ‰§è¡Œ 2ï¼‰CSS æ ·å¼è®¡ç®— 3ï¼‰Layout å¸ƒå±€è®¡ç®— 4ï¼‰å°†é¡µé¢å…ƒç´ ç»˜åˆ¶æˆä½å›¾ï¼ˆpaintï¼‰ï¼Œä¹Ÿå°±æ˜¯å…‰æ …åŒ–ï¼ˆRasterï¼‰</p><p><strong>å±•å¼€ Main,å¯ä»¥å‘ç°å¾ˆå¤š<code>çº¢è‰²ä¸‰è§’ï¼ˆlong taskï¼‰</code>ï¼Œè¿™äº›æ‰§è¡Œæ—¶é—´è¶…è¿‡ <code>50ms</code>å°±å±äº<code>é•¿ä»»åŠ¡</code>ï¼Œä¼šé€ æˆé¡µé¢å¡é¡¿ï¼Œä¸¥é‡æ—¶ä¼šé€ æˆé¡µé¢å¡æ­»</strong></p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3fff398aabc3492589d35bec1d095ab2~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="main.jpg"></p><p>å±•å¼€å…¶ä¸­ä¸€ä¸ªçº¢è‰²ä¸‰è§’ï¼ŒDevtools åœ¨<code>Summary</code>é¢æ¿é‡Œå±•ç¤ºäº†æ›´å¤šå…³äºè¿™ä¸ªäº‹ä»¶çš„ä¿¡æ¯</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1c5aeed2a25b426f94747c370329fb97~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="app.jpg"></p><p><strong>åœ¨ summary é¢æ¿é‡Œç‚¹å‡»<code>app.js</code>é“¾æ¥ï¼ŒDevtools å¯ä»¥è·³è½¬åˆ°éœ€è¦ä¼˜åŒ–çš„ä»£ç å¤„</strong></p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5777d8ab909943e18b960bf89adfc6e1~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="source.jpg"></p><p>ä¸‹é¢æˆ‘ä»¬éœ€è¦ç»“åˆè‡ªå·±çš„ä»£ç é€»è¾‘ï¼Œå»åˆ¤æ–­è¿™å—ä»£ç ä¸ºä»€ä¹ˆæ‰§è¡Œæ—¶é—´è¶…é•¿ï¼Ÿ</p><p><strong>å¦‚ä½•å»è§£å†³æˆ–ä¼˜åŒ–è¿™äº›<code>long task</code>ï¼Œä»è€Œè§£å†³å»é¡µé¢çš„æ€§èƒ½ç“¶é¢ˆ</strong></p><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F29879682" target="_blank" rel="noopener noreferrer">å…¨æ–° Chrome Devtool Performance ä½¿ç”¨æŒ‡å—<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://juejin.cn/post/6892003555818143752#heading-26" target="_blank" rel="noopener noreferrer">æ‰‹æŠŠæ‰‹å¸¦ä½ å…¥é—¨å‰ç«¯å·¥ç¨‹åŒ–â€”â€”è¶…è¯¦ç»†æ•™ç¨‹<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://link.juejin.cn/?target=https%3A%2F%2Fblog.csdn.net%2Fqq_38128179%2Farticle%2Fdetails%2F104491149" target="_blank" rel="noopener noreferrer">Chrome Devtool â€” Performance<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="æ€§èƒ½ç›‘æ§" tabindex="-1"><a class="header-anchor" href="#æ€§èƒ½ç›‘æ§" aria-hidden="true">#</a> æ€§èƒ½ç›‘æ§</h2><p>é¡¹ç›®å‘å¸ƒç”Ÿäº§åï¼Œç”¨æˆ·ä½¿ç”¨æ—¶çš„æ€§èƒ½å¦‚ä½•ï¼Œé¡µé¢æ•´ä½“çš„æ‰“å¼€é€Ÿåº¦æ˜¯å¤šå°‘ã€ç™½å±æ—¶é—´å¤šå°‘ï¼ŒFPã€FCPã€LCPã€FIDã€CLS ç­‰æŒ‡æ ‡ï¼Œè¦è®¾ç½®å¤šå¤§çš„é˜€å€¼å‘¢ï¼Œæ‰èƒ½æ»¡è¶³<code>TP50ã€TP90ã€TP99</code>çš„è¦æ±‚å‘¢ï¼Ÿ</p><blockquote><p>TP æŒ‡æ ‡: æ€»æ¬¡æ•° * æŒ‡æ ‡æ•° = å¯¹åº” TP æŒ‡æ ‡çš„å€¼ã€‚</p><p>è®¾ç½®æ¯ä¸ªæŒ‡æ ‡çš„é˜€å€¼ï¼Œæ¯”å¦‚ FP æŒ‡æ ‡ï¼Œè®¾ç½®é˜€å€¼ä¸º 1sï¼Œè¦æ±‚ Tp95ï¼Œå³ 95%çš„ FP æŒ‡æ ‡ï¼Œè¦åœ¨ 1s ä»¥ä¸‹ï¼Œå‰©ä½™ 5%çš„æŒ‡æ ‡è¶…è¿‡ 1s</p><p>TP50 ç›¸å¯¹è¾ƒä½ï¼ŒTP90 åˆ™æ¯”è¾ƒé«˜ï¼ŒTP99ï¼ŒTP999 åˆ™å¯¹æ€§èƒ½è¦æ±‚å¾ˆé«˜</p></blockquote><p>è¿™é‡Œå°±éœ€è¦æ€§èƒ½ç›‘æ§ï¼Œé‡‡é›†åˆ°ç”¨æˆ·çš„é¡µé¢æ•°æ®</p><h3 id="æ€§èƒ½æŒ‡æ ‡çš„è®¡ç®—" tabindex="-1"><a class="header-anchor" href="#æ€§èƒ½æŒ‡æ ‡çš„è®¡ç®—" aria-hidden="true">#</a> æ€§èƒ½æŒ‡æ ‡çš„è®¡ç®—</h3><p>å¸¸ç”¨çš„ä¸¤ç§æ–¹å¼ï¼š</p><p><strong>æ–¹å¼ä¸€ï¼šé€šè¿‡ web-vitals å®˜æ–¹åº“è¿›è¡Œè®¡ç®—</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> onLCP<span class="token punctuation">,</span> onFID<span class="token punctuation">,</span> onCLS <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;web-vitals&quot;</span><span class="token punctuation">;</span>

<span class="token function">onCLS</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">onFID</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">onLCP</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ–¹å¼äºŒï¼šé€šè¿‡<code>performance api</code>è¿›è¡Œè®¡ç®—</strong></p><p>ä¸‹é¢èŠä¸€ä¸‹ performance api æ¥è®¡ç®—å„ç§æŒ‡æ ‡</p><p>æ‰“å¼€ä»»æ„ç½‘é¡µï¼Œåœ¨æ§åˆ¶å°ä¸­è¾“å…¥ performance å›è½¦ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ç³»åˆ—çš„å‚æ•°ï¼Œ</p><h3 id="performance-timing" tabindex="-1"><a class="header-anchor" href="#performance-timing" aria-hidden="true">#</a> performance.timing</h3><p>é‡ç‚¹çœ‹ä¸‹<code>performance.timing</code>ï¼Œè®°å½•äº†é¡µé¢çš„å„ä¸ªå…³é”®æ—¶é—´ç‚¹</p><table><thead><tr><th>æ—¶é—´</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>navigationStart</code></td><td>ï¼ˆå¯ä»¥ç†è§£ä¸ºè¯¥é¡µé¢çš„èµ·å§‹æ—¶é—´ï¼‰åŒä¸€ä¸ªæµè§ˆå™¨ä¸Šä¸‹æ–‡çš„ä¸Šä¸€ä¸ªæ–‡æ¡£å¸è½½ç»“æŸæ—¶çš„æ—¶é—´æˆ³ï¼Œå¦‚æœæ²¡æœ‰ä¸Šä¸€ä¸ªæ–‡æ¡£ï¼Œè¿™ä¸ªå€¼ä¼šå’Œ fetchStart ç›¸åŒ</td></tr><tr><td>unloadEventStart</td><td>unload äº‹ä»¶æŠ›å‡ºæ—¶çš„æ—¶é—´æˆ³,å¦‚æœæ²¡æœ‰ä¸Šä¸€ä¸ªæ–‡æ¡£ï¼Œè¿™ä¸ªå€¼ä¼šæ˜¯ 0</td></tr><tr><td>unloadEventEnd</td><td>unload äº‹ä»¶å¤„ç†å®Œæˆçš„æ—¶é—´æˆ³,å¦‚æœæ²¡æœ‰ä¸Šä¸€ä¸ªæ–‡æ¡£ï¼Œè¿™ä¸ªå€¼ä¼šæ˜¯ 0</td></tr><tr><td>redirectStart</td><td>ç¬¬ä¸€ä¸ª HTTP é‡å®šå‘å¼€å§‹æ—¶çš„æ—¶é—´æˆ³ï¼Œæ²¡æœ‰é‡å®šå‘æˆ–è€…é‡å®šå‘ä¸­çš„ä¸åŒæºï¼Œè¿™ä¸ªå€¼ä¼šæ˜¯ 0</td></tr><tr><td>redirectEnd</td><td>æœ€åä¸€ä¸ª HTTP é‡å®šå‘å¼€å§‹æ—¶çš„æ—¶é—´æˆ³ï¼Œæ²¡æœ‰é‡å®šå‘æˆ–è€…é‡å®šå‘ä¸­çš„ä¸åŒæºï¼Œè¿™ä¸ªå€¼ä¼šæ˜¯ 0</td></tr><tr><td>fetchStart</td><td>æµè§ˆå™¨å‡†å¤‡å¥½ä½¿ç”¨ HTTP è¯·æ±‚æ¥è·å–æ–‡æ¡£çš„æ—¶é—´æˆ³ã€‚å‘é€åœ¨æ£€æŸ¥ç¼“å­˜ä¹‹å‰</td></tr><tr><td>domainLookupStart</td><td>åŸŸåæŸ¥è¯¢å¼€å§‹çš„æ—¶é—´æˆ³ï¼Œå¦‚æœä½¿ç”¨äº†æŒç»­è¿æ¥æˆ–è€…ç¼“å­˜ï¼Œåˆ™ä¸ fetchStart ä¸€è‡´</td></tr><tr><td>domainLookupEnd</td><td>åŸŸåæŸ¥è¯¢ç»“æŸçš„æ—¶é—´æˆ³ï¼Œå¦‚æœä½¿ç”¨äº†æŒç»­è¿æ¥æˆ–è€…ç¼“å­˜ï¼Œåˆ™ä¸ fetchStart ä¸€è‡´</td></tr><tr><td>connectStart</td><td>HTTP è¯·æ±‚å¼€å§‹å‘æœåŠ¡å™¨å‘é€æ—¶çš„æ—¶é—´æˆ³ï¼Œå¦‚æœä½¿ç”¨äº†æŒç»­è¿æ¥ï¼Œåˆ™ä¸ fetchStart ä¸€è‡´</td></tr><tr><td>connectEnd</td><td>æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´è¿æ¥å»ºç«‹ï¼ˆæ‰€æœ‰æ¡æ‰‹å’Œè®¤è¯è¿‡ç¨‹å…¨éƒ¨ç»“æŸï¼‰çš„æ—¶é—´æˆ³ï¼Œå¦‚æœä½¿ç”¨äº†æŒç»­è¿æ¥ï¼Œåˆ™ä¸ fetchStart ä¸€è‡´</td></tr><tr><td>secureConnectionStart</td><td>æµè§ˆå™¨ä¸æœåŠ¡å™¨å¼€å§‹å®‰å…¨è¿æ¥æ¡æ‰‹æ—¶çš„æ—¶é—´æˆ³ï¼Œå¦‚æœå½“å‰ç½‘é¡µä¸éœ€è¦å®‰å…¨è¿æ¥ï¼Œè¿™ä¸ªå€¼ä¼šæ˜¯ 0</td></tr><tr><td><code>requestStart</code></td><td>æµè§ˆå™¨å‘æœåŠ¡å™¨å‘å‡º HTTP è¯·æ±‚çš„æ—¶é—´æˆ³</td></tr><tr><td><code>responseStart</code></td><td>æµè§ˆå™¨ä»æœåŠ¡å™¨æ”¶åˆ°ï¼ˆæˆ–ä»æœ¬åœ°ç¼“å­˜è¯»å–ï¼‰ç¬¬ä¸€ä¸ªå­—èŠ‚æ—¶çš„æ—¶é—´æˆ³</td></tr><tr><td>responseEnd</td><td>æµè§ˆå™¨ä»æœåŠ¡å™¨æ”¶åˆ°ï¼ˆæˆ–ä»æœ¬åœ°ç¼“å­˜è¯»å–ï¼‰æœ€åä¸€ä¸ªå­—èŠ‚æ—¶ï¼ˆå¦‚æœåœ¨æ­¤ä¹‹å‰ HTTP è¿æ¥å·²ç»å…³é—­ï¼Œåˆ™è¿”å›å…³é—­æ—¶ï¼‰çš„æ—¶é—´æˆ³</td></tr><tr><td><code>domLoading</code></td><td>å½“å‰ç½‘é¡µ DOM ç»“æ„å¼€å§‹è§£ææ—¶çš„æ—¶é—´æˆ³</td></tr><tr><td>domInteractive</td><td>å½“å‰ç½‘é¡µ DOM ç»“æ„è§£æå®Œæˆï¼Œå¼€å§‹åŠ è½½å†…åµŒèµ„æºæ—¶çš„æ—¶é—´æˆ³</td></tr><tr><td>domContentLoadedEventStart</td><td>éœ€è¦è¢«æ‰§è¡Œçš„è„šæœ¬å·²ç»è¢«è§£æçš„æ—¶é—´æˆ³</td></tr><tr><td>domContentLoadedEventEnd</td><td>éœ€è¦ç«‹å³æ‰§è¡Œçš„è„šæœ¬å·²ç»è¢«æ‰§è¡Œçš„æ—¶é—´æˆ³</td></tr><tr><td><code>domComplete</code></td><td>å½“å‰æ–‡æ¡£è§£æå®Œæˆçš„æ—¶é—´æˆ³</td></tr><tr><td>loadEventStart</td><td>load äº‹ä»¶è¢«å‘é€æ—¶çš„æ—¶é—´æˆ³ï¼Œå¦‚æœè¿™ä¸ªäº‹ä»¶è¿˜æœªè¢«å‘é€ï¼Œå®ƒçš„å€¼å°†ä¼šæ˜¯ 0</td></tr><tr><td><code>loadEventEnd</code></td><td>load äº‹ä»¶ç»“æŸæ—¶çš„æ—¶é—´æˆ³ï¼Œå¦‚æœè¿™ä¸ªäº‹ä»¶è¿˜æœªè¢«å‘é€ï¼Œå®ƒçš„å€¼å°†ä¼šæ˜¯ 0</td></tr></tbody></table><h3 id="ç™½å±æ—¶é—´-fp" tabindex="-1"><a class="header-anchor" href="#ç™½å±æ—¶é—´-fp" aria-hidden="true">#</a> ç™½å±æ—¶é—´ FP</h3><p>ç™½å±æ—¶é—´ FPï¼ˆFirst Paintï¼‰æŒ‡çš„æ˜¯ä»ç”¨æˆ·è¾“å…¥ url çš„æ—¶åˆ»å¼€å§‹è®¡ç®—ï¼Œä¸€ç›´åˆ°é¡µé¢æœ‰å†…å®¹å±•ç¤ºå‡ºæ¥çš„æ—¶é—´èŠ‚ç‚¹ï¼Œ<code>æ ‡å‡†â‰¤2s</code></p><p><strong>è¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬ dns æŸ¥è¯¢ã€å»ºç«‹ tcp è¿æ¥ã€å‘é€ http è¯·æ±‚ã€è¿”å› html æ–‡æ¡£ã€html æ–‡æ¡£è§£æ</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">entryHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> entry <span class="token keyword">of</span> list<span class="token punctuation">.</span><span class="token function">getEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&#39;first-paint&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            observer<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
       <span class="token comment">// å…¶ä¸­startTime å°±æ˜¯ç™½å±æ—¶é—´</span>
       <span class="token keyword">let</span> <span class="token constant">FP</span> <span class="token operator">=</span> entry<span class="token punctuation">.</span>startTime<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PerformanceObserver</span><span class="token punctuation">(</span>entryHandler<span class="token punctuation">)</span>
<span class="token comment">// buffered å±æ€§è¡¨ç¤ºæ˜¯å¦è§‚å¯Ÿç¼“å­˜æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´è§‚å¯Ÿä»£ç æ·»åŠ æ—¶æœºæ¯”äº‹ä»¶è§¦å‘æ—¶æœºæ™šä¹Ÿæ²¡å…³ç³»ã€‚</span>
observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;paint&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">buffered</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é¦–æ¬¡å†…å®¹ç»˜åˆ¶æ—¶é—´-fcp" tabindex="-1"><a class="header-anchor" href="#é¦–æ¬¡å†…å®¹ç»˜åˆ¶æ—¶é—´-fcp" aria-hidden="true">#</a> é¦–æ¬¡å†…å®¹ç»˜åˆ¶æ—¶é—´ FCP</h3><p>FCP(First Contentful Paint) è¡¨ç¤ºé¡µé¢ä»»ä¸€éƒ¨åˆ†æ¸²æŸ“å®Œæˆçš„æ—¶é—´ï¼Œ<code>æ ‡å‡†â‰¤1s</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// è®¡ç®—æ–¹å¼ï¼š</span>
<span class="token keyword">const</span> <span class="token function-variable function">entryHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> entry <span class="token keyword">of</span> list<span class="token punctuation">.</span><span class="token function">getEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&quot;first-contentful-paint&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      observer<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// è®¡ç®—é¦–æ¬¡å†…å®¹ç»˜åˆ¶æ—¶é—´</span>
    <span class="token keyword">let</span> <span class="token constant">FCP</span> <span class="token operator">=</span> entry<span class="token punctuation">.</span>startTime<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PerformanceObserver</span><span class="token punctuation">(</span>entryHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;paint&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">buffered</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æœ€å¤§å†…å®¹ç»˜åˆ¶æ—¶é—´-lcp" tabindex="-1"><a class="header-anchor" href="#æœ€å¤§å†…å®¹ç»˜åˆ¶æ—¶é—´-lcp" aria-hidden="true">#</a> æœ€å¤§å†…å®¹ç»˜åˆ¶æ—¶é—´ LCP</h3><p>LCP(Largest Contentful Paint)è¡¨ç¤ºæœ€å¤§å†…å®¹ç»˜åˆ¶æ—¶é—´ï¼Œ<code>æ ‡å‡†â‰¤2 ç§’</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// è®¡ç®—æ–¹å¼ï¼š</span>
<span class="token keyword">const</span> <span class="token function-variable function">entryHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    observer<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> entry <span class="token keyword">of</span> list<span class="token punctuation">.</span><span class="token function">getEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æœ€å¤§å†…å®¹ç»˜åˆ¶æ—¶é—´</span>
    <span class="token keyword">let</span> <span class="token constant">LCP</span> <span class="token operator">=</span> entry<span class="token punctuation">.</span>startTime<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PerformanceObserver</span><span class="token punctuation">(</span>entryHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;largest-contentful-paint&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">buffered</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç´¯ç§¯å¸ƒå±€åç§»å€¼-cls" tabindex="-1"><a class="header-anchor" href="#ç´¯ç§¯å¸ƒå±€åç§»å€¼-cls" aria-hidden="true">#</a> ç´¯ç§¯å¸ƒå±€åç§»å€¼ CLS</h3><p>CLS(Cumulative Layout Shift) è¡¨ç¤ºç´¯ç§¯å¸ƒå±€åç§»ï¼Œ<code>æ ‡å‡†â‰¤0.1</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// clsä¸ºç´¯ç§¯å¸ƒå±€åç§»å€¼</span>
<span class="token keyword">let</span> cls <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">PerformanceObserver</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">entryList</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> entry <span class="token keyword">of</span> entryList<span class="token punctuation">.</span><span class="token function">getEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>entry<span class="token punctuation">.</span>hadRecentInput<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      cls <span class="token operator">+=</span> entry<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;layout-shift&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">buffered</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é¦–å­—èŠ‚æ—¶é—´-ttfb" tabindex="-1"><a class="header-anchor" href="#é¦–å­—èŠ‚æ—¶é—´-ttfb" aria-hidden="true">#</a> é¦–å­—èŠ‚æ—¶é—´ TTFB</h3><p>å¹³å¸¸æ‰€è¯´çš„<code>TTFB</code>ï¼Œé»˜è®¤æŒ‡å¯¼èˆªè¯·æ±‚çš„<code>TTFB</code></p><p>å¯¼èˆªè¯·æ±‚ï¼šåœ¨æµè§ˆå™¨åˆ‡æ¢é¡µé¢æ—¶åˆ›å»ºï¼Œä»å¯¼èˆªå¼€å§‹åˆ°è¯¥è¯·æ±‚è¿”å› HTML</p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token key attr-name">window.onload</span> <span class="token punctuation">=</span> <span class="token value attr-value">function () {</span>
  // é¦–å­—èŠ‚æ—¶é—´
  <span class="token key attr-name">let TTFB</span> <span class="token punctuation">=</span> <span class="token value attr-value">responseStart - navigationStart;</span>
};

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ-fid" tabindex="-1"><a class="header-anchor" href="#é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ-fid" aria-hidden="true">#</a> é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ FID</h3><p>FIDï¼ˆfirst input delayï¼‰é¦–æ¬¡è¾“å…¥å»¶è¿Ÿï¼Œæ ‡å‡†æ˜¯ç”¨æˆ·è§¦å‘åï¼Œæµè§ˆå™¨çš„å“åº”æ—¶é—´ï¼Œ <code>æ ‡å‡†â‰¤100ms</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">PerformanceObserver</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">entryList</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> entry <span class="token keyword">of</span> entryList<span class="token punctuation">.</span><span class="token function">getEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è®¡ç®—é¦–æ¬¡è¾“å…¥å»¶è¿Ÿæ—¶é—´</span>
    <span class="token keyword">const</span> <span class="token constant">FID</span> <span class="token operator">=</span> entry<span class="token punctuation">.</span>processingStart <span class="token operator">-</span> entry<span class="token punctuation">.</span>startTime<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;first-input&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">buffered</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>FID æ¨èä½¿ç”¨ web-vitals åº“ï¼Œå› ä¸ºå®˜æ–¹å…¼å®¹äº†å¾ˆå¤šåœºæ™¯</p><h3 id="é¦–é¡µåŠ è½½æ—¶é—´" tabindex="-1"><a class="header-anchor" href="#é¦–é¡µåŠ è½½æ—¶é—´" aria-hidden="true">#</a> é¦–é¡µåŠ è½½æ—¶é—´</h3><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token key attr-name">window.onload</span> <span class="token punctuation">=</span> <span class="token value attr-value">function () {</span>
  // é¦–é¡µåŠ è½½æ—¶é—´
  <span class="token key attr-name">// domComplete æ˜¯documentçš„readyState</span> <span class="token punctuation">=</span> <span class="token value attr-value">completeï¼ˆå®Œæˆï¼‰çš„çŠ¶æ€</span>
  <span class="token key attr-name">let firstScreenTime</span> <span class="token punctuation">=</span> <span class="token value attr-value">performance.timing.domComplete - performance.timing.navigationStart;</span>
};

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é¦–å±åŠ è½½æ—¶é—´" tabindex="-1"><a class="header-anchor" href="#é¦–å±åŠ è½½æ—¶é—´" aria-hidden="true">#</a> é¦–å±åŠ è½½æ—¶é—´</h3><p><strong>é¦–å±åŠ è½½æ—¶é—´å’Œé¦–é¡µåŠ è½½æ—¶é—´ä¸ä¸€æ ·</strong>ï¼Œé¦–å±æŒ‡çš„æ˜¯ç”¨æˆ·çœ‹åˆ°å±å¹•å†…é¡µé¢æ¸²æŸ“å®Œæˆçš„æ—¶é—´</p><p>æ¯”å¦‚é¦–é¡µå¾ˆé•¿éœ€è¦å¥½å‡ å±å±•ç¤ºï¼Œè¿™ç§æƒ…å†µä¸‹å±å¹•ä»¥å¤–çš„å…ƒç´ ä¸è€ƒè™‘åœ¨å†…</p><p><strong>è®¡ç®—é¦–å±åŠ è½½æ—¶é—´æµç¨‹</strong></p><p>1ï¼‰åˆ©ç”¨<code>MutationObserver</code>ç›‘å¬<code>document</code>å¯¹è±¡ï¼Œæ¯å½“ dom å˜åŒ–æ—¶è§¦å‘è¯¥äº‹ä»¶</p><p>2ï¼‰åˆ¤æ–­ç›‘å¬çš„ dom æ˜¯å¦åœ¨é¦–å±å†…ï¼Œå¦‚æœåœ¨é¦–å±å†…ï¼Œå°†è¯¥ dom æ”¾åˆ°æŒ‡å®šçš„æ•°ç»„ä¸­ï¼Œè®°å½•ä¸‹å½“å‰ dom å˜åŒ–çš„æ—¶é—´ç‚¹</p><p>3ï¼‰åœ¨ MutationObserver çš„ callback å‡½æ•°ä¸­ï¼Œé€šè¿‡é˜²æŠ–å‡½æ•°ï¼Œç›‘å¬<code>document.readyState</code>çŠ¶æ€çš„å˜åŒ–</p><p>4ï¼‰å½“<code>document.readyState === &#39;complete&#39;</code>ï¼Œåœæ­¢å®šæ—¶å™¨å’Œ å–æ¶ˆå¯¹ document çš„ç›‘å¬</p><p>5ï¼‰éå†å­˜æ”¾ dom çš„æ•°ç»„ï¼Œæ‰¾å‡ºæœ€åå˜åŒ–èŠ‚ç‚¹çš„æ—¶é—´ï¼Œç”¨è¯¥æ—¶é—´ç‚¹å‡å»<code>performance.timing.navigationStart</code> å¾—å‡ºé¦–å±çš„åŠ è½½æ—¶é—´</p><p><strong>å®šä¹‰ performance.js</strong></p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code>// firstScreenPaintä¸ºé¦–å±åŠ è½½æ—¶é—´çš„å˜é‡
<span class="token key attr-name">let firstScreenPaint</span> <span class="token punctuation">=</span> <span class="token value attr-value">0;</span>
// é¡µé¢æ˜¯å¦æ¸²æŸ“å®Œæˆ
<span class="token key attr-name">let isOnLoaded</span> <span class="token punctuation">=</span> <span class="token value attr-value">false;</span>
let timer;
let observer;

<span class="token key attr-name">// å®šæ—¶å™¨å¾ªç¯ç›‘å¬domçš„å˜åŒ–ï¼Œå½“document.readyState</span> <span class="token punctuation">=</span><span class="token value attr-value">== &#39;complete&#39;æ—¶ï¼Œåœæ­¢ç›‘å¬</span>
function checkDOMChange(callback) {
  cancelAnimationFrame(timer);
  <span class="token key attr-name">timer</span> <span class="token punctuation">=</span> <span class="token value attr-value">requestAnimationFrame(() =&gt; {</span>
    <span class="token key attr-name">if (document.readyState</span> <span class="token punctuation">=</span><span class="token value attr-value">== &#39;complete&#39;) {</span>
      <span class="token key attr-name">isOnLoaded</span> <span class="token punctuation">=</span> <span class="token value attr-value">true;</span>
    }
    if (isOnLoaded) {
      // å–æ¶ˆç›‘å¬
      observer &amp;&amp; observer.disconnect();

      <span class="token key attr-name">// document.readyState</span> <span class="token punctuation">=</span><span class="token value attr-value">== &#39;complete&#39;æ—¶ï¼Œè®¡ç®—é¦–å±æ¸²æŸ“æ—¶é—´</span>
      <span class="token key attr-name">firstScreenPaint</span> <span class="token punctuation">=</span> <span class="token value attr-value">getRenderTime();</span>
      <span class="token key attr-name">entries</span> <span class="token punctuation">=</span> <span class="token value attr-value">null;</span>

      // æ‰§è¡Œç”¨æˆ·ä¼ å…¥çš„callbackå‡½æ•°
      callback &amp;&amp; callback(firstScreenPaint);
    } else {
      checkDOMChange();
    }
  });
}
function getRenderTime() {
  <span class="token key attr-name">let startTime</span> <span class="token punctuation">=</span> <span class="token value attr-value">0;</span>
  <span class="token key attr-name">entries.forEach((entry)</span> <span class="token punctuation">=</span><span class="token value attr-value">&gt; {</span>
    if (entry.startTime &gt; startTime) {
      <span class="token key attr-name">startTime</span> <span class="token punctuation">=</span> <span class="token value attr-value">entry.startTime;</span>
    }
  });
  // performance.timing.navigationStart é¡µé¢çš„èµ·å§‹æ—¶é—´
  return startTime - performance.timing.navigationStart;
}
<span class="token key attr-name">const viewportWidth</span> <span class="token punctuation">=</span> <span class="token value attr-value">window.innerWidth;</span>
<span class="token key attr-name">const viewportHeight</span> <span class="token punctuation">=</span> <span class="token value attr-value">window.innerHeight;</span>
// dom å¯¹è±¡æ˜¯å¦åœ¨å±å¹•å†…
function isInScreen(dom) {
  <span class="token key attr-name">const rectInfo</span> <span class="token punctuation">=</span> <span class="token value attr-value">dom.getBoundingClientRect();</span>
  if (rectInfo.left &lt; viewportWidth &amp;&amp; rectInfo.top &lt; viewportHeight) {
    return true;
  }
  return false;
}
<span class="token key attr-name">let entries</span> <span class="token punctuation">=</span> <span class="token value attr-value">[];</span>

// å¤–éƒ¨é€šè¿‡callback æ‹¿åˆ°é¦–å±åŠ è½½æ—¶é—´
export default function observeFirstScreenPaint(callback) {
  <span class="token key attr-name">const ignoreDOMList</span> <span class="token punctuation">=</span> <span class="token value attr-value">[&#39;STYLE&#39;, &#39;SCRIPT&#39;, &#39;LINK&#39;];</span>
  <span class="token key attr-name">observer</span> <span class="token punctuation">=</span> <span class="token value attr-value">new window.MutationObserver((mutationList) =&gt; {</span>
    checkDOMChange(callback);
    <span class="token key attr-name">const entry</span> <span class="token punctuation">=</span> <span class="token value attr-value">{ children: [] };</span>
    for (const mutation of mutationList) {
      if (mutation.addedNodes.length &amp;&amp; isInScreen(mutation.target)) {
        for (const node of mutation.addedNodes) {
          // å¿½ç•¥æ‰ä»¥ä¸Šæ ‡ç­¾çš„å˜åŒ–
          <span class="token key attr-name">if (node.nodeType</span> <span class="token punctuation">=</span><span class="token value attr-value">== 1 &amp;&amp; !ignoreDOMList.includes(node.tagName) &amp;&amp; isInScreen(node)) {</span>
            entry.children.push(node);
          }
        }
      }
    }

    if (entry.children.length) {
      entries.push(entry);
      <span class="token key attr-name">entry.startTime</span> <span class="token punctuation">=</span> <span class="token value attr-value">new Date().getTime();</span>
    }
  });
  observer.observe(document, {
    childList: true, // ç›‘å¬æ·»åŠ æˆ–åˆ é™¤å­èŠ‚ç‚¹
    subtree: true, // ç›‘å¬æ•´ä¸ªå­æ ‘
    characterData: true, // ç›‘å¬å…ƒç´ çš„æ–‡æœ¬æ˜¯å¦å˜åŒ–
    attributes: true // ç›‘å¬å…ƒç´ çš„å±æ€§æ˜¯å¦å˜åŒ–
  });
}


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¤–éƒ¨å¼•å…¥ä½¿ç”¨</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> observeFirstScreenPaint <span class="token keyword">from</span> <span class="token string">&quot;./performance&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// é€šè¿‡å›è°ƒå‡½æ•°ï¼Œæ‹¿åˆ°é¦–å±åŠ è½½æ—¶é—´</span>
<span class="token function">observeFirstScreenPaint</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token string">&quot;é¦–å±åŠ è½½æ—¶é—´&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="dom-æ¸²æŸ“æ—¶é—´å’Œ-window-onload-æ—¶é—´" tabindex="-1"><a class="header-anchor" href="#dom-æ¸²æŸ“æ—¶é—´å’Œ-window-onload-æ—¶é—´" aria-hidden="true">#</a> DOM æ¸²æŸ“æ—¶é—´å’Œ window.onload æ—¶é—´</h3><p>DOM çš„æ¸²æŸ“çš„æ—¶é—´å’Œ window.onload æ‰§è¡Œçš„æ—¶é—´ä¸æ˜¯ä¸€å›äº‹</p><p><strong>DOM æ¸²æŸ“çš„æ—¶é—´</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>DOMæ¸²æŸ“çš„æ—¶é—´ =  performance.timing.domComplete - performance.timing.domLoading

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>window.onload è¦æ™šäº DOM çš„æ¸²æŸ“ï¼Œwindow.onload æ˜¯é¡µé¢ä¸­æ‰€æœ‰çš„èµ„æºéƒ½åŠ è½½åæ‰æ‰§è¡Œï¼ˆåŒ…æ‹¬å›¾ç‰‡çš„åŠ è½½ï¼‰</p><p><strong>window.onload çš„æ—¶é—´</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>window<span class="token punctuation">.</span>onloadçš„æ—¶é—´ <span class="token operator">=</span> performance<span class="token punctuation">.</span>timing<span class="token punctuation">.</span>loadEventEnd<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="è®¡ç®—èµ„æºçš„ç¼“å­˜å‘½ä¸­ç‡" tabindex="-1"><a class="header-anchor" href="#è®¡ç®—èµ„æºçš„ç¼“å­˜å‘½ä¸­ç‡" aria-hidden="true">#</a> è®¡ç®—èµ„æºçš„ç¼“å­˜å‘½ä¸­ç‡</h3><p><strong>ç¼“å­˜å‘½ä¸­ç‡ï¼šä»ç¼“å­˜ä¸­å¾—åˆ°æ•°æ®çš„è¯·æ±‚æ•°ä¸æ‰€æœ‰è¯·æ±‚æ•°çš„æ¯”ç‡</strong></p><p>ç†æƒ³çŠ¶æ€æ˜¯ç¼“å­˜å‘½ä¸­ç‡è¶Šé«˜è¶Šå¥½ï¼Œç¼“å­˜å‘½ä¸­ç‡è¶Šé«˜è¯´æ˜ç½‘ç«™çš„ç¼“å­˜ç­–ç•¥è¶Šæœ‰æ•ˆï¼Œç”¨æˆ·æ‰“å¼€é¡µé¢çš„é€Ÿåº¦ä¹Ÿä¼šç›¸åº”æé«˜</p><p><strong>å¦‚ä½•åˆ¤æ–­è¯¥èµ„æºæ˜¯å¦å‘½ä¸­ç¼“å­˜ï¼Ÿ</strong></p><p>1ï¼‰é€šè¿‡<code>performance.getEntries()</code>æ‰¾åˆ°æ‰€æœ‰èµ„æºçš„ä¿¡æ¯</p><p>2ï¼‰åœ¨è¿™äº›èµ„æºå¯¹è±¡ä¸­æœ‰ä¸€ä¸ª<code>transferSize</code> å­—æ®µï¼Œå®ƒè¡¨ç¤ºè·å–èµ„æºçš„å¤§å°ï¼ŒåŒ…æ‹¬å“åº”å¤´å­—æ®µå’Œå“åº”æ•°æ®çš„å¤§å°</p><p>3ï¼‰å¦‚æœè¿™ä¸ªå€¼ä¸º 0ï¼Œè¯´æ˜æ˜¯ä»ç¼“å­˜ä¸­ç›´æ¥è¯»å–çš„ï¼ˆå¼ºåˆ¶ç¼“å­˜ï¼‰</p><p>4ï¼‰å¦‚æœè¿™ä¸ªå€¼ä¸ä¸º 0ï¼Œä½†æ˜¯<code>encodedBodySize</code> å­—æ®µä¸º 0ï¼Œè¯´æ˜å®ƒèµ°çš„æ˜¯åå•†ç¼“å­˜ï¼ˆ<code>encodedBodySize è¡¨ç¤ºè¯·æ±‚å“åº”æ•°æ® body çš„å¤§å°</code>ï¼‰</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">isCache</span><span class="token punctuation">(</span><span class="token parameter">entry</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç›´æ¥ä»ç¼“å­˜è¯»å–æˆ– 304</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    entry<span class="token punctuation">.</span>transferSize <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">||</span>
    <span class="token punctuation">(</span>entry<span class="token punctuation">.</span>transferSize <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> entry<span class="token punctuation">.</span>encodedBodySize <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å°†<code>æ‰€æœ‰å‘½ä¸­ç¼“å­˜çš„æ•°æ® / æ€»æ•°æ®</code> å°±èƒ½å¾—å‡º<code>ç¼“å­˜å‘½ä¸­ç‡</code></strong></p><h3 id="æ€§èƒ½æ•°æ®ä¸ŠæŠ¥" tabindex="-1"><a class="header-anchor" href="#æ€§èƒ½æ•°æ®ä¸ŠæŠ¥" aria-hidden="true">#</a> æ€§èƒ½æ•°æ®ä¸ŠæŠ¥</h3><p><strong>ä¸ŠæŠ¥æ–¹å¼</strong></p><p>ä¸€èˆ¬ä½¿ç”¨<code>å›¾ç‰‡æ‰“ç‚¹</code>çš„æ–¹å¼ï¼Œé€šè¿‡åŠ¨æ€åˆ›å»º img æ ‡ç­¾çš„æ–¹å¼ï¼Œnew å‡ºåƒç´ ä¸º<code>1x1 px</code>çš„<code>gif Image</code>ï¼ˆgif ä½“ç§¯æœ€å°ï¼‰å¯¹è±¡å°±èƒ½å‘èµ·è¯·æ±‚ï¼Œå¯ä»¥è·¨åŸŸã€ä¸éœ€è¦ç­‰å¾…æœåŠ¡å™¨è¿”å›æ•°æ®</p><p><strong>ä¸ŠæŠ¥æ—¶æœº</strong></p><p>å¯ä»¥åˆ©ç”¨<code>requestIdleCallback</code>ï¼Œæµè§ˆå™¨ç©ºé—²çš„æ—¶å€™ä¸ŠæŠ¥ï¼Œå¥½å¤„æ˜¯ï¼šä¸é˜»å¡å…¶ä»–æµç¨‹çš„è¿›è¡Œ</p><p>å¦‚æœæµè§ˆå™¨ä¸æ”¯æŒè¯¥<code>requestIdleCallback</code>ï¼Œå°±ä½¿ç”¨<code>setTimeout</code>ä¸ŠæŠ¥</p><div class="language-scss ext-scss line-numbers-mode"><pre class="language-scss"><code><span class="token comment">// ä¼˜å…ˆä½¿ç”¨requestIdleCallback</span>
if <span class="token punctuation">(</span>window.requestIdleCallback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window.<span class="token function">requestIdleCallback</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token selector">=&gt; </span><span class="token punctuation">{</span>
      <span class="token comment">// è·å–æµè§ˆå™¨çš„å‰©ä½™ç©ºé—²æ—¶é—´</span>
      console.<span class="token function">log</span><span class="token punctuation">(</span>deadline.<span class="token function">timeRemaining</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">report</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸ŠæŠ¥æ•°æ®</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// timeoutè®¾ç½®ä¸º1000ï¼Œå¦‚æœåœ¨1000mså†…æ²¡æœ‰æ‰§è¡Œè¯¥åè°ƒï¼Œåœ¨ä¸‹æ¬¡ç©ºé—²æ—¶é—´æ—¶ï¼Œcallbackä¼šå¼ºåˆ¶æ‰§è¡Œ</span>
    <span class="token punctuation">{</span> <span class="token property">timeout</span><span class="token punctuation">:</span> 1000 <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token selector">else </span><span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token selector">=&gt; </span><span class="token punctuation">{</span>
    <span class="token function">report</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸ŠæŠ¥æ•°æ®</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å†…å­˜åˆ†æä¸ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#å†…å­˜åˆ†æä¸ä¼˜åŒ–" aria-hidden="true">#</a> å†…å­˜åˆ†æä¸ä¼˜åŒ–</h2><p>æ€§èƒ½åˆ†æå¾ˆç«ï¼Œä½†å†…å­˜åˆ†æç›¸æ¯”å°±ä½è°ƒå¾ˆå¤šäº†</p><p>ä¸¾ä¸€ä¸ªæˆ‘ä¹‹å‰é‡åˆ°çš„æƒ…å†µï¼Œå®¢æˆ·ç”µè„‘é…ç½®ä½ï¼Œæ‰“å¼€å…¬å¸å¼€å‘çš„é¡µé¢ï¼Œç»å¸¸å‡ºç°é¡µé¢å´©æºƒ</p><p>è°ƒæŸ¥åŸå› ï¼Œå°±æ˜¯å› ä¸ºé¡µé¢å†…å­˜å ç”¨å¤ªå¤§ï¼Œå®¢æˆ·æ‰“å¼€å‡ ä¸ªé¡µé¢åï¼Œå†…å­˜ç›´æ¥æ‹‰æ»¡ï¼Œä¹Ÿæ˜¯ç»è¿‡è¿™ä»¶äº‹ï¼Œæˆ‘å¼€å§‹é‡è§†å†…å­˜åˆ†æä¸ä¼˜åŒ–</p><p>ä¸‹é¢ï¼ŒèŠä¸€èŠå†…å­˜è¿™å—æœ‰å“ªäº›çŸ¥è¯†</p><h3 id="memory-å·¥å…·" tabindex="-1"><a class="header-anchor" href="#memory-å·¥å…·" aria-hidden="true">#</a> Memory å·¥å…·</h3><p>Memory å·¥å…·ï¼Œé€šè¿‡<code>å†…å­˜å¿«ç…§</code>çš„æ–¹å¼ï¼Œåˆ†æå½“å‰é¡µé¢çš„å†…å­˜ä½¿ç”¨æƒ…å†µ</p><p><strong>Memory å·¥å…·ä½¿ç”¨æµç¨‹</strong></p><p>1ï¼‰æ‰“å¼€ chrome æµè§ˆå™¨æ§åˆ¶å°ï¼Œé€‰æ‹©<code>Memory</code>å·¥å…·</p><p>2ï¼‰ç‚¹å‡»å·¦ä¾§<code>startæŒ‰é’®</code>ï¼Œåˆ·æ–°é¡µé¢ï¼Œå¼€å§‹å½•åˆ¶çš„<code>JSå †åŠ¨æ€åˆ†é…æ—¶é—´çº¿</code>ï¼Œä¼šç”Ÿæˆé¡µé¢åŠ è½½è¿‡ç¨‹å†…å­˜å˜åŒ–çš„æŸ±çŠ¶ç»Ÿè®¡å›¾ï¼ˆè“è‰²è¡¨ç¤ºæœªå›æ”¶ï¼Œç°è‰²è¡¨ç¤ºå·²å›æ”¶ï¼‰</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/aab5505602aa45498105fed8b8b20806~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="memory.jpg"></p><p><strong>Memory å·¥å…·ä¸­çš„å…³é”®é¡¹</strong></p><p><strong>å…³é”®é¡¹</strong></p><p>Constructorï¼šå¯¹è±¡çš„ç±»åï¼› Distanceï¼šå¯¹è±¡åˆ°æ ¹çš„å¼•ç”¨å±‚çº§ï¼› Objects Countï¼šå¯¹è±¡çš„æ•°é‡ï¼› Shallow Sizeï¼š å¯¹è±¡æœ¬èº«å ç”¨çš„å†…å­˜ï¼Œä¸åŒ…æ‹¬å¼•ç”¨çš„å¯¹è±¡æ‰€å å†…å­˜ï¼› Retained Sizeï¼š å¯¹è±¡æ‰€å æ€»å†…å­˜ï¼ŒåŒ…å«å¼•ç”¨çš„å…¶ä»–å¯¹è±¡æ‰€å å†…å­˜ï¼› Retainersï¼šå¯¹è±¡çš„å¼•ç”¨å±‚çº§å…³ç³»</p><p><strong>é€šè¿‡ä¸€æ®µæµ‹è¯•ä»£ç æ¥äº†è§£ Memory å·¥å…·å„å…³é”®æ€§çš„å…³ç³»</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// æµ‹è¯•ä»£ç </span>
<span class="token keyword">class</span> <span class="token class-name">Jane</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Tom</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>jane <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jane</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Tom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7a05c8093ada4d19a71a78c225b7e013~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="cpudemo.jpg"></p><p>shallow size å’Œ retained size çš„åŒºåˆ«ï¼Œä»¥ç”¨çº¢æ¡†é‡Œçš„ <code>Tom</code> å’Œ <code>Jane</code> æ›´ç›´è§‚çš„å±•ç¤º</p><p>Tom çš„ shallow å äº† 32Mï¼Œretained å ç”¨äº† 56Mï¼Œè¿™æ˜¯å› ä¸º retained åŒ…æ‹¬äº†å¼•ç”¨çš„æŒ‡é’ˆå¯¹åº”çš„å†…å­˜å¤§å°ï¼Œå³ <code>tom.jane</code> æ‰€å ç”¨çš„å†…å­˜</p><p>æ‰€ä»¥ Tom çš„ retained æ€»å’Œæ¯” shallow å¤šå‡ºæ¥çš„ 24Mï¼Œæ­£å¥½è·Ÿ Jane å ç”¨çš„ 24M ç›¸åŒ</p><p>retained size å¯ä»¥ç†è§£ä¸ºå½“å›æ”¶æ‰è¯¥å¯¹è±¡æ—¶å¯ä»¥é‡Šæ”¾çš„å†…å­˜å¤§å°ï¼Œåœ¨å†…å­˜è°ƒä¼˜ä¸­å…·æœ‰é‡è¦å‚è€ƒæ„ä¹‰</p><h3 id="å†…å­˜åˆ†æçš„å…³é”®ç‚¹" tabindex="-1"><a class="header-anchor" href="#å†…å­˜åˆ†æçš„å…³é”®ç‚¹" aria-hidden="true">#</a> å†…å­˜åˆ†æçš„å…³é”®ç‚¹</h3><p>æ‰¾åˆ°å†…å­˜æœ€é«˜çš„èŠ‚ç‚¹ï¼Œåˆ†æè¿™äº›æ—¶åˆ»æ‰§è¡Œäº†å“ªäº›ä»£ç ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆæ“ä½œï¼Œå°½å¯èƒ½å»ä¼˜åŒ–å®ƒä»¬</p><p>1ï¼‰ä»æŸ±çŠ¶å›¾ä¸­æ‰¾åˆ°æœ€é«˜çš„ç‚¹ï¼Œé‡ç‚¹åˆ†æè¯¥æ—¶é—´å†…é€ æˆå†…å­˜å˜å¤§çš„åŸå› </p><p>2ï¼‰æŒ‰ç…§<code>Retainers size</code>ï¼ˆæ€»å†…å­˜å¤§å°ï¼‰æ’åºï¼Œç‚¹å‡»å±•å¼€å†…å­˜æœ€é«˜çš„å“ªä¸€é¡¹ï¼Œç‚¹å‡»å±•å¼€æ„é€ å‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°æ‰€æœ‰æ„é€ å‡½æ•°ç›¸å…³çš„å¯¹è±¡å®ä¾‹</p><p>3ï¼‰é€‰ä¸­æ„é€ å‡½æ•°ï¼Œåº•éƒ¨ä¼šæ˜¾ç¤ºå¯¹åº”æºç æ–‡ä»¶ï¼Œç‚¹å‡»æºç æ–‡ä»¶ï¼Œå¯ä»¥è·³è½¬åˆ°å…·ä½“çš„ä»£ç ï¼Œè¿™æ ·æˆ‘ä»¬å°±çŸ¥é“æ˜¯å“ªé‡Œçš„ä»£ç é€ æˆå†…å­˜è¿‡å¤§</p><p>4ï¼‰ç»“åˆå…·ä½“çš„ä»£ç é€»è¾‘ï¼Œæ¥åˆ¤æ–­è¿™å—å†…å­˜å˜å¤§çš„åŸå› ï¼Œé‡ç‚¹æ˜¯å¦‚ä½•å»ä¼˜åŒ–å®ƒä»¬ï¼Œé™ä½å†…å­˜çš„ä½¿ç”¨å¤§å°</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2f4655f8d064457ba2624c9806d7a094~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="retainedSize.jpg"></p><p><strong>ç‚¹å‡»<code>keyghost.js</code>å¯ä»¥è·³è½¬åˆ°å…·ä½“çš„æºç </strong></p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/080b6071cd4946729a3bc68c22a588e8~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="localkey.png"></p><h3 id="å†…å­˜æ³„éœ²çš„æƒ…å†µ" tabindex="-1"><a class="header-anchor" href="#å†…å­˜æ³„éœ²çš„æƒ…å†µ" aria-hidden="true">#</a> å†…å­˜æ³„éœ²çš„æƒ…å†µ</h3><p>1ï¼‰æ„å¤–çš„å…¨å±€å˜é‡ï¼Œ æŒ‚è½½åˆ° window ä¸Šå…¨å±€å˜é‡ 2ï¼‰é—å¿˜çš„å®šæ—¶å™¨ï¼Œå®šæ—¶å™¨æ²¡æœ‰æ¸…é™¤ 3ï¼‰é—­åŒ…ä¸å½“çš„ä½¿ç”¨</p><h3 id="å†…å­˜åˆ†ææ€»ç»“" tabindex="-1"><a class="header-anchor" href="#å†…å­˜åˆ†ææ€»ç»“" aria-hidden="true">#</a> å†…å­˜åˆ†ææ€»ç»“</h3><p>1ï¼‰åˆ©ç”¨ Memory å·¥å…·ï¼Œäº†è§£é¡µé¢æ•´ä½“çš„å†…å­˜ä½¿ç”¨æƒ…å†µ</p><p>2ï¼‰é€šè¿‡ JS å †åŠ¨æ€åˆ†é…æ—¶é—´çº¿ï¼Œæ‰¾åˆ°å†…å­˜æœ€é«˜çš„æ—¶åˆ»</p><p>3ï¼‰æŒ‰ç…§ Retainers sizeï¼ˆæ€»å†…å­˜å¤§å°ï¼‰æ’åºï¼Œç‚¹å‡»å±•å¼€å†…å­˜æœ€é«˜çš„å‰å‡ é¡¹ï¼Œåˆ†æç”±äºå“ªä¸ªå‡½æ•°æ“ä½œå¯¼è‡´äº†å†…å­˜è¿‡å¤§ï¼Œç”šè‡³æ˜¯å†…å­˜æ³„éœ²</p><p>4ï¼‰ç»“åˆå…·ä½“çš„ä»£ç ï¼Œå»è§£å†³æˆ–ä¼˜åŒ–å†…å­˜å˜å¤§çš„æƒ…å†µ</p><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fblog.csdn.net%2Fc11073138%2Farticle%2Fdetails%2F84700482" target="_blank" rel="noopener noreferrer">chrome å†…å­˜æ³„éœ²ï¼ˆä¸€ï¼‰ã€å†…å­˜æ³„æ¼åˆ†æå·¥å…·<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://link.juejin.cn/?target=https%3A%2F%2Fblog.csdn.net%2Fc11073138%2Farticle%2Fdetails%2F84728132%3Fspm%3D1001.2014.3001.5502" target="_blank" rel="noopener noreferrer">chrome å†…å­˜æ³„éœ²ï¼ˆäºŒï¼‰ã€å†…å­˜æ³„æ¼å®ä¾‹<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://juejin.cn/post/6844904038064979981" target="_blank" rel="noopener noreferrer">JavaScript è¿›é˜¶-å¸¸è§å†…å­˜æ³„éœ²åŠå¦‚ä½•é¿å…<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="é¡¹ç›®ä¼˜åŒ–æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#é¡¹ç›®ä¼˜åŒ–æ€»ç»“" aria-hidden="true">#</a> é¡¹ç›®ä¼˜åŒ–æ€»ç»“</h2><p><strong>ä¼˜åŒ–çš„æœ¬è´¨ï¼šå“åº”æ›´å¿«ï¼Œå±•ç¤ºæ›´å¿«</strong></p><p>æ›´è¯¦ç»†çš„è¯´ï¼Œæ˜¯æŒ‡åœ¨ç”¨æˆ·è¾“å…¥ urlï¼Œåˆ°é¡µé¢å®Œæ•´å±•ç¤ºå‡ºæ¥çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡å„ç§ä¼˜åŒ–ç­–ç•¥å’Œæ–¹æ³•ï¼Œè®©é¡µé¢åŠ è½½æ›´å¿«ï¼›åœ¨ç”¨æˆ·ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œè®©ç”¨æˆ·çš„æ“ä½œå“åº”æ›´åŠæ—¶ï¼Œæœ‰æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ</p><h3 id="ç»å…¸-é›…è™å†›è§„" tabindex="-1"><a class="header-anchor" href="#ç»å…¸-é›…è™å†›è§„" aria-hidden="true">#</a> ç»å…¸ï¼šé›…è™å†›è§„</h3><p>å¾ˆå¤šå‰ç«¯ä¼˜åŒ–å‡†åˆ™éƒ½æ˜¯å›´ç»•ç€è¿™ä¸ªå±•å¼€</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f752944cbfe742449b12fef3056c4b43~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="é›…è™35æ¡å†›è§„.jpg"></p><h3 id="ä¼˜åŒ–å»ºè®®" tabindex="-1"><a class="header-anchor" href="#ä¼˜åŒ–å»ºè®®" aria-hidden="true">#</a> ä¼˜åŒ–å»ºè®®</h3><p>ç»“åˆæˆ‘æ›¾ç»è´Ÿè´£ä¼˜åŒ–çš„é¡¹ç›®å®è·µï¼Œåœ¨ä¸‹é¢æ€»ç»“äº†ä¸€äº›ç»éªŒä¸æ–¹æ³•ï¼Œæä¾›ç»™å¤§å®¶å‚è€ƒ</p><h4 id="_1ã€åˆ†ææ‰“åŒ…åçš„æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_1ã€åˆ†ææ‰“åŒ…åçš„æ–‡ä»¶" aria-hidden="true">#</a> 1ã€åˆ†ææ‰“åŒ…åçš„æ–‡ä»¶</h4><p>å¯ä»¥ä½¿ç”¨<a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fwebpack-bundle-analyzer" target="_blank" rel="noopener noreferrer">webpack-bundle-analyzer<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>æ’ä»¶(vue é¡¹ç›®å¯ä»¥ä½¿ç”¨--report)ç”Ÿæˆèµ„æºåˆ†æå›¾</p><p>æˆ‘ä»¬è¦æ¸…æ¥šçš„çŸ¥é“é¡¹ç›®ä¸­ä½¿ç”¨äº†å“ªäº›ä¸‰æ–¹ä¾èµ–ï¼Œä»¥åŠä¾èµ–çš„ä½œç”¨ã€‚ç‰¹åˆ«å¯¹äºä½“ç§¯å¤§çš„ä¾èµ–ï¼Œåˆ†ææ˜¯å¦èƒ½ä¼˜åŒ–</p><p>æ¯”å¦‚ï¼šç»„ä»¶åº“å¦‚<code>elementUI</code>çš„æŒ‰éœ€å¼•å…¥ã€<code>Swiperè½®æ’­å›¾</code>ç»„ä»¶æ‰“åŒ…åçš„ä½“ç§¯çº¦ 200kï¼Œçœ‹æ˜¯å¦èƒ½æ›¿æ¢æˆä½“ç§¯æ›´å°çš„æ’ä»¶ã€<code>momentjs</code>å»æ‰æ— ç”¨çš„è¯­è¨€åŒ…ç­‰</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4ee7ed860fbd435187629e41cafb4ca6~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="vendors.png"></p><h4 id="_2ã€åˆç†å¤„ç†å…¬å…±èµ„æº" tabindex="-1"><a class="header-anchor" href="#_2ã€åˆç†å¤„ç†å…¬å…±èµ„æº" aria-hidden="true">#</a> 2ã€åˆç†å¤„ç†å…¬å…±èµ„æº</h4><p>å¦‚æœé¡¹ç›®æ”¯æŒ CDNï¼Œå¯ä»¥é…ç½®<code>externals</code>ï¼Œå°†<code>Vueã€Vue-routerã€Vuexã€echarts</code>ç­‰å…¬å…±èµ„æºï¼Œé€šè¿‡ CDN çš„æ–¹å¼å¼•å…¥ï¼Œä¸æ‰“åˆ°é¡¹ç›®é‡Œè¾¹</p><p>å¦‚æœé¡¹ç›®ä¸æ”¯æŒ CDNï¼Œå¯ä»¥ä½¿ç”¨<code>DllPlugin</code>åŠ¨æ€é“¾æ¥åº“ï¼Œå°†ä¸šåŠ¡ä»£ç å’Œå…¬å…±èµ„æºä»£ç ç›¸åˆ†ç¦»ï¼Œå…¬å…±èµ„æºå•ç‹¬æ‰“åŒ…ï¼Œç»™è¿™äº›å…¬å…±èµ„æºè®¾ç½®å¼ºç¼“å­˜ï¼ˆå…¬å…±èµ„æºåŸºæœ¬ä¸ä¼šå˜ï¼‰ï¼Œè¿™æ ·ä»¥åå¯ä»¥åªæ‰“åŒ…ä¸šåŠ¡ä»£ç ï¼Œæå‡æ‰“åŒ…é€Ÿåº¦</p><h4 id="_3ã€é¦–å±å¿…è¦èµ„æº-preload-é¢„åŠ è½½-å’Œ-dns-é¢„è§£æ" tabindex="-1"><a class="header-anchor" href="#_3ã€é¦–å±å¿…è¦èµ„æº-preload-é¢„åŠ è½½-å’Œ-dns-é¢„è§£æ" aria-hidden="true">#</a> 3ã€é¦–å±å¿…è¦èµ„æº preload é¢„åŠ è½½ å’Œ DNS é¢„è§£æ</h4><p><strong>preload é¢„åŠ è½½</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&lt;link rel=&quot;preload&quot; href=&quot;/path/style.css&quot; as=&quot;style&quot;&gt;`
`&lt;link rel=&quot;preload&quot; href=&quot;/path/home.js&quot; as=&quot;script&quot;&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>preload é¢„åŠ è½½æ˜¯å‘Šè¯‰æµè§ˆå™¨é¡µé¢å¿…å®šéœ€è¦çš„èµ„æºï¼Œæµè§ˆå™¨ä¼šä¼˜å…ˆåŠ è½½è¿™äº›èµ„æºï¼›ä½¿ç”¨ link æ ‡ç­¾åˆ›å»ºï¼ˆvue é¡¹ç›®æ‰“åŒ…åï¼Œä¼šå°†é¦–é¡µæ‰€ç”¨åˆ°çš„èµ„æºéƒ½åŠ ä¸Š preloadï¼‰</p><p>æ³¨æ„ï¼špreload åªæ˜¯é¢„åŠ è½½èµ„æºï¼Œä½†ä¸ä¼šæ‰§è¡Œï¼Œè¿˜éœ€è¦å¼•å…¥å…·ä½“çš„æ–‡ä»¶åæ‰ä¼šæ‰§è¡Œ <code>&lt;script src=&#39;/path/home.js&#39;&gt;</code></p><p><strong>DNS é¢„è§£æ</strong></p><p><code>DNS Prefetch</code> æ˜¯ä¸€ç§ DNS é¢„è§£ææŠ€æœ¯ï¼Œå½“ä½ æµè§ˆç½‘é¡µæ—¶ï¼Œæµè§ˆå™¨ä¼šåœ¨åŠ è½½ç½‘é¡µæ—¶ï¼Œå¯¹ç½‘é¡µä¸­çš„åŸŸåè¿›è¡Œè§£æç¼“å­˜</p><p>è¿™æ ·åœ¨ä½ å•å‡»å½“å‰ç½‘é¡µä¸­çš„è¿æ¥æ—¶å°±æ— éœ€è¿›è¡Œ<code>DNS</code> çš„è§£æï¼Œå‡å°‘ç”¨æˆ·ç­‰å¾…æ—¶é—´ï¼Œæé«˜ç”¨æˆ·ä½“éªŒ</p><p>ä½¿ç”¨<code>dns-prefetch</code>ï¼Œå¦‚<code>&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//img1.taobao.com&quot;&gt;</code></p><p>å¾ˆå¤šå¤§å‹çš„ç½‘ç«™ï¼Œéƒ½ä¼šç”¨<code>N</code> ä¸ª<code>CDN</code> åŸŸåæ¥åšå›¾ç‰‡ã€é™æ€æ–‡ä»¶ç­‰èµ„æºè®¿é—®ã€‚è§£æå•ä¸ªåŸŸååŒæ ·çš„åœ°ç‚¹åŠ ä¸Šé«˜å¹¶å‘éš¾å…æœ‰ç‚¹å µå¡ï¼Œé€šè¿‡å¤šä¸ª CDN åŸŸåæ¥åˆ†æ‹…é«˜å¹¶å‘ä¸‹çš„å µå¡</p><h4 id="_4ã€é¦–å±ä¸å¿…è¦èµ„æºå»¶è¿ŸåŠ è½½" tabindex="-1"><a class="header-anchor" href="#_4ã€é¦–å±ä¸å¿…è¦èµ„æºå»¶è¿ŸåŠ è½½" aria-hidden="true">#</a> 4ã€é¦–å±ä¸å¿…è¦èµ„æºå»¶è¿ŸåŠ è½½</h4><p><strong>æ–¹å¼ä¸€ï¼š defer æˆ– async</strong></p><p>ä½¿ç”¨ script æ ‡ç­¾çš„<code>deferæˆ–async</code>å±æ€§ï¼Œè¿™ä¸¤ç§æ–¹å¼éƒ½æ˜¯å¼‚æ­¥åŠ è½½ jsï¼Œä¸ä¼šé˜»å¡ DOM çš„æ¸²æŸ“</p><p>async æ˜¯æ— é¡ºåºçš„åŠ è½½ï¼Œè€Œ defer æ˜¯æœ‰é¡ºåºçš„åŠ è½½</p><p>1ï¼‰ä½¿ç”¨ defer å¯ä»¥ç”¨æ¥æ§åˆ¶ js æ–‡ä»¶çš„åŠ è½½é¡ºåº</p><p>æ¯”å¦‚ jq å’Œ Bootstrapï¼Œå› ä¸º Bootstrap ä¸­çš„ js æ’ä»¶ä¾èµ–äº jqeryï¼Œæ‰€ä»¥å¿…é¡»å…ˆå¼•å…¥ jQueryï¼Œå†å¼•å…¥ Bootstrap js æ–‡ä»¶</p><p>2ï¼‰å¦‚æœä½ çš„è„šæœ¬å¹¶ä¸å…³å¿ƒé¡µé¢ä¸­çš„ DOM å…ƒç´ ï¼ˆæ–‡æ¡£æ˜¯å¦è§£æå®Œæ¯•ï¼‰ï¼Œå¹¶ä¸”ä¹Ÿä¸ä¼šäº§ç”Ÿå…¶ä»–è„šæœ¬éœ€è¦çš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ asyncï¼Œå¦‚æ·»åŠ ç»Ÿè®¡ã€åŸ‹ç‚¹ç­‰èµ„æº</p><p><strong>æ–¹å¼äºŒï¼šä¾èµ–åŠ¨æ€å¼•å…¥</strong></p><p>é¡¹ç›®ä¾èµ–çš„èµ„æºï¼Œæ¨èåœ¨å„è‡ªçš„é¡µé¢ä¸­åŠ¨æ€å¼•å…¥ï¼Œä¸è¦å…¨éƒ¨éƒ½æ”¾åˆ° index.html ä¸­</p><p>æ¯”å¦‚<code>echart.js</code>ï¼Œåªæœ‰ A é¡µé¢ä½¿ç”¨ï¼Œå¯ä»¥åœ¨ A é¡µé¢çš„é’©å­å‡½æ•°ä¸­åŠ¨æ€åŠ è½½ï¼Œåœ¨<code>onloadäº‹ä»¶</code>ä¸­è¿›è¡Œ echart åˆå§‹åŒ–</p><p><strong>èµ„æºåŠ¨æ€åŠ è½½çš„ä»£ç ç¤ºä¾‹</strong></p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code>// url è¦åŠ è½½çš„èµ„æº
// isMustLoad æ˜¯å¦å¼ºåˆ¶åŠ è½½
<span class="token key attr-name">cont asyncLoadJs</span> <span class="token punctuation">=</span> <span class="token value attr-value">(url, isMustLoad = false) =&gt; {</span>
  <span class="token key attr-name">return new Promise((resolve, reject)</span> <span class="token punctuation">=</span><span class="token value attr-value">&gt; {</span>
    if (!isMustLoad) {
      <span class="token key attr-name">let srcArr</span> <span class="token punctuation">=</span> <span class="token value attr-value">document.getElementsByTagName(&quot;script&quot;);</span>
      <span class="token key attr-name">let hasLoaded</span> <span class="token punctuation">=</span> <span class="token value attr-value">false;</span>
      <span class="token key attr-name">let aTemp</span> <span class="token punctuation">=</span> <span class="token value attr-value">[];</span>
      <span class="token key attr-name">for (let i</span> <span class="token punctuation">=</span> <span class="token value attr-value">0; i &lt; srcArr.length; i++) {</span>
        // åˆ¤æ–­å½“å‰jsæ˜¯å¦åŠ è½½ä¸Š
        if (srcArr[i].src) {
          aTemp.push(srcArr[i].src);
        }
      }
      <span class="token key attr-name">hasLoaded</span> <span class="token punctuation">=</span> <span class="token value attr-value">aTemp.indexOf(url) &gt; -1;</span>
      if (hasLoaded) {
        resolve();
        return;
      }
    }

    <span class="token key attr-name">let script</span> <span class="token punctuation">=</span> <span class="token value attr-value">document.createElement(&quot;script&quot;);</span>
    <span class="token key attr-name">script.type</span> <span class="token punctuation">=</span> <span class="token value attr-value">&quot;text/javascript&quot;;</span>
    <span class="token key attr-name">script.src</span> <span class="token punctuation">=</span> <span class="token value attr-value">url;</span>
    document.body.appendChild(script);
    // èµ„æºåŠ è½½æˆåŠŸçš„å›è°ƒ
    <span class="token key attr-name">script.onload</span> <span class="token punctuation">=</span> <span class="token value attr-value">() =&gt; {</span>
      resolve();
    };
    <span class="token key attr-name">script.onerror</span> <span class="token punctuation">=</span> <span class="token value attr-value">() =&gt; {</span>
      // reject();
    };
  });
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ–¹å¼ä¸‰ï¼šimport()</strong></p><p>ä½¿ç”¨<code>import() åŠ¨æ€åŠ è½½è·¯ç”±å’Œç»„ä»¶</code>ï¼Œå¯¹èµ„æºè¿›è¡Œæ‹†åˆ†ï¼Œåªæœ‰ä½¿ç”¨çš„æ—¶å€™æ‰è¿›è¡ŒåŠ¨æ€åŠ è½½</p><div class="language-dart ext-dart line-numbers-mode"><pre class="language-dart"><code><span class="token comment">// è·¯ç”±æ‡’åŠ è½½</span>
<span class="token keyword">const</span> <span class="token class-name">Home</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;home&quot; */</span> <span class="token string-literal"><span class="token string">&#39;../views/home/index.vue&#39;</span></span><span class="token punctuation">)</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&#39;/&#39;</span></span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&#39;home&#39;</span></span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> <span class="token class-name">Home</span><span class="token punctuation">}</span> <span class="token punctuation">]</span>

<span class="token comment">// ç»„ä»¶æ‡’åŠ è½½</span>
<span class="token comment">// åœ¨visibleå±æ€§ä¸ºtrueæ—¶ï¼ŒåŠ¨æ€å»åŠ è½½demoComponentç»„ä»¶</span>
<span class="token operator">&lt;</span>demoComponent v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string-literal"><span class="token string">&quot;visible == true&quot;</span></span> <span class="token operator">/</span><span class="token operator">&gt;</span>

components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    demoComponent<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;demoComponent&quot; */</span> <span class="token string-literal"><span class="token string">&#39;./demoComponent.vue&#39;</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5ã€åˆç†åˆ©ç”¨ç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#_5ã€åˆç†åˆ©ç”¨ç¼“å­˜" aria-hidden="true">#</a> 5ã€åˆç†åˆ©ç”¨ç¼“å­˜</h4><p>html èµ„æºè®¾ç½®åå•†ç¼“å­˜ï¼Œå…¶ä»– jsã€cssã€å›¾ç‰‡ç­‰èµ„æºè®¾ç½®å¼ºç¼“å­˜</p><p>å½“ç”¨æˆ·å†æ¬¡æ‰“å¼€é¡µé¢æ—¶ï¼Œhtml å…ˆå’ŒæœåŠ¡å™¨æ ¡éªŒï¼Œå¦‚æœè¯¥èµ„æºæœªå˜åŒ–ï¼ŒæœåŠ¡å™¨è¿”å› 304ï¼Œç›´æ¥ä½¿ç”¨ç¼“å­˜çš„æ–‡ä»¶ï¼›è‹¥è¿”å› 200ï¼Œåˆ™è¿”å›æœ€æ–°çš„ html èµ„æº</p><h4 id="_6ã€ç½‘ç»œæ–¹é¢çš„ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_6ã€ç½‘ç»œæ–¹é¢çš„ä¼˜åŒ–" aria-hidden="true">#</a> 6ã€ç½‘ç»œæ–¹é¢çš„ä¼˜åŒ–</h4><p>1ï¼‰å¼€å¯æœåŠ¡å™¨ Gzip å‹ç¼©ï¼Œå‡å°‘è¯·æ±‚å†…å®¹çš„ä½“ç§¯ï¼Œå¯¹æ–‡æœ¬ç±»èƒ½å‹ç¼© 60%ä»¥ä¸Š</p><p>2ï¼‰ä½¿ç”¨ HTTP2ï¼Œæ¥å£è§£æé€Ÿåº¦å¿«ã€å¤šè·¯å¤ç”¨ã€é¦–éƒ¨å‹ç¼©ç­‰</p><p>3ï¼‰å‡å°‘ HTTP è¯·æ±‚ï¼Œä½¿ç”¨ url-loaderï¼Œlimit é™åˆ¶å›¾ç‰‡å¤§å°ï¼Œå°å›¾ç‰‡è½¬ base64</p><h4 id="_7ã€ä»£ç å±‚é¢çš„ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_7ã€ä»£ç å±‚é¢çš„ä¼˜åŒ–" aria-hidden="true">#</a> 7ã€ä»£ç å±‚é¢çš„ä¼˜åŒ–</h4><p>1ï¼‰å‰ç«¯é•¿åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–ï¼Œåˆ†é¡µ + è™šæ‹Ÿåˆ—è¡¨ï¼Œé•¿åˆ—è¡¨æ¸²æŸ“çš„æ€§èƒ½æ•ˆç‡ä¸ç”¨æˆ·ä½“éªŒæˆæ­£æ¯”</p><p>2ï¼‰å›¾ç‰‡çš„æ‡’åŠ è½½ã€<code>å›¾ç‰‡çš„åŠ¨æ€è£å‰ª</code></p><p>ç‰¹ç‚¹æ˜¯æ‰‹æœºç«¯é¡¹ç›®ï¼Œå›¾ç‰‡å‡ ä¹ä¸éœ€è¦åŸå›¾ï¼Œä½¿ç”¨ä¸ƒç‰›æˆ–é˜¿é‡Œäº‘çš„åŠ¨æ€è£å‰ªåŠŸèƒ½ï¼Œå¯ä»¥å°†åŸæœ¬<code>å‡ M</code>çš„å¤§å°è£å‰ªæˆ<code>å‡ k</code></p><p>3ï¼‰åŠ¨ç”»çš„ä¼˜åŒ–ï¼ŒåŠ¨ç”»å¯ä»¥ä½¿ç”¨ç»å¯¹å®šä½ï¼Œè®©å…¶è„±ç¦»æ–‡æ¡£æµï¼Œä¿®æ”¹åŠ¨ç”»ä¸é€ æˆä¸»ç•Œé¢çš„å½±å“</p><p>ä½¿ç”¨ GPU ç¡¬ä»¶åŠ é€ŸåŒ…æ‹¬ï¼š<code>transform ä¸ä¸ºnoneã€opacityã€filterã€will-change</code></p><p>4ï¼‰å‡½æ•°çš„èŠ‚æµå’Œé˜²æŠ–ï¼Œå‡å°‘æ¥å£çš„è¯·æ±‚æ¬¡æ•°</p><p>5ï¼‰ä½¿ç”¨éª¨æ¶å±ä¼˜åŒ–ç”¨æˆ·ç­‰å¾…ä½“éªŒï¼Œå¯ä»¥æ ¹æ®ä¸åŒè·¯ç”±é…ç½®ä¸åŒçš„éª¨æ¶</p><p>vue é¡¹ç›®æ¨èä½¿ç”¨<code>vue-skeleton-webpack-plugin</code>ï¼Œéª¨æ¶å±åŸç†å°†<code>&lt;div id=&quot;app&quot;&gt;&lt;/div&gt; </code>ä¸­çš„å†…å®¹æ›¿æ¢æ‰</p><p>6ï¼‰å¤§æ•°æ®çš„æ¸²æŸ“ï¼Œå¦‚æœæ•°æ®ä¸ä¼šå˜åŒ–ï¼Œvue é¡¹ç›®å¯ä»¥ä½¿ç”¨<code>Object.freeze()</code></p><p>Object.freeze()æ–¹æ³•å¯ä»¥å†»ç»“ä¸€ä¸ªå¯¹è±¡ï¼ŒVue æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¼šå°† data ä¸­å®šä¹‰çš„æ˜¯å¯¹è±¡å˜æˆå“åº”å¼ï¼Œä½†å¦‚æœåˆ¤æ–­å¯¹è±¡çš„è‡ªèº«å±æ€§ä¸å¯ä¿®æ”¹ï¼Œå°±ç›´æ¥è¿”å›æ”¹å¯¹è±¡ï¼Œçœå»äº†é€’å½’éå†å¯¹è±¡çš„æ—¶é—´ä¸å†…å­˜æ¶ˆè€—</p><p>7ï¼‰å®šæ—¶å™¨å’Œç»‘å®šçš„äº‹ä»¶ï¼Œåœ¨é¡µé¢é”€æ¯æ—¶å¸è½½</p><h4 id="_8ã€webpack-ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_8ã€webpack-ä¼˜åŒ–" aria-hidden="true">#</a> 8ã€webpack ä¼˜åŒ–</h4><p>æå‡æ„å»ºé€Ÿåº¦æˆ–ä¼˜åŒ–ä»£ç ä½“ç§¯ï¼Œæ¨èä»¥ä¸‹ä¸¤ç¯‡æ–‡ç« </p><p><a href="https://juejin.cn/post/6844903924806189070" target="_blank" rel="noopener noreferrer">Webpack ä¼˜åŒ–â€”â€”å°†ä½ çš„æ„å»ºæ•ˆç‡æé€Ÿç¿»å€<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://juejin.cn/post/6844904093463347208" target="_blank" rel="noopener noreferrer">å¸¦ä½ æ·±åº¦è§£é” Webpack ç³»åˆ—(ä¼˜åŒ–ç¯‡)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="æ€§èƒ½åˆ†ææ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€§èƒ½åˆ†ææ€»ç»“" aria-hidden="true">#</a> æ€§èƒ½åˆ†ææ€»ç»“</h3><p>1ï¼‰å…ˆç”¨ Lighthouse å¾—åˆ°å½“å‰é¡µé¢çš„æ€§èƒ½å¾—åˆ†ï¼Œäº†è§£é¡µé¢çš„æ•´ä½“æƒ…å†µï¼Œé‡ç‚¹å…³æ³¨ Opportunities ä¼˜åŒ–å»ºè®®å’Œ Diagnostics è¯Šæ–­é—®é¢˜åˆ—è¡¨</p><p>2ï¼‰é€šè¿‡ Performance å·¥å…·äº†è§£é¡µé¢åŠ è½½çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œåˆ†æåˆ°åº•æ˜¯èµ„æºåŠ è½½æ…¢ã€dom æ¸²æŸ“æ…¢ã€è¿˜æ˜¯ js æ‰§è¡Œæ…¢ï¼Œæ‰¾åˆ°å…·ä½“çš„æ€§èƒ½ç“¶é¢ˆåœ¨å“ªé‡Œï¼Œé‡ç‚¹å…³æ³¨é•¿ä»»åŠ¡ï¼ˆlong taskï¼‰</p><p>3ï¼‰åˆ©ç”¨ Memory å·¥å…·ï¼Œäº†è§£é¡µé¢æ•´ä½“çš„å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œé€šè¿‡ JS å †åŠ¨æ€åˆ†é…æ—¶é—´çº¿ï¼Œæ‰¾åˆ°å†…å­˜æœ€é«˜çš„æ—¶åˆ»ã€‚ç»“åˆå…·ä½“çš„ä»£ç ï¼Œå»è§£å†³æˆ–ä¼˜åŒ–å†…å­˜å˜å¤§çš„é—®é¢˜</p><h3 id="å‰ç«¯ç›‘æ§" tabindex="-1"><a class="header-anchor" href="#å‰ç«¯ç›‘æ§" aria-hidden="true">#</a> å‰ç«¯ç›‘æ§</h3><p>æ²¡æœ‰ç›‘æ§çš„é¡¹ç›®ï¼Œå°±æ˜¯åœ¨<code>â€œè£¸å¥”â€</code></p><p>éœ€è¦é€šè¿‡ç›‘æ§æ‰èƒ½çœŸæ­£äº†è§£é¡¹ç›®çš„æ•´ä½“æƒ…å†µï¼Œå„é¡¹æŒ‡æ ‡è¦é€šè¿‡å¤§é‡çš„æ•°æ®é‡‡é›†ã€æ•°æ®åˆ†æï¼Œå˜å¾—æ›´æœ‰æ„ä¹‰</p><p>ç›‘æ§çš„å¥½å¤„ï¼šäº‹å‰é¢„è­¦å’Œäº‹ååˆ†æ</p><p><strong>äº‹å‰é¢„è­¦</strong>ï¼šè®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼Œå½“ç›‘æ§çš„æ•°æ®è¾¾åˆ°é˜ˆå€¼æ—¶ï¼Œé€šè¿‡å„ç§æ¸ é“é€šçŸ¥ç®¡ç†å‘˜å’Œå¼€å‘ï¼Œæå‰é¿å…å¯èƒ½ä¼šé€ æˆçš„å®•æœºæˆ–å´©æºƒ</p><p><strong>äº‹ååˆ†æ</strong>ï¼šé€šè¿‡ç›‘æ§æ—¥å¿—æ–‡ä»¶ï¼Œåˆ†ææ•…éšœåŸå› å’Œæ•…éšœå‘ç”Ÿç‚¹ã€‚ä»è€Œåšå‡ºä¿®æ”¹ï¼Œé˜²æ­¢è¿™ç§æƒ…å†µå†æ¬¡å‘ç”Ÿ</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¸‚é¢ä¸Šç°æœ‰çš„å·¥å…·ï¼Œä¹Ÿå¯ä»¥è‡ªå»º sentry ç›‘æ§ï¼Œå…³é”®åœ¨äºé€šè¿‡è¿™äº›æ•°æ®ï¼Œèƒ½çœ‹åˆ°è¿™äº›<code>å†°å†·æ•°æ®èƒŒåçš„æ•…äº‹</code></p><h2 id="ç»„ä»¶åº“" tabindex="-1"><a class="header-anchor" href="#ç»„ä»¶åº“" aria-hidden="true">#</a> ç»„ä»¶åº“</h2><p>ç»„ä»¶åº“æ˜¯å¼€å‘é¡¹ç›®æ—¶å¿…å¤‡çš„å·¥å…·ï¼Œå› ä¸ºç°åœ¨å„ä¸ªå¤§å‚æä¾›çš„ç»„ä»¶åº“éƒ½å¤ªå¥½ç”¨äº†ï¼Œåè€Œè®©å¤§å®¶è½»è§†äº†ç»„ä»¶åº“çš„é‡è¦æ€§</p><p>ç°åœ¨å¼€å‘ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œå¦‚æœè¦æ±‚ä¸èƒ½ç”¨ç°æˆçš„ç»„ä»¶åº“ï¼Œæˆ‘ä¼°è®¡è¦ç¬é—´æ‡µé€¼ï¼Œæ— ä»ä¸‹æ‰‹äº†ï¼Œä¸çŸ¥ä¸è§‰ä¸­ï¼Œæˆ‘å·²ç»æ‚£ä¸Šä¸¥é‡çš„<code>ç»„ä»¶åº“ä¾èµ–ç—‡</code></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>å¦‚æœè®©æˆ‘åªèƒ½è¯´å‡ºä¸€ç§ï¼Œå¿«é€Ÿæå‡ç¼–ç¨‹æŠ€èƒ½çš„æ–¹æ³•ï¼Œæˆ‘ä¸€å®šä¼šæ¨èå»çœ‹çœ‹ç»„ä»¶åº“æºç 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>å› ä¸ºç»„ä»¶åº“æºç ä¸­ï¼Œéƒ½æ˜¯æœ€ç»å…¸çš„æ¡ˆä¾‹ï¼Œæ˜¯é›†å¤§æˆçš„æ°ä½œ</strong></p><p>ç›¸æ¯”äºå‰ç«¯æ¡†æ¶æºç çš„æ™¦æ¶©ï¼Œç»„ä»¶åº“æºç æ›´å®¹æ˜“ä¸Šæ‰‹ï¼Œé‡Œè¾¹å¾ˆå¤šç»å…¸åœºæ™¯çš„å†™æ³•ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥å€Ÿé‰´ï¼Œç„¶åè¿ç”¨åˆ°å®é™…çš„é¡¹ç›®ä¸­</p><p>æ¯”å¦‚æœ€å¸¸ç”¨çš„å¼¹æ¡†ç»„ä»¶ï¼Œé‡Œè¾¹çš„<code>æµç¨‹æ§åˆ¶ã€å±‚çº§æ§åˆ¶ã€ç»„ä»¶é—´äº‹ä»¶æ´¾å‘ä¸å¹¿æ’­ã€é€’å½’æŸ¥æ‰¾ç»„ä»¶</code>ç­‰è®¾è®¡ï¼Œç›¸å½“æƒŠè‰³ï¼ŒçœŸæ²¡æƒ³åˆ°ä¸€ä¸ªå°å°çš„å¼¹æ¡†ç»„ä»¶ï¼Œä¹Ÿæ˜¯å†…æœ‰ä¹¾å¤</p><p>æ¨èä¸€ä¸‹æˆ‘æ­£åœ¨å†™çš„<a href="https://juejin.cn/column/7095181360632971300" target="_blank" rel="noopener noreferrer">ElementUI æºç -æ‰“é€ è‡ªå·±çš„ç»„ä»¶åº“<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>æ–‡ç« ï¼Œç»å…¸çš„ä¸œè¥¿æ°¸è¿œæ˜¯ç»å…¸</p><h2 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h2><p>å·¥ç¨‹åŒ–ï¼Œæ˜¯ä¸€ä¸ªéå¸¸å®¹æ˜“<code>å‡ºå½©</code>çš„æ–¹å‘ï¼Œæ˜¯å±•ç°ä¸€ä¸ªä¾ è€…å†…åŠŸæ˜¯å¦æ·±åšçš„çª—å£</p><p>æ–‡ä¸­å¤§éƒ¨åˆ†çŸ¥è¯†ç‚¹ï¼Œåªæ˜¯<code>å…¥é—¨çº§æ•™ç¨‹</code>ï¼Œä¹Ÿæ˜¯æˆ‘ä»¥åéœ€è¦æŒç»­åŠªåŠ›çš„æ–¹å‘</p><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fxy-sea%2Fblog%2Ftree%2Fdev%2F%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AF%87" target="_blank" rel="noopener noreferrer">å·¥ç¨‹åŒ–ç¯‡ github æºç ä»“åº“<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><!----><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><a href="/coding/frontend/summary/2.%E7%AE%97%E6%B3%95%E7%AF%87/" class="nav-link prev" aria-label="ç®—æ³•"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->ç®—æ³•</div></a><a href="/coding/frontend/summary/4.%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6+%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%90%86%E7%AF%87/" class="nav-link next" aria-label="å‰ç«¯æ¡†æ¶ã€æµè§ˆå™¨åŸç†"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">å‰ç«¯æ¡†æ¶ã€æµè§ˆå™¨åŸç†<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">Apache 2.0 Licensed | Copyright Â© 2022-present</div><!----></footer><!--]--></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app.4b209731.js" defer></script>
  </body>
</html>
